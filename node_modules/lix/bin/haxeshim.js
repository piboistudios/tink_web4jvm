#!/usr/bin/env node
module.exports=function(t,e){"use strict";var n={};function __webpack_require__(e){if(n[e]){return n[e].exports}var i=n[e]={i:e,l:false,exports:{}};t[e].call(i.exports,i,i.exports,__webpack_require__);i.l=true;return i.exports}__webpack_require__.ab=__dirname+"/";function startup(){return __webpack_require__(560)}return startup()}({60:function(t){t.exports=Object.freeze({Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,ZLIB_VERNUM:4736,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:Infinity,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1})},63:function(t,e,n){"use strict";const i=n(357);const r=n(614).EventEmitter;const s=n(203);const o=n(747);const l=n(827);const a=n(622);const u=n(577);const f=u.sync;const c=n(478);const h=Symbol("onEntry");const d=Symbol("checkFs");const v=Symbol("isReusable");const w=Symbol("makeFs");const p=Symbol("file");const m=Symbol("directory");const y=Symbol("link");const b=Symbol("symlink");const S=Symbol("hardlink");const N=Symbol("unsupported");const R=Symbol("unknown");const I=Symbol("checkPath");const C=Symbol("mkdir");const k=Symbol("onError");const O=Symbol("pending");const L=Symbol("pend");const A=Symbol("unpend");const D=Symbol("ended");const M=Symbol("maybeClose");const z=Symbol("skip");const U=Symbol("doChown");const B=Symbol("uid");const F=Symbol("gid");const W=n(417);const Z=(t,e)=>{if(process.platform!=="win32")return o.unlink(t,e);const n=t+".DELETE."+W.randomBytes(16).toString("hex");o.rename(t,n,t=>{if(t)return e(t);o.unlink(n,e)})};const P=t=>{if(process.platform!=="win32")return o.unlinkSync(t);const e=t+".DELETE."+W.randomBytes(16).toString("hex");o.renameSync(t,e);o.unlinkSync(e)};const T=(t,e,n)=>t===t>>>0?t:e===e>>>0?e:n;class Unpack extends s{constructor(t){if(!t)t={};t.ondone=(t=>{this[D]=true;this[M]()});super(t);this.transform=typeof t.transform==="function"?t.transform:null;this.writable=true;this.readable=false;this[O]=0;this[D]=false;this.dirCache=t.dirCache||new Map;if(typeof t.uid==="number"||typeof t.gid==="number"){if(typeof t.uid!=="number"||typeof t.gid!=="number")throw new TypeError("cannot set owner without number uid and gid");if(t.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=t.uid;this.gid=t.gid;this.setOwner=true}else{this.uid=null;this.gid=null;this.setOwner=false}if(t.preserveOwner===undefined&&typeof t.uid!=="number")this.preserveOwner=process.getuid&&process.getuid()===0;else this.preserveOwner=!!t.preserveOwner;this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null;this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null;this.forceChown=t.forceChown===true;this.win32=!!t.win32||process.platform==="win32";this.newer=!!t.newer;this.keep=!!t.keep;this.noMtime=!!t.noMtime;this.preservePaths=!!t.preservePaths;this.unlink=!!t.unlink;this.cwd=a.resolve(t.cwd||process.cwd());this.strip=+t.strip||0;this.processUmask=process.umask();this.umask=typeof t.umask==="number"?t.umask:this.processUmask;this.dmode=t.dmode||511&~this.umask;this.fmode=t.fmode||438&~this.umask;this.on("entry",t=>this[h](t))}[M](){if(this[D]&&this[O]===0){this.emit("prefinish");this.emit("finish");this.emit("end");this.emit("close")}}[I](t){if(this.strip){const e=t.path.split(/\/|\\/);if(e.length<this.strip)return false;t.path=e.slice(this.strip).join("/");if(t.type==="Link"){const e=t.linkpath.split(/\/|\\/);if(e.length>=this.strip)t.linkpath=e.slice(this.strip).join("/")}}if(!this.preservePaths){const e=t.path;if(e.match(/(^|\/|\\)\.\.(\\|\/|$)/)){this.warn("path contains '..'",e);return false}if(a.win32.isAbsolute(e)){const n=a.win32.parse(e);this.warn("stripping "+n.root+" from absolute path",e);t.path=e.substr(n.root.length)}}if(this.win32){const e=a.win32.parse(t.path);t.path=e.root===""?c.encode(t.path):e.root+c.encode(t.path.substr(e.root.length))}if(a.isAbsolute(t.path))t.absolute=t.path;else t.absolute=a.resolve(this.cwd,t.path);return true}[h](t){if(!this[I](t))return t.resume();i.equal(typeof t.absolute,"string");switch(t.type){case"Directory":case"GNUDumpDir":if(t.mode)t.mode=t.mode|448;case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[d](t);case"CharacterDevice":case"BlockDevice":case"FIFO":return this[N](t)}}[k](t,e){if(t.name==="CwdError")this.emit("error",t);else{this.warn(t.message,t);this[A]();e.resume()}}[C](t,e,n){u(t,{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:e},n)}[U](t){return this.forceChown||this.preserveOwner&&(typeof t.uid==="number"&&t.uid!==this.processUid||typeof t.gid==="number"&&t.gid!==this.processGid)||(typeof this.uid==="number"&&this.uid!==this.processUid||typeof this.gid==="number"&&this.gid!==this.processGid)}[B](t){return T(this.uid,t.uid,this.processUid)}[F](t){return T(this.gid,t.gid,this.processGid)}[p](t){const e=t.mode&4095||this.fmode;const n=new l.WriteStream(t.absolute,{mode:e,autoClose:false});n.on("error",e=>this[k](e,t));let i=1;const r=e=>{if(e)return this[k](e,t);if(--i===0)o.close(n.fd,t=>this[A]())};n.on("finish",e=>{const s=t.absolute;const l=n.fd;if(t.mtime&&!this.noMtime){i++;const e=t.atime||new Date;const n=t.mtime;o.futimes(l,e,n,t=>t?o.utimes(s,e,n,e=>r(e&&t)):r())}if(this[U](t)){i++;const e=this[B](t);const n=this[F](t);o.fchown(l,e,n,t=>t?o.chown(s,e,n,e=>r(e&&t)):r())}r()});const s=this.transform?this.transform(t)||t:t;if(s!==t){s.on("error",e=>this[k](e,t));t.pipe(s)}s.pipe(n)}[m](t){const e=t.mode&4095||this.dmode;this[C](t.absolute,e,e=>{if(e)return this[k](e,t);let n=1;const i=e=>{if(--n===0){this[A]();t.resume()}};if(t.mtime&&!this.noMtime){n++;o.utimes(t.absolute,t.atime||new Date,t.mtime,i)}if(this[U](t)){n++;o.chown(t.absolute,this[B](t),this[F](t),i)}i()})}[N](t){this.warn("unsupported entry type: "+t.type,t);t.resume()}[b](t){this[y](t,t.linkpath,"symlink")}[S](t){this[y](t,a.resolve(this.cwd,t.linkpath),"link")}[L](){this[O]++}[A](){this[O]--;this[M]()}[z](t){this[A]();t.resume()}[v](t,e){return t.type==="File"&&!this.unlink&&e.isFile()&&e.nlink<=1&&process.platform!=="win32"}[d](t){this[L]();this[C](a.dirname(t.absolute),this.dmode,e=>{if(e)return this[k](e,t);o.lstat(t.absolute,(e,n)=>{if(n&&(this.keep||this.newer&&n.mtime>t.mtime))this[z](t);else if(e||this[v](t,n))this[w](null,t);else if(n.isDirectory()){if(t.type==="Directory"){if(!t.mode||(n.mode&4095)===t.mode)this[w](null,t);else o.chmod(t.absolute,t.mode,e=>this[w](e,t))}else o.rmdir(t.absolute,e=>this[w](e,t))}else Z(t.absolute,e=>this[w](e,t))})})}[w](t,e){if(t)return this[k](t,e);switch(e.type){case"File":case"OldFile":case"ContiguousFile":return this[p](e);case"Link":return this[S](e);case"SymbolicLink":return this[b](e);case"Directory":case"GNUDumpDir":return this[m](e)}}[y](t,e,n){o[n](e,t.absolute,e=>{if(e)return this[k](e,t);this[A]();t.resume()})}}class UnpackSync extends Unpack{constructor(t){super(t)}[d](t){const e=this[C](a.dirname(t.absolute),this.dmode);if(e)return this[k](e,t);try{const n=o.lstatSync(t.absolute);if(this.keep||this.newer&&n.mtime>t.mtime)return this[z](t);else if(this[v](t,n))return this[w](null,t);else{try{if(n.isDirectory()){if(t.type==="Directory"){if(t.mode&&(n.mode&4095)!==t.mode)o.chmodSync(t.absolute,t.mode)}else o.rmdirSync(t.absolute)}else P(t.absolute);return this[w](null,t)}catch(e){return this[k](e,t)}}}catch(e){return this[w](null,t)}}[p](t){const e=t.mode&4095||this.fmode;const n=e=>{try{o.closeSync(r)}catch(t){}if(e)this[k](e,t)};let i;let r;try{r=o.openSync(t.absolute,"w",e)}catch(t){return n(t)}const s=this.transform?this.transform(t)||t:t;if(s!==t){s.on("error",e=>this[k](e,t));t.pipe(s)}s.on("data",t=>{try{o.writeSync(r,t,0,t.length)}catch(t){n(t)}});s.on("end",e=>{let i=null;if(t.mtime&&!this.noMtime){const e=t.atime||new Date;const n=t.mtime;try{o.futimesSync(r,e,n)}catch(r){try{o.utimesSync(t.absolute,e,n)}catch(t){i=r}}}if(this[U](t)){const e=this[B](t);const n=this[F](t);try{o.fchownSync(r,e,n)}catch(r){try{o.chownSync(t.absolute,e,n)}catch(t){i=i||r}}}n(i)})}[m](t){const e=t.mode&4095||this.dmode;const n=this[C](t.absolute,e);if(n)return this[k](n,t);if(t.mtime&&!this.noMtime){try{o.utimesSync(t.absolute,t.atime||new Date,t.mtime)}catch(n){}}if(this[U](t)){try{o.chownSync(t.absolute,this[B](t),this[F](t))}catch(n){}}t.resume()}[C](t,e){try{return u.sync(t,{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:e})}catch(t){return t}}[y](t,e,n){try{o[n+"Sync"](e,t.absolute);t.resume()}catch(e){return this[k](e,t)}}}Unpack.Sync=UnpackSync;t.exports=Unpack},93:function(t,e,n){var i=n(413).Stream;t.exports=legacy;function legacy(t){return{ReadStream:ReadStream,WriteStream:WriteStream};function ReadStream(e,n){if(!(this instanceof ReadStream))return new ReadStream(e,n);i.call(this);var r=this;this.path=e;this.fd=null;this.readable=true;this.paused=false;this.flags="r";this.mode=438;this.bufferSize=64*1024;n=n||{};var s=Object.keys(n);for(var o=0,l=s.length;o<l;o++){var a=s[o];this[a]=n[a]}if(this.encoding)this.setEncoding(this.encoding);if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.end===undefined){this.end=Infinity}else if("number"!==typeof this.end){throw TypeError("end must be a Number")}if(this.start>this.end){throw new Error("start must be <= end")}this.pos=this.start}if(this.fd!==null){process.nextTick(function(){r._read()});return}t.open(this.path,this.flags,this.mode,function(t,e){if(t){r.emit("error",t);r.readable=false;return}r.fd=e;r.emit("open",e);r._read()})}function WriteStream(e,n){if(!(this instanceof WriteStream))return new WriteStream(e,n);i.call(this);this.path=e;this.fd=null;this.writable=true;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;n=n||{};var r=Object.keys(n);for(var s=0,o=r.length;s<o;s++){var l=r[s];this[l]=n[l]}if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.start<0){throw new Error("start must be >= zero")}this.pos=this.start}this.busy=false;this._queue=[];if(this.fd===null){this._open=t.open;this._queue.push([this._open,this.path,this.flags,this.mode,undefined]);this.flush()}}}},129:function(t){t.exports=require("child_process")},133:function(t,e,n){"use strict";const i=n(357);const r=n(293).Buffer;const s=n(761);const o=e.constants=n(60);const l=n(720);const a=r.concat;class ZlibError extends Error{constructor(t,e){super("zlib: "+t);this.errno=e;this.code=u.get(e)}get name(){return"ZlibError"}}const u=new Map([[o.Z_OK,"Z_OK"],[o.Z_STREAM_END,"Z_STREAM_END"],[o.Z_NEED_DICT,"Z_NEED_DICT"],[o.Z_ERRNO,"Z_ERRNO"],[o.Z_STREAM_ERROR,"Z_STREAM_ERROR"],[o.Z_DATA_ERROR,"Z_DATA_ERROR"],[o.Z_MEM_ERROR,"Z_MEM_ERROR"],[o.Z_BUF_ERROR,"Z_BUF_ERROR"],[o.Z_VERSION_ERROR,"Z_VERSION_ERROR"]]);const f=new Set([o.Z_NO_FLUSH,o.Z_PARTIAL_FLUSH,o.Z_SYNC_FLUSH,o.Z_FULL_FLUSH,o.Z_FINISH,o.Z_BLOCK]);const c=new Set([o.Z_FILTERED,o.Z_HUFFMAN_ONLY,o.Z_RLE,o.Z_FIXED,o.Z_DEFAULT_STRATEGY]);const h=Symbol("opts");const d=Symbol("flushFlag");const v=Symbol("finishFlush");const w=Symbol("handle");const p=Symbol("onError");const m=Symbol("level");const y=Symbol("strategy");const b=Symbol("ended");class Zlib extends l{constructor(t,e){super(t);this[b]=false;this[h]=t=t||{};if(t.flush&&!f.has(t.flush)){throw new TypeError("Invalid flush flag: "+t.flush)}if(t.finishFlush&&!f.has(t.finishFlush)){throw new TypeError("Invalid flush flag: "+t.finishFlush)}this[d]=t.flush||o.Z_NO_FLUSH;this[v]=typeof t.finishFlush!=="undefined"?t.finishFlush:o.Z_FINISH;if(t.chunkSize){if(t.chunkSize<o.Z_MIN_CHUNK){throw new RangeError("Invalid chunk size: "+t.chunkSize)}}if(t.windowBits){if(t.windowBits<o.Z_MIN_WINDOWBITS||t.windowBits>o.Z_MAX_WINDOWBITS){throw new RangeError("Invalid windowBits: "+t.windowBits)}}if(t.level){if(t.level<o.Z_MIN_LEVEL||t.level>o.Z_MAX_LEVEL){throw new RangeError("Invalid compression level: "+t.level)}}if(t.memLevel){if(t.memLevel<o.Z_MIN_MEMLEVEL||t.memLevel>o.Z_MAX_MEMLEVEL){throw new RangeError("Invalid memLevel: "+t.memLevel)}}if(t.strategy&&!c.has(t.strategy))throw new TypeError("Invalid strategy: "+t.strategy);if(t.dictionary){if(!(t.dictionary instanceof r)){throw new TypeError("Invalid dictionary: it should be a Buffer instance")}}this[w]=new s[e](t);this[p]=(t=>{this.close();const e=new ZlibError(t.message,t.errno);this.emit("error",e)});this[w].on("error",this[p]);const n=typeof t.level==="number"?t.level:o.Z_DEFAULT_COMPRESSION;var i=typeof t.strategy==="number"?t.strategy:o.Z_DEFAULT_STRATEGY;this[m]=n;this[y]=i;this.once("end",this.close)}close(){if(this[w]){this[w].close();this[w]=null;this.emit("close")}}params(t,e){if(!this[w])throw new Error("cannot switch params when binding is closed");if(!this[w].params)throw new Error("not supported in this implementation");if(t<o.Z_MIN_LEVEL||t>o.Z_MAX_LEVEL){throw new RangeError("Invalid compression level: "+t)}if(!c.has(e))throw new TypeError("Invalid strategy: "+e);if(this[m]!==t||this[y]!==e){this.flush(o.Z_SYNC_FLUSH);i(this[w],"zlib binding closed");const n=this[w].flush;this[w].flush=((t,e)=>{this[w].flush=n;this.flush(t);e()});this[w].params(t,e);if(this[w]){this[m]=t;this[y]=e}}}reset(){i(this[w],"zlib binding closed");return this[w].reset()}flush(t){if(t===undefined)t=o.Z_FULL_FLUSH;if(this.ended)return;const e=this[d];this[d]=t;this.write(r.alloc(0));this[d]=e}end(t,e,n){if(t)this.write(t,e);this.flush(this[v]);this[b]=true;return super.end(null,null,n)}get ended(){return this[b]}write(t,e,n){if(typeof e==="function")n=e,e="utf8";if(typeof t==="string")t=r.from(t,e);i(this[w],"zlib binding closed");const s=this[w]._handle;const o=s.close;s.close=(()=>{});const l=this[w].close;this[w].close=(()=>{});r.concat=(t=>t);let u;try{u=this[w]._processChunk(t,this[d])}catch(t){this[p](t)}finally{r.concat=a;if(this[w]){this[w]._handle=s;s.close=o;this[w].close=l;this[w].removeAllListeners("error")}}let f;if(u){if(Array.isArray(u)&&u.length>0){f=super.write(r.from(u[0]));for(let t=1;t<u.length;t++){f=super.write(u[t])}}else{f=super.write(r.from(u))}}if(n)n();return f}}class Deflate extends Zlib{constructor(t){super(t,"Deflate")}}class Inflate extends Zlib{constructor(t){super(t,"Inflate")}}class Gzip extends Zlib{constructor(t){super(t,"Gzip")}}class Gunzip extends Zlib{constructor(t){super(t,"Gunzip")}}class DeflateRaw extends Zlib{constructor(t){super(t,"DeflateRaw")}}class InflateRaw extends Zlib{constructor(t){super(t,"InflateRaw")}}class Unzip extends Zlib{constructor(t){super(t,"Unzip")}}e.Deflate=Deflate;e.Inflate=Inflate;e.Gzip=Gzip;e.Gunzip=Gunzip;e.DeflateRaw=DeflateRaw;e.InflateRaw=InflateRaw;e.Unzip=Unzip},149:function(t,e,n){var i=n(293);var r=i.Buffer;function copyProps(t,e){for(var n in t){e[n]=t[n]}}if(r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow){t.exports=i}else{copyProps(i,e);e.Buffer=SafeBuffer}function SafeBuffer(t,e,n){return r(t,e,n)}SafeBuffer.prototype=Object.create(r.prototype);copyProps(r,SafeBuffer);SafeBuffer.from=function(t,e,n){if(typeof t==="number"){throw new TypeError("Argument must not be a number")}return r(t,e,n)};SafeBuffer.alloc=function(t,e,n){if(typeof t!=="number"){throw new TypeError("Argument must be a number")}var i=r(t);if(e!==undefined){if(typeof n==="string"){i.fill(e,n)}else{i.fill(e)}}else{i.fill(0)}return i};SafeBuffer.allocUnsafe=function(t){if(typeof t!=="number"){throw new TypeError("Argument must be a number")}return r(t)};SafeBuffer.allocUnsafeSlow=function(t){if(typeof t!=="number"){throw new TypeError("Argument must be a number")}return i.SlowBuffer(t)}},159:function(t,e,n){"use strict";const i=n(891);const r=n(726);const s=n(747);const o=n(827);const l=n(381);const a=n(622);const u=t.exports=((t,e,n)=>{if(typeof e==="function")n=e;if(Array.isArray(t))e=t,t={};if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);const r=i(t);if(r.sync&&typeof n==="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n==="function")throw new TypeError("callback only supported with file option");return r.file&&r.sync?f(r,e):r.file?c(r,e,n):r.sync?v(r,e):w(r,e)});const f=(t,e)=>{const n=new r.Sync(t);const i=new o.WriteStreamSync(t.file,{mode:t.mode||438});n.pipe(i);h(n,e)};const c=(t,e,n)=>{const i=new r(t);const s=new o.WriteStream(t.file,{mode:t.mode||438});i.pipe(s);const l=new Promise((t,e)=>{s.on("error",e);s.on("close",t);i.on("error",e)});d(i,e);return n?l.then(n,n):l};const h=(t,e)=>{e.forEach(e=>{if(e.charAt(0)==="@")l({file:a.resolve(t.cwd,e.substr(1)),sync:true,noResume:true,onentry:e=>t.add(e)});else t.add(e)});t.end()};const d=(t,e)=>{while(e.length){const n=e.shift();if(n.charAt(0)==="@")return l({file:a.resolve(t.cwd,n.substr(1)),noResume:true,onentry:e=>t.add(e)}).then(n=>d(t,e));else t.add(n)}t.end()};const v=(t,e)=>{const n=new r.Sync(t);h(n,e);return n};const w=(t,e)=>{const n=new r(t);d(n,e);return n}},197:function(t,e,n){"use strict";let i=Buffer;if(!i.alloc){i=n(149).Buffer}t.exports=i},203:function(t,e,n){"use strict";const i=n(796);const r=n(622);const s=n(232);const o=n(614);const l=n(612);const a=1024*1024;const u=n(662);const f=n(582);const c=n(133);const h=n(197);const d=h.from([31,139]);const v=Symbol("state");const w=Symbol("writeEntry");const p=Symbol("readEntry");const m=Symbol("nextEntry");const y=Symbol("processEntry");const b=Symbol("extendedHeader");const S=Symbol("globalExtendedHeader");const N=Symbol("meta");const R=Symbol("emitMeta");const I=Symbol("buffer");const C=Symbol("queue");const k=Symbol("ended");const O=Symbol("emittedEnd");const L=Symbol("emit");const A=Symbol("unzip");const D=Symbol("consumeChunk");const M=Symbol("consumeChunkSub");const z=Symbol("consumeBody");const U=Symbol("consumeMeta");const B=Symbol("consumeHeader");const F=Symbol("consuming");const W=Symbol("bufferConcat");const Z=Symbol("maybeEnd");const P=Symbol("writing");const T=Symbol("aborted");const G=Symbol("onDone");const Y=t=>true;t.exports=i(class Parser extends o{constructor(t){t=t||{};super(t);if(t.ondone)this.on(G,t.ondone);else this.on(G,t=>{this.emit("prefinish");this.emit("finish");this.emit("end");this.emit("close")});this.strict=!!t.strict;this.maxMetaEntrySize=t.maxMetaEntrySize||a;this.filter=typeof t.filter==="function"?t.filter:Y;this.writable=true;this.readable=false;this[C]=new l;this[I]=null;this[p]=null;this[w]=null;this[v]="begin";this[N]="";this[b]=null;this[S]=null;this[k]=false;this[A]=null;this[T]=false;if(typeof t.onwarn==="function")this.on("warn",t.onwarn);if(typeof t.onentry==="function")this.on("entry",t.onentry)}[B](t,e){const n=new s(t,e,this[b],this[S]);if(n.nullBlock)this[L]("nullBlock");else if(!n.cksumValid)this.warn("invalid entry",n);else if(!n.path)this.warn("invalid: path is required",n);else{const t=n.type;if(/^(Symbolic)?Link$/.test(t)&&!n.linkpath)this.warn("invalid: linkpath required",n);else if(!/^(Symbolic)?Link$/.test(t)&&n.linkpath)this.warn("invalid: linkpath forbidden",n);else{const t=this[w]=new u(n,this[b],this[S]);if(t.meta){if(t.size>this.maxMetaEntrySize){t.ignore=true;this[L]("ignoredEntry",t);this[v]="ignore"}else if(t.size>0){this[N]="";t.on("data",t=>this[N]+=t);this[v]="meta"}}else{this[b]=null;t.ignore=t.ignore||!this.filter(t.path,t);if(t.ignore){this[L]("ignoredEntry",t);this[v]=t.remain?"ignore":"begin"}else{if(t.remain)this[v]="body";else{this[v]="begin";t.end()}if(!this[p]){this[C].push(t);this[m]()}else this[C].push(t)}}}}}[y](t){let e=true;if(!t){this[p]=null;e=false}else if(Array.isArray(t))this.emit.apply(this,t);else{this[p]=t;this.emit("entry",t);if(!t.emittedEnd){t.on("end",t=>this[m]());e=false}}return e}[m](){do{}while(this[y](this[C].shift()));if(!this[C].length){const t=this[p];const e=!t||t.flowing||t.size===t.remain;if(e){if(!this[P])this.emit("drain")}else t.once("drain",t=>this.emit("drain"))}}[z](t,e){const n=this[w];const i=n.blockRemain;const r=i>=t.length&&e===0?t:t.slice(e,e+i);n.write(r);if(!n.blockRemain){this[v]="begin";this[w]=null;n.end()}return r.length}[U](t,e){const n=this[w];const i=this[z](t,e);if(!this[w])this[R](n);return i}[L](t,e,n){if(!this[C].length&&!this[p])this.emit(t,e,n);else this[C].push([t,e,n])}[R](t){this[L]("meta",this[N]);switch(t.type){case"ExtendedHeader":case"OldExtendedHeader":this[b]=f.parse(this[N],this[b],false);break;case"GlobalExtendedHeader":this[S]=f.parse(this[N],this[S],true);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[b]=this[b]||Object.create(null);this[b].path=this[N].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[b]=this[b]||Object.create(null);this[b].linkpath=this[N].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+t.type)}}abort(t,e){this[T]=true;this.warn(t,e);this.emit("abort",e);this.emit("error",e)}write(t){if(this[T])return;if(this[A]===null&&t){if(this[I]){t=h.concat([this[I],t]);this[I]=null}if(t.length<d.length){this[I]=t;return true}for(let e=0;this[A]===null&&e<d.length;e++){if(t[e]!==d[e])this[A]=false}if(this[A]===null){const e=this[k];this[k]=false;this[A]=new c.Unzip;this[A].on("data",t=>this[D](t));this[A].on("error",t=>this.abort(t.message,t));this[A].on("end",t=>{this[k]=true;this[D]()});this[P]=true;const n=this[A][e?"end":"write"](t);this[P]=false;return n}}this[P]=true;if(this[A])this[A].write(t);else this[D](t);this[P]=false;const e=this[C].length?false:this[p]?this[p].flowing:true;if(!e&&!this[C].length)this[p].once("drain",t=>this.emit("drain"));return e}[W](t){if(t&&!this[T])this[I]=this[I]?h.concat([this[I],t]):t}[Z](){if(this[k]&&!this[O]&&!this[T]&&!this[F]){this[O]=true;const t=this[w];if(t&&t.blockRemain){const e=this[I]?this[I].length:0;this.warn("Truncated input (needed "+t.blockRemain+" more bytes, only "+e+" available)",t);if(this[I])t.write(this[I]);t.end()}this[L](G)}}[D](t){if(this[F]){this[W](t)}else if(!t&&!this[I]){this[Z]()}else{this[F]=true;if(this[I]){this[W](t);const e=this[I];this[I]=null;this[M](e)}else{this[M](t)}while(this[I]&&this[I].length>=512&&!this[T]){const t=this[I];this[I]=null;this[M](t)}this[F]=false}if(!this[I]||this[k])this[Z]()}[M](t){let e=0;let n=t.length;while(e+512<=n&&!this[T]){switch(this[v]){case"begin":this[B](t,e);e+=512;break;case"ignore":case"body":e+=this[z](t,e);break;case"meta":e+=this[U](t,e);break;default:throw new Error("invalid state: "+this[v])}}if(e<n){if(this[I])this[I]=h.concat([t.slice(e),this[I]]);else this[I]=t.slice(e)}}end(t){if(!this[T]){if(this[A])this[A].end(t);else{this[k]=true;this.write(t)}}}})},211:function(t){t.exports=require("https")},232:function(t,e,n){"use strict";const i=n(197);const r=n(554);const s=n(622).posix;const o=n(858);const l=Symbol("slurp");const a=Symbol("type");class Header{constructor(t,e,n,r){this.cksumValid=false;this.needPax=false;this.nullBlock=false;this.block=null;this.path=null;this.mode=null;this.uid=null;this.gid=null;this.size=null;this.mtime=null;this.cksum=null;this[a]="0";this.linkpath=null;this.uname=null;this.gname=null;this.devmaj=0;this.devmin=0;this.atime=null;this.ctime=null;if(i.isBuffer(t))this.decode(t,e||0,n,r);else if(t)this.set(t)}decode(t,e,n,i){if(!e)e=0;if(!t||!(t.length>=e+512))throw new Error("need 512 bytes for header");this.path=f(t,e,100);this.mode=d(t,e+100,8);this.uid=d(t,e+108,8);this.gid=d(t,e+116,8);this.size=d(t,e+124,12);this.mtime=c(t,e+136,12);this.cksum=d(t,e+148,12);this[l](n);this[l](i,true);this[a]=f(t,e+156,1);if(this[a]==="")this[a]="0";if(this[a]==="0"&&this.path.substr(-1)==="/")this[a]="5";if(this[a]==="5")this.size=0;this.linkpath=f(t,e+157,100);if(t.slice(e+257,e+265).toString()==="ustar\x0000"){this.uname=f(t,e+265,32);this.gname=f(t,e+297,32);this.devmaj=d(t,e+329,8);this.devmin=d(t,e+337,8);if(t[e+475]!==0){const n=f(t,e+345,155);this.path=n+"/"+this.path}else{const n=f(t,e+345,130);if(n)this.path=n+"/"+this.path;this.atime=c(t,e+476,12);this.ctime=c(t,e+488,12)}}let r=8*32;for(let n=e;n<e+148;n++){r+=t[n]}for(let n=e+156;n<e+512;n++){r+=t[n]}this.cksumValid=r===this.cksum;if(this.cksum===null&&r===8*32)this.nullBlock=true}[l](t,e){for(let n in t){if(t[n]!==null&&t[n]!==undefined&&!(e&&n==="path"))this[n]=t[n]}}encode(t,e){if(!t){t=this.block=i.alloc(512);e=0}if(!e)e=0;if(!(t.length>=e+512))throw new Error("need 512 bytes for header");const n=this.ctime||this.atime?130:155;const r=u(this.path||"",n);const s=r[0];const o=r[1];this.needPax=r[2];this.needPax=I(t,e,100,s)||this.needPax;this.needPax=m(t,e+100,8,this.mode)||this.needPax;this.needPax=m(t,e+108,8,this.uid)||this.needPax;this.needPax=m(t,e+116,8,this.gid)||this.needPax;this.needPax=m(t,e+124,12,this.size)||this.needPax;this.needPax=N(t,e+136,12,this.mtime)||this.needPax;t[e+156]=this[a].charCodeAt(0);this.needPax=I(t,e+157,100,this.linkpath)||this.needPax;t.write("ustar\x0000",e+257,8);this.needPax=I(t,e+265,32,this.uname)||this.needPax;this.needPax=I(t,e+297,32,this.gname)||this.needPax;this.needPax=m(t,e+329,8,this.devmaj)||this.needPax;this.needPax=m(t,e+337,8,this.devmin)||this.needPax;this.needPax=I(t,e+345,n,o)||this.needPax;if(t[e+475]!==0)this.needPax=I(t,e+345,155,o)||this.needPax;else{this.needPax=I(t,e+345,130,o)||this.needPax;this.needPax=N(t,e+476,12,this.atime)||this.needPax;this.needPax=N(t,e+488,12,this.ctime)||this.needPax}let l=8*32;for(let n=e;n<e+148;n++){l+=t[n]}for(let n=e+156;n<e+512;n++){l+=t[n]}this.cksum=l;m(t,e+148,8,this.cksum);this.cksumValid=true;return this.needPax}set(t){for(let e in t){if(t[e]!==null&&t[e]!==undefined)this[e]=t[e]}}get type(){return r.name.get(this[a])||this[a]}get typeKey(){return this[a]}set type(t){if(r.code.has(t))this[a]=r.code.get(t);else this[a]=t}}const u=(t,e)=>{const n=100;let r=t;let o="";let l;const a=s.parse(t).root||".";if(i.byteLength(r)<n)l=[r,o,false];else{o=s.dirname(r);r=s.basename(r);do{if(i.byteLength(r)<=n&&i.byteLength(o)<=e)l=[r,o,false];else if(i.byteLength(r)>n&&i.byteLength(o)<=e)l=[r.substr(0,n-1),o,true];else{r=s.join(s.basename(o),r);o=s.dirname(o)}}while(o!==a&&!l);if(!l)l=[t.substr(0,n-1),"",true]}return l};const f=(t,e,n)=>t.slice(e,e+n).toString("utf8").replace(/\0.*/,"");const c=(t,e,n)=>h(d(t,e,n));const h=t=>t===null?null:new Date(t*1e3);const d=(t,e,n)=>t[e]&128?o.parse(t.slice(e,e+n)):w(t,e,n);const v=t=>isNaN(t)?null:t;const w=(t,e,n)=>v(parseInt(t.slice(e,e+n).toString("utf8").replace(/\0.*$/,"").trim(),8));const p={12:8589934591,8:2097151};const m=(t,e,n,i)=>i===null?false:i>p[n]||i<0?(o.encode(i,t.slice(e,e+n)),true):(y(t,e,n,i),false);const y=(t,e,n,i)=>t.write(b(i,n),e,n,"ascii");const b=(t,e)=>S(Math.floor(t).toString(8),e);const S=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0";const N=(t,e,n,i)=>i===null?false:m(t,e,n,i.getTime()/1e3);const R=new Array(156).join("\0");const I=(t,e,n,r)=>r===null?false:(t.write(r+R,e,n,"utf8"),r.length!==i.byteLength(r)||r.length>n);t.exports=Header},250:function(t,e,n){var i=n(619);var r=process.cwd;var s=null;var o=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){if(!s)s=r.call(process);return s};try{process.cwd()}catch(t){}var l=process.chdir;process.chdir=function(t){s=null;l.call(process,t)};t.exports=patch;function patch(t){if(i.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)){patchLchmod(t)}if(!t.lutimes){patchLutimes(t)}t.chown=chownFix(t.chown);t.fchown=chownFix(t.fchown);t.lchown=chownFix(t.lchown);t.chmod=chmodFix(t.chmod);t.fchmod=chmodFix(t.fchmod);t.lchmod=chmodFix(t.lchmod);t.chownSync=chownFixSync(t.chownSync);t.fchownSync=chownFixSync(t.fchownSync);t.lchownSync=chownFixSync(t.lchownSync);t.chmodSync=chmodFixSync(t.chmodSync);t.fchmodSync=chmodFixSync(t.fchmodSync);t.lchmodSync=chmodFixSync(t.lchmodSync);t.stat=statFix(t.stat);t.fstat=statFix(t.fstat);t.lstat=statFix(t.lstat);t.statSync=statFixSync(t.statSync);t.fstatSync=statFixSync(t.fstatSync);t.lstatSync=statFixSync(t.lstatSync);if(!t.lchmod){t.lchmod=function(t,e,n){if(n)process.nextTick(n)};t.lchmodSync=function(){}}if(!t.lchown){t.lchown=function(t,e,n,i){if(i)process.nextTick(i)};t.lchownSync=function(){}}if(o==="win32"){t.rename=function(e){return function(n,i,r){var s=Date.now();var o=0;e(n,i,function CB(l){if(l&&(l.code==="EACCES"||l.code==="EPERM")&&Date.now()-s<6e4){setTimeout(function(){t.stat(i,function(t,s){if(t&&t.code==="ENOENT")e(n,i,CB);else r(l)})},o);if(o<100)o+=10;return}if(r)r(l)})}}(t.rename)}t.read=function(e){return function(n,i,r,s,o,l){var a;if(l&&typeof l==="function"){var u=0;a=function(f,c,h){if(f&&f.code==="EAGAIN"&&u<10){u++;return e.call(t,n,i,r,s,o,a)}l.apply(this,arguments)}}return e.call(t,n,i,r,s,o,a)}}(t.read);t.readSync=function(e){return function(n,i,r,s,o){var l=0;while(true){try{return e.call(t,n,i,r,s,o)}catch(t){if(t.code==="EAGAIN"&&l<10){l++;continue}throw t}}}}(t.readSync);function patchLchmod(t){t.lchmod=function(e,n,r){t.open(e,i.O_WRONLY|i.O_SYMLINK,n,function(e,i){if(e){if(r)r(e);return}t.fchmod(i,n,function(e){t.close(i,function(t){if(r)r(e||t)})})})};t.lchmodSync=function(e,n){var r=t.openSync(e,i.O_WRONLY|i.O_SYMLINK,n);var s=true;var o;try{o=t.fchmodSync(r,n);s=false}finally{if(s){try{t.closeSync(r)}catch(t){}}else{t.closeSync(r)}}return o}}function patchLutimes(t){if(i.hasOwnProperty("O_SYMLINK")){t.lutimes=function(e,n,r,s){t.open(e,i.O_SYMLINK,function(e,i){if(e){if(s)s(e);return}t.futimes(i,n,r,function(e){t.close(i,function(t){if(s)s(e||t)})})})};t.lutimesSync=function(e,n,r){var s=t.openSync(e,i.O_SYMLINK);var o;var l=true;try{o=t.futimesSync(s,n,r);l=false}finally{if(l){try{t.closeSync(s)}catch(t){}}else{t.closeSync(s)}}return o}}else{t.lutimes=function(t,e,n,i){if(i)process.nextTick(i)};t.lutimesSync=function(){}}}function chmodFix(e){if(!e)return e;return function(n,i,r){return e.call(t,n,i,function(t){if(chownErOk(t))t=null;if(r)r.apply(this,arguments)})}}function chmodFixSync(e){if(!e)return e;return function(n,i){try{return e.call(t,n,i)}catch(t){if(!chownErOk(t))throw t}}}function chownFix(e){if(!e)return e;return function(n,i,r,s){return e.call(t,n,i,r,function(t){if(chownErOk(t))t=null;if(s)s.apply(this,arguments)})}}function chownFixSync(e){if(!e)return e;return function(n,i,r){try{return e.call(t,n,i,r)}catch(t){if(!chownErOk(t))throw t}}}function statFix(e){if(!e)return e;return function(n,i){return e.call(t,n,function(t,e){if(!e)return i.apply(this,arguments);if(e.uid<0)e.uid+=4294967296;if(e.gid<0)e.gid+=4294967296;if(i)i.apply(this,arguments)})}}function statFixSync(e){if(!e)return e;return function(n){var i=e.call(t,n);if(i.uid<0)i.uid+=4294967296;if(i.gid<0)i.gid+=4294967296;return i}}function chownErOk(t){if(!t)return true;if(t.code==="ENOSYS")return true;var e=!process.getuid||process.getuid()!==0;if(e){if(t.code==="EINVAL"||t.code==="EPERM")return true}return false}}},293:function(t){t.exports=require("buffer")},303:function(t,e,n){"use strict";const i=n(197);const r=n(720);const s=n(582);const o=n(232);const l=n(662);const a=n(747);const u=n(622);const f=n(554);const c=16*1024*1024;const h=Symbol("process");const d=Symbol("file");const v=Symbol("directory");const w=Symbol("symlink");const p=Symbol("hardlink");const m=Symbol("header");const y=Symbol("read");const b=Symbol("lstat");const S=Symbol("onlstat");const N=Symbol("onread");const R=Symbol("onreadlink");const I=Symbol("openfile");const C=Symbol("onopenfile");const k=Symbol("close");const O=Symbol("mode");const L=n(796);const A=n(478);const D=n(904);const M=L(class WriteEntry extends r{constructor(t,e){e=e||{};super(e);if(typeof t!=="string")throw new TypeError("path is required");this.path=t;this.portable=!!e.portable;this.myuid=process.getuid&&process.getuid();this.myuser=process.env.USER||"";this.maxReadSize=e.maxReadSize||c;this.linkCache=e.linkCache||new Map;this.statCache=e.statCache||new Map;this.preservePaths=!!e.preservePaths;this.cwd=e.cwd||process.cwd();this.strict=!!e.strict;this.noPax=!!e.noPax;this.noMtime=!!e.noMtime;this.mtime=e.mtime||null;if(typeof e.onwarn==="function")this.on("warn",e.onwarn);if(!this.preservePaths&&u.win32.isAbsolute(t)){const e=u.win32.parse(t);this.warn("stripping "+e.root+" from absolute path",t);this.path=t.substr(e.root.length)}this.win32=!!e.win32||process.platform==="win32";if(this.win32){this.path=A.decode(this.path.replace(/\\/g,"/"));t=t.replace(/\\/g,"/")}this.absolute=e.absolute||u.resolve(this.cwd,t);if(this.path==="")this.path="./";if(this.statCache.has(this.absolute))this[S](this.statCache.get(this.absolute));else this[b]()}[b](){a.lstat(this.absolute,(t,e)=>{if(t)return this.emit("error",t);this[S](e)})}[S](t){this.statCache.set(this.absolute,t);this.stat=t;if(!t.isFile())t.size=0;this.type=U(t);this.emit("stat",t);this[h]()}[h](){switch(this.type){case"File":return this[d]();case"Directory":return this[v]();case"SymbolicLink":return this[w]();default:return this.end()}}[O](t){return D(t,this.type==="Directory")}[m](){if(this.type==="Directory"&&this.portable)this.noMtime=true;this.header=new o({path:this.path,linkpath:this.linkpath,mode:this[O](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime});if(this.header.encode()&&!this.noPax)this.write(new s({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this.path,linkpath:this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode());this.write(this.header.block)}[v](){if(this.path.substr(-1)!=="/")this.path+="/";this.stat.size=0;this[m]();this.end()}[w](){a.readlink(this.absolute,(t,e)=>{if(t)return this.emit("error",t);this[R](e)})}[R](t){this.linkpath=t;this[m]();this.end()}[p](t){this.type="Link";this.linkpath=u.relative(this.cwd,t);this.stat.size=0;this[m]();this.end()}[d](){if(this.stat.nlink>1){const t=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(t)){const e=this.linkCache.get(t);if(e.indexOf(this.cwd)===0)return this[p](e)}this.linkCache.set(t,this.absolute)}this[m]();if(this.stat.size===0)return this.end();this[I]()}[I](){a.open(this.absolute,"r",(t,e)=>{if(t)return this.emit("error",t);this[C](e)})}[C](t){const e=512*Math.ceil(this.stat.size/512);const n=Math.min(e,this.maxReadSize);const r=i.allocUnsafe(n);this[y](t,r,0,r.length,0,this.stat.size,e)}[y](t,e,n,i,r,s,o){a.read(t,e,n,i,r,(l,a)=>{if(l)return this[k](t,t=>this.emit("error",l));this[N](t,e,n,i,r,s,o,a)})}[k](t,e){a.close(t,e)}[N](t,e,n,r,s,o,l,a){if(a<=0&&o>0){const e=new Error("encountered unexpected EOF");e.path=this.absolute;e.syscall="read";e.code="EOF";this[k](t);return this.emit("error",e)}if(a>o){const e=new Error("did not encounter expected EOF");e.path=this.absolute;e.syscall="read";e.code="EOF";this[k](t);return this.emit("error",e)}if(a===o){for(let t=a;t<r&&a<l;t++){e[t+n]=0;a++;o++}}const u=n===0&&a===e.length?e:e.slice(n,n+a);o-=a;l-=a;s+=a;n+=a;this.write(u);if(!o){if(l)this.write(i.alloc(l));this.end();this[k](t,t=>t);return}if(n>=r){e=i.allocUnsafe(r);n=0}r=e.length-n;this[y](t,e,n,r,s,o,l)}});class WriteEntrySync extends M{constructor(t,e){super(t,e)}[b](){this[S](a.lstatSync(this.absolute))}[w](){this[R](a.readlinkSync(this.absolute))}[I](){this[C](a.openSync(this.absolute,"r"))}[y](t,e,n,i,r,s,o){let l=true;try{const u=a.readSync(t,e,n,i,r);this[N](t,e,n,i,r,s,o,u);l=false}finally{if(l)try{this[k](t)}catch(t){}}}[k](t){a.closeSync(t)}}const z=L(class WriteEntryTar extends r{constructor(t,e){e=e||{};super(e);this.preservePaths=!!e.preservePaths;this.portable=!!e.portable;this.strict=!!e.strict;this.noPax=!!e.noPax;this.noMtime=!!e.noMtime;this.readEntry=t;this.type=t.type;if(this.type==="Directory"&&this.portable)this.noMtime=true;this.path=t.path;this.mode=this[O](t.mode);this.uid=this.portable?null:t.uid;this.gid=this.portable?null:t.gid;this.uname=this.portable?null:t.uname;this.gname=this.portable?null:t.gname;this.size=t.size;this.mtime=this.noMtime?null:e.mtime||t.mtime;this.atime=this.portable?null:t.atime;this.ctime=this.portable?null:t.ctime;this.linkpath=t.linkpath;if(typeof e.onwarn==="function")this.on("warn",e.onwarn);if(u.isAbsolute(this.path)&&!this.preservePaths){const t=u.parse(this.path);this.warn("stripping "+t.root+" from absolute path",this.path);this.path=this.path.substr(t.root.length)}this.remain=t.size;this.blockRemain=t.startBlockSize;this.header=new o({path:this.path,linkpath:this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime});if(this.header.encode()&&!this.noPax)super.write(new s({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this.path,linkpath:this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode());super.write(this.header.block);t.pipe(this)}[O](t){return D(t,this.type==="Directory")}write(t){const e=t.length;if(e>this.blockRemain)throw new Error("writing more to entry than is appropriate");this.blockRemain-=e;return super.write(t)}end(){if(this.blockRemain)this.write(i.alloc(this.blockRemain));return super.end()}});M.Sync=WriteEntrySync;M.Tar=z;const U=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";t.exports=M},304:function(t){t.exports=require("string_decoder")},324:function(t,e,n){var i=n(747);var r=n(669);var s=n(413);var o=s.Readable;var l=s.Writable;var a=s.PassThrough;var u=n(965);var f=n(614).EventEmitter;e.createFromBuffer=createFromBuffer;e.createFromFd=createFromFd;e.BufferSlicer=BufferSlicer;e.FdSlicer=FdSlicer;r.inherits(FdSlicer,f);function FdSlicer(t,e){e=e||{};f.call(this);this.fd=t;this.pend=new u;this.pend.max=1;this.refCount=0;this.autoClose=!!e.autoClose}FdSlicer.prototype.read=function(t,e,n,r,s){var o=this;o.pend.go(function(l){i.read(o.fd,t,e,n,r,function(t,e,n){l();s(t,e,n)})})};FdSlicer.prototype.write=function(t,e,n,r,s){var o=this;o.pend.go(function(l){i.write(o.fd,t,e,n,r,function(t,e,n){l();s(t,e,n)})})};FdSlicer.prototype.createReadStream=function(t){return new ReadStream(this,t)};FdSlicer.prototype.createWriteStream=function(t){return new WriteStream(this,t)};FdSlicer.prototype.ref=function(){this.refCount+=1};FdSlicer.prototype.unref=function(){var t=this;t.refCount-=1;if(t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");if(t.autoClose){i.close(t.fd,onCloseDone)}function onCloseDone(e){if(e){t.emit("error",e)}else{t.emit("close")}}};r.inherits(ReadStream,o);function ReadStream(t,e){e=e||{};o.call(this,e);this.context=t;this.context.ref();this.start=e.start||0;this.endOffset=e.end;this.pos=this.start;this.destroyed=false}ReadStream.prototype._read=function(t){var e=this;if(e.destroyed)return;var n=Math.min(e._readableState.highWaterMark,t);if(e.endOffset!=null){n=Math.min(n,e.endOffset-e.pos)}if(n<=0){e.destroyed=true;e.push(null);e.context.unref();return}e.context.pend.go(function(t){if(e.destroyed)return t();var r=new Buffer(n);i.read(e.context.fd,r,0,n,e.pos,function(n,i){if(n){e.destroy(n)}else if(i===0){e.destroyed=true;e.push(null);e.context.unref()}else{e.pos+=i;e.push(r.slice(0,i))}t()})})};ReadStream.prototype.destroy=function(t){if(this.destroyed)return;t=t||new Error("stream destroyed");this.destroyed=true;this.emit("error",t);this.context.unref()};r.inherits(WriteStream,l);function WriteStream(t,e){e=e||{};l.call(this,e);this.context=t;this.context.ref();this.start=e.start||0;this.endOffset=e.end==null?Infinity:+e.end;this.bytesWritten=0;this.pos=this.start;this.destroyed=false;this.on("finish",this.destroy.bind(this))}WriteStream.prototype._write=function(t,e,n){var r=this;if(r.destroyed)return;if(r.pos+t.length>r.endOffset){var s=new Error("maximum file length exceeded");s.code="ETOOBIG";r.destroy();n(s);return}r.context.pend.go(function(e){if(r.destroyed)return e();i.write(r.context.fd,t,0,t.length,r.pos,function(t,i){if(t){r.destroy();e();n(t)}else{r.bytesWritten+=i;r.pos+=i;r.emit("progress");e();n()}})})};WriteStream.prototype.destroy=function(){if(this.destroyed)return;this.destroyed=true;this.context.unref()};r.inherits(BufferSlicer,f);function BufferSlicer(t,e){f.call(this);e=e||{};this.refCount=0;this.buffer=t;this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}BufferSlicer.prototype.read=function(t,e,n,i,r){var s=i+n;var o=s-this.buffer.length;var l=o>0?o:n;this.buffer.copy(t,e,i,s);setImmediate(function(){r(null,l)})};BufferSlicer.prototype.write=function(t,e,n,i,r){t.copy(this.buffer,i,e,e+n);setImmediate(function(){r(null,n,t)})};BufferSlicer.prototype.createReadStream=function(t){t=t||{};var e=new a(t);e.destroyed=false;e.start=t.start||0;e.endOffset=t.end;e.pos=e.endOffset||this.buffer.length;var n=this.buffer.slice(e.start,e.pos);var i=0;while(true){var r=i+this.maxChunkSize;if(r>=n.length){if(i<n.length){e.write(n.slice(i,n.length))}break}e.write(n.slice(i,r));i=r}e.end();e.destroy=function(){e.destroyed=true};return e};BufferSlicer.prototype.createWriteStream=function(t){var e=this;t=t||{};var n=new l(t);n.start=t.start||0;n.endOffset=t.end==null?this.buffer.length:+t.end;n.bytesWritten=0;n.pos=n.start;n.destroyed=false;n._write=function(t,i,r){if(n.destroyed)return;var s=n.pos+t.length;if(s>n.endOffset){var o=new Error("maximum file length exceeded");o.code="ETOOBIG";n.destroyed=true;r(o);return}t.copy(e.buffer,n.pos,0,t.length);n.bytesWritten+=t.length;n.pos=s;n.emit("progress");r()};n.destroy=function(){n.destroyed=true};return n};BufferSlicer.prototype.ref=function(){this.refCount+=1};BufferSlicer.prototype.unref=function(){this.refCount-=1;if(this.refCount<0){throw new Error("invalid unref")}};function createFromBuffer(t,e){return new BufferSlicer(t,e)}function createFromFd(t,e){return new FdSlicer(t,e)}},357:function(t){t.exports=require("assert")},381:function(t,e,n){"use strict";const i=n(197);const r=n(891);const s=n(203);const o=n(747);const l=n(827);const a=n(622);const u=t.exports=((t,e,n)=>{if(typeof t==="function")n=t,e=null,t={};else if(Array.isArray(t))e=t,t={};if(typeof e==="function")n=e,e=null;if(!e)e=[];else e=Array.from(e);const i=r(t);if(i.sync&&typeof n==="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof n==="function")throw new TypeError("callback only supported with file option");if(e.length)c(i,e);if(!i.noResume)f(i);return i.file&&i.sync?h(i):i.file?d(i,n):v(i)});const f=t=>{const e=t.onentry;t.onentry=e?t=>{e(t);t.resume()}:t=>t.resume()};const c=(t,e)=>{const n=new Map(e.map(t=>[t.replace(/\/+$/,""),true]));const i=t.filter;const r=(t,e)=>{const i=e||a.parse(t).root||".";const s=t===i?false:n.has(t)?n.get(t):r(a.dirname(t),i);n.set(t,s);return s};t.filter=i?(t,e)=>i(t,e)&&r(t.replace(/\/+$/,"")):t=>r(t.replace(/\/+$/,""))};const h=t=>{const e=v(t);const n=t.file;let r=true;let s;try{const l=o.statSync(n);const a=t.maxReadSize||16*1024*1024;if(l.size<a){e.end(o.readFileSync(n))}else{let t=0;const r=i.allocUnsafe(a);s=o.openSync(n,"r");while(t<l.size){let n=o.readSync(s,r,0,a,t);t+=n;e.write(r.slice(0,n))}e.end()}r=false}finally{if(r&&s)try{o.closeSync(s)}catch(t){}}};const d=(t,e)=>{const n=new s(t);const i=t.maxReadSize||16*1024*1024;const r=t.file;const a=new Promise((t,e)=>{n.on("error",e);n.on("end",t);o.stat(r,(t,s)=>{if(t)e(t);else{const t=new l.ReadStream(r,{readSize:i,size:s.size});t.on("error",e);t.pipe(n)}})});return e?a.then(e,e):a};const v=t=>new s(t)},396:function(t){"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next){yield t.value}}}},413:function(t){t.exports=require("stream")},417:function(t){t.exports=require("crypto")},478:function(t){"use strict";const e=["|","<",">","?",":"];const n=e.map(t=>String.fromCharCode(61440+t.charCodeAt(0)));const i=new Map(e.map((t,e)=>[t,n[e]]));const r=new Map(n.map((t,n)=>[t,e[n]]));t.exports={encode:t=>e.reduce((t,e)=>t.split(e).join(i.get(e)),t),decode:t=>n.reduce((t,e)=>t.split(e).join(r.get(e)),t)}},538:function(t,e,n){var i=n(293).Buffer;var r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];if(typeof Int32Array!=="undefined"){r=new Int32Array(r)}function ensureBuffer(t){if(i.isBuffer(t)){return t}var e=typeof i.alloc==="function"&&typeof i.from==="function";if(typeof t==="number"){return e?i.alloc(t):new i(t)}else if(typeof t==="string"){return e?i.from(t):new i(t)}else{throw new Error("input must be buffer, number, or string, received "+typeof t)}}function bufferizeInt(t){var e=ensureBuffer(4);e.writeInt32BE(t,0);return e}function _crc32(t,e){t=ensureBuffer(t);if(i.isBuffer(e)){e=e.readUInt32BE(0)}var n=~~e^-1;for(var s=0;s<t.length;s++){n=r[(n^t[s])&255]^n>>>8}return n^-1}function crc32(){return bufferizeInt(_crc32.apply(null,arguments))}crc32.signed=function(){return _crc32.apply(null,arguments)};crc32.unsigned=function(){return _crc32.apply(null,arguments)>>>0};t.exports=crc32},554:function(t,e){"use strict";e.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);e.code=new Map(Array.from(e.name).map(t=>[t[1],t[0]]))},560:function(t,e,n){(function(t){"use strict";var e=function(){return u.__string_rec(this,"")},i=i||{},r;function $extend(t,e){var n=Object.create(t);for(var i in e)n[i]=e[i];if(e.toString!==Object.prototype.toString)n.toString=e.toString;return n}var s=i["Attribute"]={__ename__:true,__constructs__:["Off","Bold","Underline","Blink","ReverseVideo","Concealed","BoldOff","UnderlineOff","BlinkOff","NormalVideo","ConcealedOff","Black","Red","Green","Yellow","Blue","Magenta","Cyan","White","DefaultForeground","BlackBack","RedBack","GreenBack","YellowBack","BlueBack","MagentaBack","CyanBack","WhiteBack","DefaultBackground"],Off:{_hx_index:0,__enum__:"Attribute",toString:e},Bold:{_hx_index:1,__enum__:"Attribute",toString:e},Underline:{_hx_index:2,__enum__:"Attribute",toString:e},Blink:{_hx_index:3,__enum__:"Attribute",toString:e},ReverseVideo:{_hx_index:4,__enum__:"Attribute",toString:e},Concealed:{_hx_index:5,__enum__:"Attribute",toString:e},BoldOff:{_hx_index:6,__enum__:"Attribute",toString:e},UnderlineOff:{_hx_index:7,__enum__:"Attribute",toString:e},BlinkOff:{_hx_index:8,__enum__:"Attribute",toString:e},NormalVideo:{_hx_index:9,__enum__:"Attribute",toString:e},ConcealedOff:{_hx_index:10,__enum__:"Attribute",toString:e},Black:{_hx_index:11,__enum__:"Attribute",toString:e},Red:{_hx_index:12,__enum__:"Attribute",toString:e},Green:{_hx_index:13,__enum__:"Attribute",toString:e},Yellow:{_hx_index:14,__enum__:"Attribute",toString:e},Blue:{_hx_index:15,__enum__:"Attribute",toString:e},Magenta:{_hx_index:16,__enum__:"Attribute",toString:e},Cyan:{_hx_index:17,__enum__:"Attribute",toString:e},White:{_hx_index:18,__enum__:"Attribute",toString:e},DefaultForeground:{_hx_index:19,__enum__:"Attribute",toString:e},BlackBack:{_hx_index:20,__enum__:"Attribute",toString:e},RedBack:{_hx_index:21,__enum__:"Attribute",toString:e},GreenBack:{_hx_index:22,__enum__:"Attribute",toString:e},YellowBack:{_hx_index:23,__enum__:"Attribute",toString:e},BlueBack:{_hx_index:24,__enum__:"Attribute",toString:e},MagentaBack:{_hx_index:25,__enum__:"Attribute",toString:e},CyanBack:{_hx_index:26,__enum__:"Attribute",toString:e},WhiteBack:{_hx_index:27,__enum__:"Attribute",toString:e},DefaultBackground:{_hx_index:28,__enum__:"Attribute",toString:e}};var o=function(){};o.__name__=true;o.systemName=function(){var t=process.platform;switch(t){case"darwin":return"Mac";case"freebsd":return"BSD";case"linux":return"Linux";case"win32":return"Windows";default:var e=t;return e}};var l=n(129);var a=function(){};a.__name__=true;a.field=function(t,e){try{return t[e]}catch(t){var n=t instanceof st?t.val:t;return null}};a.fields=function(t){var e=[];if(t!=null){var n=Object.prototype.hasOwnProperty;for(var i in t){if(i!="__id__"&&i!="hx__closures__"&&n.call(t,i)){e.push(i)}}}return e};a.compare=function(t,e){if(t==e){return 0}else if(t>e){return 1}else{return-1}};a.isEnumValue=function(t){if(t!=null){return t.__enum__!=null}else{return false}};a.copy=function(t){if(t==null){return null}var e={};var n=0;var i=a.fields(t);while(n<i.length){var r=i[n];++n;e[r]=a.field(t,r)}return e};var u=function(){};u.__name__=true;u.getClass=function(t){if(t==null){return null}else if(t instanceof Array){return Array}else{var e=t.__class__;if(e!=null){return e}var n=u.__nativeClassName(t);if(n!=null){return u.__resolveNativeClass(n)}return null}};u.__string_rec=function(t,e){if(t==null){return"null"}if(e.length>=5){return"<...>"}var n=typeof t;if(n=="function"&&(t.__name__||t.__ename__)){n="object"}switch(n){case"function":return"<function>";case"object":if(t.__enum__){var r=i[t.__enum__];var s=r.__constructs__[t._hx_index];var o=r[s];if(o.__params__){e=e+"\t";return s+"("+function(n){var i;var r=[];{var s=0;var l=o.__params__;while(true){if(!(s<l.length)){break}var a=l[s];s=s+1;r.push(u.__string_rec(t[a],e))}}i=r;return i}(this).join(",")+")"}else{return s}}if(t instanceof Array){var l="[";e+="\t";var a=0;var f=t.length;while(a<f){var c=a++;l+=(c>0?",":"")+u.__string_rec(t[c],e)}l+="]";return l}var h;try{h=t.toString}catch(t){var d=t instanceof st?t.val:t;return"???"}if(h!=null&&h!=Object.toString&&typeof h=="function"){var v=t.toString();if(v!="[object Object]"){return v}}var w="{\n";e+="\t";var p=t.hasOwnProperty!=null;var m=null;for(m in t){if(p&&!t.hasOwnProperty(m)){continue}if(m=="prototype"||m=="__class__"||m=="__super__"||m=="__interfaces__"||m=="__properties__"){continue}if(w.length!=2){w+=", \n"}w+=e+m+" : "+u.__string_rec(t[m],e)}e=e.substring(1);w+="\n"+e+"}";return w;case"string":return t;default:return String(t)}};u.__interfLoop=function(t,e){if(t==null){return false}if(t==e){return true}if(Object.prototype.hasOwnProperty.call(t,"__interfaces__")){var n=t.__interfaces__;var i=0;var r=n.length;while(i<r){var s=i++;var o=n[s];if(o==e||u.__interfLoop(o,e)){return true}}}return u.__interfLoop(t.__super__,e)};u.__instanceof=function(t,e){if(e==null){return false}switch(e){case Array:return t instanceof Array;case xt:return typeof t=="boolean";case $t:return t!=null;case Ht:return typeof t=="number";case Kt:if(typeof t=="number"){return(t|0)===t}else{return false}break;case String:return typeof t=="string";default:if(t!=null){if(typeof e=="function"){if(u.__downcastCheck(t,e)){return true}}else if(typeof e=="object"&&u.__isNativeObj(e)){if(t instanceof e){return true}}}else{return false}if(e==gt?t.__name__!=null:false){return true}if(e==_t?t.__ename__!=null:false){return true}return t.__enum__!=null?i[t.__enum__]==e:false}};u.__downcastCheck=function(t,e){if(!(t instanceof e)){if(e.__isInterface__){return u.__interfLoop(u.getClass(t),e)}else{return false}}else{return true}};u.__nativeClassName=function(t){var e=u.__toStr.call(t).slice(8,-1);if(e=="Object"||e=="Function"||e=="Math"||e=="JSON"){return null}return e};u.__isNativeObj=function(t){return u.__nativeClassName(t)!=null};u.__resolveNativeClass=function(e){return t[e]};var f=function(){};f.__name__=true;f.string=function(t){return u.__string_rec(t,"")};f.parseInt=function(t){if(t!=null){var e=0;var n=t.length;while(e<n){var i=e++;var r=t.charCodeAt(i);if(r<=8||r>=14&&r!=32&&r!=45){var s=parseInt(t,t[i+1]=="x"||t[i+1]=="X"?16:10);if(isNaN(s)){return null}else{return s}}}}return null};var c=function(){};c.__name__=true;c.aset=function(t){if(c.strip||c.stripIfUnavailable&&!c.available){return""}var e=""+"[";var n=[];var i=0;while(i<t.length){var r=t[i];++i;if(!u.__instanceof(r,s)){throw new st("Set argument is not an Attribute: "+f.string(r))}n.push(c.values.get(r))}return e+n.join(";")+"m"};c.detectSupport=function(){if(o.systemName().toLowerCase().indexOf("window")==-1){var t=-1;try{t=l.spawnSync("tput",["colors"]).error==null?0:125}catch(t){var e=t instanceof st?t.val:t}return t==0}else{return process.env["ANSICON"]!=null}};var h=function(){};h.__name__=true;h.__format_get=function(t,e){switch(e){case"%":return"%";case"A":return h.DAY_NAMES[t.getDay()];case"B":return h.MONTH_NAMES[t.getMonth()];case"C":return p.lpad(f.string(t.getFullYear()/100|0),"0",2);case"D":return h.__format(t,"%m/%d/%y");case"F":return h.__format(t,"%Y-%m-%d");case"I":case"l":var n=t.getHours()%12;return p.lpad(f.string(n==0?12:n),e=="I"?"0":" ",2);case"M":return p.lpad(f.string(t.getMinutes()),"0",2);case"R":return h.__format(t,"%H:%M");case"S":return p.lpad(f.string(t.getSeconds()),"0",2);case"T":return h.__format(t,"%H:%M:%S");case"Y":return f.string(t.getFullYear());case"a":return h.DAY_SHORT_NAMES[t.getDay()];case"b":case"h":return h.MONTH_SHORT_NAMES[t.getMonth()];case"d":return p.lpad(f.string(t.getDate()),"0",2);case"e":return f.string(t.getDate());case"H":case"k":return p.lpad(f.string(t.getHours()),e=="H"?"0":" ",2);case"m":return p.lpad(f.string(t.getMonth()+1),"0",2);case"n":return"\n";case"p":if(t.getHours()>11){return"PM"}else{return"AM"}break;case"r":return h.__format(t,"%I:%M:%S %p");case"s":return f.string(t.getTime()/1e3|0);case"t":return"\t";case"u":var i=t.getDay();if(i==0){return"7"}else if(i==null){return"null"}else{return""+i}break;case"w":return f.string(t.getDay());case"y":return p.lpad(f.string(t.getFullYear()%100),"0",2);default:throw new st("Date.format %"+e+"- not implemented yet.")}};h.__format=function(t,e){var n="";var i=0;while(true){var r=e.indexOf("%",i);if(r<0){break}var s=r-i;n+=s==null?v.substr(e,i,null):v.substr(e,i,s);n+=f.string(h.__format_get(t,v.substr(e,r+1,1)));i=r+2}var o=e.length-i;n+=o==null?v.substr(e,i,null):v.substr(e,i,o);return n};h.format=function(t,e){return h.__format(t,e)};var d=function(t,e){this.r=new RegExp(t,e.split("u").join(""))};d.__name__=true;d.prototype={match:function(t){if(this.r.global){this.r.lastIndex=0}this.r.m=this.r.exec(t);this.r.s=t;return this.r.m!=null},__class__:d};var v=function(){};v.__name__=true;v.dateStr=function(t){var e=t.getMonth()+1;var n=t.getDate();var i=t.getHours();var r=t.getMinutes();var s=t.getSeconds();return t.getFullYear()+"-"+(e<10?"0"+e:""+e)+"-"+(n<10?"0"+n:""+n)+" "+(i<10?"0"+i:""+i)+":"+(r<10?"0"+r:""+r)+":"+(s<10?"0"+s:""+s)};v.strDate=function(t){switch(t.length){case 8:var e=t.split(":");var n=new Date;n["setTime"](0);n["setUTCHours"](e[0]);n["setUTCMinutes"](e[1]);n["setUTCSeconds"](e[2]);return n;case 10:var i=t.split("-");return new Date(i[0],i[1]-1,i[2],0,0,0);case 19:var r=t.split(" ");var s=r[0].split("-");var o=r[1].split(":");return new Date(s[0],s[1]-1,s[2],o[0],o[1],o[2]);default:throw new st("Invalid date format : "+t)}};v.cca=function(t,e){var n=t.charCodeAt(e);if(n!=n){return undefined}return n};v.substr=function(t,e,n){if(n==null){n=t.length}else if(n<0){if(e==0){n=t.length+n}else{return""}}return t.substr(e,n)};v.remove=function(t,e){var n=t.indexOf(e);if(n==-1){return false}t.splice(n,1);return true};v.iter=function(t){return{cur:0,arr:t,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var w=function(){};w.__name__=true;w.has=function(t,e){var n=$getIterator(t);while(n.hasNext()){var i=n.next();if(i==e){return true}}return false};Math.__name__=true;var p=function(){};p.__name__=true;p.startsWith=function(t,e){if(t.length>=e.length){return t.lastIndexOf(e,0)==0}else{return false}};p.endsWith=function(t,e){var n=e.length;var i=t.length;if(i>=n){return t.indexOf(e,i-n)==i-n}else{return false}};p.isSpace=function(t,e){var n=v.cca(t,e);if(!(n>8&&n<14)){return n==32}else{return true}};p.ltrim=function(t){var e=t.length;var n=0;while(n<e&&p.isSpace(t,n))++n;if(n>0){return v.substr(t,n,e-n)}else{return t}};p.rtrim=function(t){var e=t.length;var n=0;while(n<e&&p.isSpace(t,e-n-1))++n;if(n>0){return v.substr(t,0,e-n)}else{return t}};p.trim=function(t){return p.ltrim(p.rtrim(t))};p.lpad=function(t,e,n){if(e.length<=0){return t}var i="";n-=t.length;while(i.length<n)i+=e==null?"null":""+e;i+=t==null?"null":""+t;return i};p.replace=function(t,e,n){return t.split(e).join(n)};var m=function(){};m.__name__=true;m.prototype={writeByte:function(t){throw new st("Not implemented")},writeBytes:function(t,e,n){if(e<0||n<0||e+n>t.length){throw new st(z.OutsideBounds)}var i=t.b;var r=n;while(r>0){this.writeByte(i[e]);++e;--r}return n},writeFullBytes:function(t,e,n){while(n>0){var i=this.writeBytes(t,e,n);e+=i;n-=i}},writeString:function(t,e){var n=D.ofString(t,e);this.writeFullBytes(n,0,n.length)},__class__:m};var y=function(t){this.fd=t};y.__name__=true;y.__super__=m;y.prototype=$extend(m.prototype,{writeByte:function(t){tt.writeSync(this.fd,String.fromCodePoint(t))},writeBytes:function(t,e,n){var i=t.b;return tt.writeSync(this.fd,ht.from(i.buffer,i.byteOffset,t.length),e,n)},writeString:function(t,e){tt.writeSync(this.fd,t)},__class__:y});var b=function(){};b.__name__=true;b.enumParameters=function(t){var e=i[t.__enum__];var n=e.__constructs__[t._hx_index];var r=e[n].__params__;if(r!=null){var s=[];var o=0;while(o<r.length){var l=r[o];++o;s.push(t[l])}return s}else{return[]}};var S=i["haxe.StackItem"]={__ename__:true,__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"],CFunction:{_hx_index:0,__enum__:"haxe.StackItem",toString:e},Module:(r=function(t){return{_hx_index:1,m:t,__enum__:"haxe.StackItem",toString:e}},r.__params__=["m"],r),FilePos:(r=function(t,n,i,r){return{_hx_index:2,s:t,file:n,line:i,column:r,__enum__:"haxe.StackItem",toString:e}},r.__params__=["s","file","line","column"],r),Method:(r=function(t,n){return{_hx_index:3,classname:t,method:n,__enum__:"haxe.StackItem",toString:e}},r.__params__=["classname","method"],r),LocalFunction:(r=function(t){return{_hx_index:4,v:t,__enum__:"haxe.StackItem",toString:e}},r.__params__=["v"],r)};var N=function(){};N.__name__=true;N.__isInterface__=true;var R=function(t){var e=this;this.id=setInterval(function(){e.run()},t)};R.__name__=true;R.delay=function(t,e){var n=new R(e);n.run=function(){n.stop();t()};return n};R.prototype={stop:function(){if(this.id==null){return}clearInterval(this.id);this.id=null},run:function(){},__class__:R};var I=function(){};I.__name__=true;I.__interfaces__=[N];I.prototype={set:function(t,e){this.root=this.setLoop(t,e,this.root)},get:function(t){var e=this.root;while(e!=null){var n=this.compare(t,e.key);if(n==0){return e.value}if(n<0){e=e.left}else{e=e.right}}return null},setLoop:function(t,e,n){if(n==null){return new C(null,t,e,null)}var i=this.compare(t,n.key);if(i==0){return new C(n.left,t,e,n.right,n==null?0:n._height)}else if(i<0){var r=this.setLoop(t,e,n.left);return this.balance(r,n.key,n.value,n.right)}else{var s=this.setLoop(t,e,n.right);return this.balance(n.left,n.key,n.value,s)}},balance:function(t,e,n,i){var r=t==null?0:t._height;var s=i==null?0:i._height;if(r>s+2){var o=t.left;var l=t.right;if((o==null?0:o._height)>=(l==null?0:l._height)){return new C(t.left,t.key,t.value,new C(t.right,e,n,i))}else{return new C(new C(t.left,t.key,t.value,t.right.left),t.right.key,t.right.value,new C(t.right.right,e,n,i))}}else if(s>r+2){var a=i.right;var u=i.left;if((a==null?0:a._height)>(u==null?0:u._height)){return new C(new C(t,e,n,i.left),i.key,i.value,i.right)}else{return new C(new C(t,e,n,i.left.left),i.left.key,i.left.value,new C(i.left.right,i.key,i.value,i.right))}}else{return new C(t,e,n,i,(r>s?r:s)+1)}},compare:function(t,e){return a.compare(t,e)},__class__:I};var C=function(t,e,n,i,r){if(r==null){r=-1}this.left=t;this.key=e;this.value=n;this.right=i;if(r==-1){var s;var o=this.left;var l=this.right;if((o==null?0:o._height)>(l==null?0:l._height)){var a=this.left;s=a==null?0:a._height}else{var u=this.right;s=u==null?0:u._height}this._height=s+1}else{this._height=r}};C.__name__=true;C.prototype={__class__:C};var k=function(){I.call(this)};k.__name__=true;k.__interfaces__=[N];k.__super__=I;k.prototype=$extend(I.prototype,{compare:function(t,e){var n=t._hx_index-e._hx_index;if(n!=0){return n}var i=b.enumParameters(t);var r=b.enumParameters(e);if(i.length==0&&r.length==0){return 0}return this.compareArgs(i,r)},compareArgs:function(t,e){var n=t.length-e.length;if(n!=0){return n}var i=0;var r=t.length;while(i<r){var s=i++;var o=this.compareArg(t[s],e[s]);if(o!=0){return o}}return 0},compareArg:function(t,e){if(a.isEnumValue(t)&&a.isEnumValue(e)){return this.compare(t,e)}else if(t instanceof Array&&e instanceof Array){return this.compareArgs(t,e)}else{return a.compare(t,e)}},__class__:k});var O=function(){this.h={}};O.__name__=true;O.__interfaces__=[N];O.prototype={__class__:O};var L=i["haxe.ds.Option"]={__ename__:true,__constructs__:["Some","None"],Some:(r=function(t){return{_hx_index:0,v:t,__enum__:"haxe.ds.Option",toString:e}},r.__params__=["v"],r),None:{_hx_index:1,__enum__:"haxe.ds.Option",toString:e}};var A=function(){this.h={}};A.__name__=true;A.__interfaces__=[N];A.prototype={setReserved:function(t,e){if(this.rh==null){this.rh={}}this.rh["$"+t]=e},getReserved:function(t){if(this.rh==null){return null}else{return this.rh["$"+t]}},keys:function(){return v.iter(this.arrayKeys())},arrayKeys:function(){var t=[];for(var e in this.h){if(this.h.hasOwnProperty(e)){t.push(e)}}if(this.rh!=null){for(var e in this.rh){if(e.charCodeAt(0)==36){t.push(e.substr(1))}}}return t},__class__:A};var D=function(t){this.length=t.byteLength;this.b=new Uint8Array(t);this.b.bufferValue=t;t.hxBytes=this;t.bytes=this.b};D.__name__=true;D.ofString=function(t,e){if(e==M.RawNative){var n=new Uint8Array(t.length<<1);var i=0;var r=t.length;while(i<r){var s=i++;var o=t.charCodeAt(s);n[s<<1]=o&255;n[s<<1|1]=o>>8}return new D(n.buffer)}var l=[];var a=0;while(a<t.length){var u=t.charCodeAt(a++);if(55296<=u&&u<=56319){u=u-55232<<10|t.charCodeAt(a++)&1023}if(u<=127){l.push(u)}else if(u<=2047){l.push(192|u>>6);l.push(128|u&63)}else if(u<=65535){l.push(224|u>>12);l.push(128|u>>6&63);l.push(128|u&63)}else{l.push(240|u>>18);l.push(128|u>>12&63);l.push(128|u>>6&63);l.push(128|u&63)}}return new D(new Uint8Array(l).buffer)};D.prototype={sub:function(t,e){if(t<0||e<0||t+e>this.length){throw new st(z.OutsideBounds)}return new D(this.b.buffer.slice(t+this.b.byteOffset,t+this.b.byteOffset+e))},getString:function(t,e,n){if(t<0||e<0||t+e>this.length){throw new st(z.OutsideBounds)}if(n==null){n=M.UTF8}var i="";var r=this.b;var s=t;var o=t+e;switch(n._hx_index){case 0:var l=t>0;while(s<o){var a=r[s++];if(a<128){if(a==0){break}i+=String.fromCodePoint(a)}else if(a<224){var u=(a&63)<<6|r[s++]&127;i+=String.fromCodePoint(u)}else if(a<240){var f=r[s++];var c=(a&31)<<12|(f&127)<<6|r[s++]&127;i+=String.fromCodePoint(c)}else{var h=r[s++];var d=r[s++];var v=(a&15)<<18|(h&127)<<12|(d&127)<<6|r[s++]&127;i+=String.fromCodePoint(v)}}break;case 1:while(s<o){var w=r[s++]|r[s++]<<8;i+=String.fromCodePoint(w)}break}return i},toString:function(){return this.getString(0,this.length)},__class__:D};var M=i["haxe.io.Encoding"]={__ename__:true,__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:e},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",toString:e}};var z=i["haxe.io.Error"]={__ename__:true,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:e},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:e},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:e},Custom:(r=function(t){return{_hx_index:3,e:t,__enum__:"haxe.io.Error",toString:e}},r.__params__=["e"],r)};var U=function(t){switch(t){case".":case"..":this.dir=t;this.file="";return}var e=t.lastIndexOf("/");var n=t.lastIndexOf("\\");if(e<n){this.dir=v.substr(t,0,n);t=v.substr(t,n+1,null);this.backslash=true}else if(n<e){this.dir=v.substr(t,0,e);t=v.substr(t,e+1,null)}else{this.dir=null}var i=t.lastIndexOf(".");if(i!=-1){this.ext=v.substr(t,i+1,null);this.file=v.substr(t,0,i)}else{this.ext=null;this.file=t}};U.__name__=true;U.directory=function(t){var e=new U(t);if(e.dir==null){return""}return e.dir};U.extension=function(t){var e=new U(t);if(e.ext==null){return""}return e.ext};U.join=function(t){var e=[];var n=0;var i=t;while(n<i.length){var r=i[n];++n;if(r!=null&&r!=""){e.push(r)}}var s=e;if(s.length==0){return""}var o=s[0];var l=1;var a=s.length;while(l<a){var u=l++;o=U.addTrailingSlash(o);o+=s[u]}return U.normalize(o)};U.normalize=function(t){var e="/";t=t.split("\\").join(e);if(t==e){return e}var n=[];var i=0;var r=t.split(e);while(i<r.length){var s=r[i];++i;if(s==".."&&n.length>0&&n[n.length-1]!=".."){n.pop()}else if(s==""){if(n.length>0||v.cca(t,0)==47){n.push(s)}}else if(s!="."){n.push(s)}}var o=n.join(e);var l="";var a=false;var u=false;var f=0;var c=o;while(f<c.length){var h=c;var d=f++;var w=h.charCodeAt(d);if(w>=55296&&w<=56319){w=w-55232<<10|h.charCodeAt(d+1)&1023}var p=w;if(p>=65536){++f}var m=p;switch(m){case 47:if(!a){u=true}else{var y=m;a=false;if(u){l+="/";u=false}l+=String.fromCodePoint(y)}break;case 58:l+=":";a=true;break;default:var b=m;a=false;if(u){l+="/";u=false}l+=String.fromCodePoint(b)}}return l};U.addTrailingSlash=function(t){if(t.length==0){return"/"}var e=t.lastIndexOf("/");var n=t.lastIndexOf("\\");if(e<n){if(n!=t.length-1){return t+"\\"}else{return t}}else if(e!=t.length-1){return t+"/"}else{return t}};U.removeTrailingSlashes=function(t){t:while(true){var e=v.cca(t,t.length-1);if(e==null){break}else{switch(e){case 47:case 92:t=v.substr(t,0,-1);break;default:break t}}}return t};U.isAbsolute=function(t){if(p.startsWith(t,"/")){return true}if(t.charAt(1)==":"){return true}if(p.startsWith(t,"\\\\")){return true}return false};U.prototype={__class__:U};var B=function(t,e){this.cwd=t;this.args=e};B.__name__=true;B.interpolate=function(t,e){if(t.indexOf("${")==-1){return et.Success(t)}var n="";var i=0;while(i<t.length){var r=t.indexOf("${",i);if(r==-1){var s=null;n+=s==null?v.substr(t,i,null):v.substr(t,i,s);break}else{var o=r;var l=o-i;n+=l==null?v.substr(t,i,null):v.substr(t,i,l);var a=o+2;var u;var c=t.indexOf("}",a);if(c==-1){return et.Failure("unclosed interpolation in "+t)}else{var h=c;u=h}var d=v.substr(t,a,u-a);var w;var p=e(d);if(p==null){return et.Failure("unknown variable "+d)}else{var m=p;if(m=="$"+"{"+d+"}"){w=m}else{var y=B.interpolate(m,e);if(y._hx_index==0){var b=y.data;w=b}else{var S=y;return S}}}n+=f.string(w);i=u+1}}return et.Success(n)};B.fromMultilineString=function(t,e,n,i){if(i==null){i=false}var r=[];var s=new G;var o=function(t){if(t=="__dirname"){return U.directory(e)}else{return n(t)}};var l=function(t,n){var i=function(t){r.push({pos:Y.File(e,n),val:t})};if(t.charAt(0)=="-"){i(t)}else{var l=B.interpolate(t,o);switch(l._hx_index){case 0:var a=l.data;i(a);break;case 1:var u=l.failure;s.fail(u,Y.File(e,n));break}}};var a=t.split("\n");var u=p.trim;var f=new Array(a.length);var c=0;var h=a.length;while(c<h){var d=c++;f[d]=u(a[d])}var w=f;var m=0;var y=w.length;while(m<y){var b=m++;var S=w[b];var N=function(t,e){return function(n){e[0](n,t[0])}}([b],[l]);var R=S.charAt(0);if(R!=null){switch(R){case"#":break;case"-":var I=S.indexOf(" ");if(I==-1){N(S)}else{var C=I;N(v.substr(S,0,C));N(p.trim(v.substr(S,C,null)))}break;default:var k=p.trim(S);if(k!=""){var O=k;if(i){N("-cp")}N(O)}}}}return s.produce(r)};B.split=function(t,e,n,i){var r=[];var s=0;var o=t.length;while(s<o){var l=s++;r.push({val:t[l],pos:Y.Cmd(l)})}var a=r;var u=[];var f=[];var c=[];var h=new G;var d=function(t){if(U.isAbsolute(t)){return t}else{return U.join([e,t])}};var v=function(){if(f.length>0){var t=u.concat(f);var n=new B(e,t);f=[];c.push(n)}};while(true){var w=a.shift();if(w==null){v();break}else{var m=[w];var y=function(t){return function(e){var n=a.shift();if(n==null){h.fail(""+t[0].val+" without argument",t[0].pos)}else{var i=n;e(i)}}}(m);var b=m[0].val;switch(b){case"--each":u=f;f=[];break;case"--next":v();break;case"--run":case"-x":var S=[m[0]].concat(a);f=f.concat(S);a=[];v();break;case"--cwd":case"-C":var N=a.shift();if(N==null){h.fail(""+m[0].val+" without argument",m[0].pos)}else{var R=N;e=d(R.val);if(!n.isDirectory(e)){h.fail("Cannot use "+e+" as working directory",R.pos);a=[]}}break;default:var I=b;if(U.extension(I)=="hxml"){I=d(I);var C=n.readFile(I);switch(C._hx_index){case 0:var k=C.data;var O=B.fromMultilineString(k,I,i);a=h.getResult(O).concat(a);break;case 1:var L=C.failure;h.fail(L,m[0].pos);break}}else{var A=b;if(p.startsWith(A,"${")){var D=B.interpolate(A,i);switch(D._hx_index){case 0:var M=D.data;f.push({val:M,pos:m[0].pos});break;case 1:var z=D.failure;h.fail(z,m[0].pos);break}}else{f.push(m[0])}}}}}return h.produce(c)};B.prototype={__class__:B};var F=function(){};F.__name__=true;F.to=function(t,e,n){return new Pt(new Vt(function(){return Ft.catchExceptions(e,function(e){return Ft.withData(null,"Failed to "+t,e,n)},{fileName:"haxeshim/Attempt.hx",lineNumber:8,className:"haxeshim.Attempt",methodName:"to"})}))};var W=i["haxeshim.ServerKind"]={__ename__:true,__constructs__:["Port","Stdio"],Port:(r=function(t){return{_hx_index:0,num:t,__enum__:"haxeshim.ServerKind",toString:e}},r.__params__=["num"],r),Stdio:{_hx_index:1,__enum__:"haxeshim.ServerKind",toString:e}};var Z=i["haxeshim.StdioState"]={__ename__:true,__constructs__:["AwaitingHeader","AwaitingData"],AwaitingHeader:(r=function(t){return{_hx_index:0,buf:t,__enum__:"haxeshim.StdioState",toString:e}},r.__params__=["buf"],r),AwaitingData:(r=function(t,n){return{_hx_index:1,buf:t,total:n,__enum__:"haxeshim.StdioState",toString:e}},r.__params__=["buf","total"],r)};var P=function(t,e,n){this.freePort=Tt.async(function(t){var e=ut.createServer();e.listen(0,function(){var n=e.address().port;e.close(function(){t(et.Success(n))})})},true);this.args=n;this.scope=e;switch(t._hx_index){case 0:var i=t.num;this.waitOnPort(i);break;case 1:this.stdio();break}};P.__name__=true;P.prototype={handleIntSignals:function(){var t=function(){process.exit()};process.on("SIGINT",t);process.on("SIGTERM",t)},stdio:function(){var t=this;tt.watch(this.scope.configFile,{persistent:false},function(e,n){var i=10;var r=null;r=function(e){if(e==null){e=0}try{t.scope.reload()}catch(t){var n=t instanceof st?t.val:t;if(e>=i){K.get().error("Reloading .haxerc after change detected failed "+i+" times!");process.exit(500)}else{var s=r;var o=e+1;R.delay(function(){s(o);return},100)}}};r()});var e=null;var n=function(){if(e!=null){e.kill()}};process.on("exit",n);this.handleIntSignals();process.stdin.on("end",n);process.stdin.on("close",n);var i=Z.AwaitingHeader(ht.alloc(0));var s=function(t){var e=ht.alloc(4+t.length);e.writeInt32LE(t.length,0);t.copy(e,4);return e};var o=function(n){var i=ht.alloc(0);var o=n.indexOf(1);var a;if(o==-1){a=n}else{var u=o;i=n.slice(u);a=n.slice(0,u)}var f=t.parseArgs(a);if(e==null||f.version!=t.lastVersion){if(e!=null){e.kill();e.stdout.unpipe(process.stdout);e.stderr.unpipe(process.stderr)}t.lastVersion=f.version;var c=t.scope.haxeInstallation;e=l.spawn(c.compiler,t.args.concat(["--wait","stdio"]),{cwd:t.scope.cwd,env:T.toVars(E.mergeEnv(c.env())),stdio:"pipe"});var h=e;e.on("exit",function(t,n){if(e==h){e=null}});e.stdout.pipe(process.stdout);e.stderr.pipe(process.stderr)}var d=(r=t.scope,$bind(r,r.resolve));var v=f.args;var w=Ft.catchExceptions(function(){return d(v)},null,{fileName:"haxeshim/CompilerServer.hx",lineNumber:142,className:"haxeshim.CompilerServer",methodName:"stdio"});switch(w._hx_index){case 0:var p=w.data;var m=ht.from(p.join("\n"));var y=e.stdin;var b=ht.concat([m,i]);y.write(s(b));break;case 1:var S=w.failure;E.die(S.code,S.message);break}};var a=function(){while(true){var t;switch(i._hx_index){case 0:var e=i.buf;t=e.length>=4?Z.AwaitingData(e.slice(4),e.readInt32LE(0)):i;break;case 1:var n=i.total;var r=i.buf;if(r.length>=n){var s=r.slice(0,n);o(s);t=Z.AwaitingHeader(r.slice(n))}else{t=i}break;default:t=i}if(i==t){break}i=t}};process.stdin.on("data",function(t){switch(i._hx_index){case 0:var e=i.buf;i=Z.AwaitingHeader(ht.concat([e,t]));break;case 1:var n=i.total;var r=i.buf;i=Z.AwaitingData(ht.concat([r,t]),n);break}a()})},parseArgs:function(t){var e=t.toString().split("\n");var n;var i=e.indexOf("--haxe-version");if(i==-1){n=this.lastVersion==null?this.scope.haxeInstallation.version:this.lastVersion}else{var r=i;n=e.splice(r,2).pop()}return{version:n,args:e}},waitOnPort:function(t){var e=this;var n=function(){if(e.waiting!=null){e.waiting.handle(function(t){if(t._hx_index==0){var e=t.data;e.kill()}})}};process.on("exit",n);this.handleIntSignals();var i=ut.createServer(function(t){var n=[];t.on("data",function(i){var r=i.indexOf(0);if(r==-1){n.push(i)}else{var s=r;var o=i.slice(0,s);n.push(o);var l=i.slice(s+1);t.unshift(l);var a=ht.concat(n).toString().split("\n");n=[];var u;var f=a.indexOf("--haxe-version");if(f==-1){u=e.lastVersion==null?e.scope.haxeInstallation.version:e.lastVersion}else{var c=f;u=a.splice(c,2).pop()}e.connect(u).handle(function(e){switch(e._hx_index){case 0:var n=e.data;n.write(a.join("\n")+String.fromCodePoint(0));n.pipe(t,{end:true});break;case 1:var i=e.failure;t.end(i.message+"\n"+""+"\n","utf8");break}})}});t.on("error",function(){});t.on("end",function(){})});i.listen(t)},disconnect:function(){if(this.waiting==null){return new Pt(new g(et.Success(Zt.Noise)))}else{return Jt.next(this.waiting,function(t){var e=t.kill().map(et.Success);return e.gather()})}},connect:function(t){var e=this;if(t!=this.lastVersion||this.waiting==null){this.lastVersion=t;var n=this.waiting=Jt.next(this.disconnect(),function(n){return Jt.next(e.freePort,Qt.ofSafeSync(function(n){var i=e.scope.getInstallation(t);var r=E.async(i.compiler,e.scope.cwd,e.args.concat(["--wait",n==null?"null":""+n]),i.env());return{died:Tt.async(function(t){var e=t;var n=function(){e(Zt.Noise)};r.on("exit",n);var i=t;var s=function(){i(Zt.Noise)};r.on("error",s);var o=t;var l=function(){o(Zt.Noise)};r.on("disconnect",l)}),version:t,socket:function(){return Tt.async(function(t){var e=10;var i=null;i=function(r){var s=ut.createConnection(n,"127.0.0.1");s.on("error",function(s){if(r>=e){var o=et.Failure(new Ft(null,"Failed to connect to 127.0.0.1:"+n+" after "+e+" attempts because "+s,{fileName:"haxeshim/CompilerServer.hx",lineNumber:291,className:"haxeshim.CompilerServer",methodName:"connect"}));t(o)}else{var l=i;var a=r+1;R.delay(function(){l(a);return},100)}}).on("connect",function(){t(et.Success(s))})};i(1)})},kill:function(){r.kill();return Tt.async(function(t){var e=t;R.delay(function(){e(Zt.Noise)},500)})}}}))});this.waiting.handle(function(t){switch(t._hx_index){case 0:var i=t.data;i.died.handle(At.fromNiladic(function(){if(e.waiting==n){e.waiting=null}}));break;case 1:var r=t.failure;e.waiting=null;break}})}return Jt.next(this.waiting,function(t){return t.socket()})},__class__:P};var T={};T.__name__=true;T.ofVars=function(t){var e={};var n=e;var i=0;var r=a.fields(t);while(i<r.length){var s=r[i];++i;n[Q.IS_WINDOWS?s.toUpperCase():s]=t[s]}var o=n;return o};T.ofMap=function(t){var e={};var n=e;var i=t.keys();while(i.hasNext()){var r=i.next();n[Q.IS_WINDOWS?r.toUpperCase():r]=te[r]!=null?t.getReserved(r):t.h[r]}var s=n;return s};T.vars=function(t){return t};T.toVars=function(t){return a.copy(t)};T.get=function(t,e){return t[Q.IS_WINDOWS?e.toUpperCase():e]};T.mergeInto=function(t,e){var n=T.vars(e);if(t==null){var i=n;var r=i;return r}else if(n==null){var s=t;var o=s;return o}else{var l=t;var u=n;var f={};var c=f;var h=u;var d=0;var v=a.fields(h);while(d<v.length){var w=v[d];++d;c[w]=h[w]}var p=l;var m=0;var y=a.fields(p);while(m<y.length){var b=y[m];++m;c[b]=p[b]}var S=c;return S}};var G=function(){this.errors=[]};G.__name__=true;G.getCode=function(t){var e=0;var n=t;while(e<n.length){var i=n[e];++e;var r=i.code;if(r!=null){var s=r;return s}}return 500};G.prototype={fail:function(t,e,n){this.errors.push({message:t,pos:e,code:n})},produce:function(t){if(this.errors.length==0){return et.Success(t)}else{return et.Failure({result:t,errors:this.errors})}},getResult:function(t){switch(t._hx_index){case 0:var e=t.data;return e;case 1:var n=t.failure;var i=0;var r=n.errors;while(i<r.length){var s=r[i];++i;this.errors.push(s)}return n.result}},__class__:G};var Y=i["haxeshim.Pos"]={__ename__:true,__constructs__:["File","Cmd","Custom"],File:(r=function(t,n){return{_hx_index:0,path:t,line:n,__enum__:"haxeshim.Pos",toString:e}},r.__params__=["path","line"],r),Cmd:(r=function(t){return{_hx_index:1,index:t,__enum__:"haxeshim.Pos",toString:e}},r.__params__=["index"],r),Custom:(r=function(t){return{_hx_index:2,source:t,__enum__:"haxeshim.Pos",toString:e}},r.__params__=["source"],r)};var q=function(){};q.__name__=true;q.toString=function(t){switch(t._hx_index){case 0:var e=t.line;var n=t.path;return""+n+":"+e;case 1:var i=t.index;return"CLI arg#"+i;case 2:var r=t.source;return r}};var E=function(){};E.__name__=true;E.die=function(t,e){if(e!=null){K.get().error(e)}process.exit(t);throw new st("unreachable")};E.dieFromErrors=function(t){var e=null;var n=K.get();var i=0;var r=t;while(i<r.length){var s=r[i];++i;n.error(q.toString(s.pos)+(": "+s.message))}process.exit(G.getCode(t));throw new st("unreachable")};E.gracefully=function(t){try{return t()}catch(t){var e=t instanceof st?t.val:t;if(e instanceof Ft){var n=e;return E.die(n.code,n.message)}else{return E.die(500,f.string(e))}}};E.mergeEnv=function(t){return T.mergeInto(t,T.ofVars(process.env))};E.async=function(t,e,n,i){return l.spawn(t,n,{cwd:e,stdio:"inherit",env:T.toVars(E.mergeEnv(i))})};E.shell=function(t,e,n){try{return et.Success(l.execSync(t,{cwd:e,stdio:"inherit",env:T.toVars(E.mergeEnv(n))}))}catch(e){var i=e instanceof st?e.val:e;return et.Failure(new Ft(i.status,"Failed to invoke `"+t+"` because "+f.string(i),{fileName:"haxeshim/Exec.hx",lineNumber:47,className:"haxeshim.Exec",methodName:"shell"}))}};E.sync=function(t,e,n,i){var r=l.spawnSync(t,n,{cwd:e,stdio:"inherit",env:T.toVars(E.mergeEnv(i))});var s=r.stdout;var o=r.stderr;var a=r.status;var u=r.signal;var c=r.pid;var h=r.output;var d=r.error;if(d==null){var v=a;return et.Success(v)}else{var w=a;var p=d;return et.Failure(new Ft(w,"Failed to call "+t+" because "+f.string(p),{fileName:"haxeshim/Exec.hx",lineNumber:54,className:"haxeshim.Exec",methodName:"sync"}))}};E.eval=function(t,e,n,i){var r=l.spawnSync(t,n,{cwd:e,env:T.toVars(E.mergeEnv(i))});var s=r;if(s.error==null){return et.Success({status:s.status,stdout:s.stdout.toString(),stderr:s.stderr.toString()})}else{var o=r.stdout;var a=r.stderr;var u=r.status;var c=r.signal;var h=r.pid;var d=r.output;var v=r.error;return et.Failure(new Ft(null,"Failed to call "+t+" because "+f.string(v),{fileName:"haxeshim/Exec.hx",lineNumber:66,className:"haxeshim.Exec",methodName:"eval"}))}};var V={};V.__name__=true;V.ofString=function(t){return D.ofString(t)};var X=function(){};X.__name__=true;X.save=function(t,e,n){return Jt.noise(Jt.next(X.ensureDir(t),function(i){var r=t;var s=function(t){var e=t.b;var n=ht.from(e.buffer,e.byteOffset,t.length);tt.writeFileSync(r,n)};var o=e;var l=function(){s(o)};return F.to("save to "+t,l,n)}))};X.exists=function(t){var e=t;return F.to("check the existence of "+t,function(){return _.exists(e)},{fileName:"haxeshim/Fs.hx",lineNumber:26,className:"haxeshim.Fs",methodName:"exists"})};X.ensureDir=function(t){var e=p.endsWith(t,"/")||p.endsWith(t,"\\");if(e){t=U.removeTrailingSlashes(t)}var n=U.directory(t);if(U.removeTrailingSlashes(n)==t){return new Pt(new g(et.Success(Zt.Noise)))}else{return Jt.next(Jt.next(X.exists(n),function(t){if(t){return new Pt(new g(et.Success(Zt.Noise)))}else{return X.ensureDir(U.addTrailingSlash(n))}}),function(n){if(e){return Jt.next(X.exists(t),function(e){return F.to("create directory "+t,function(){if(!e){_.createDirectory(t)}return Zt.Noise},{fileName:"haxeshim/Fs.hx",lineNumber:49,className:"haxeshim.Fs",methodName:"ensureDir"})})}else{return new Pt(new g(et.Success(Zt.Noise)))}})}};X.ls=function(t,e){var n=[];var i=0;var r=tt.readdirSync(t);while(i<r.length){var s=r[i];++i;var o=""+t+"/"+s;var l;if(e==null||e(o)){l=o}else{continue}n.push(l)}return n};X.delete=function(t){return F.to("delete "+t,function(){if(t!=null&&_.exists(t)){if(_.isDirectory(t)){var e=0;var n=tt.readdirSync(t);while(e<n.length){var i=n[e];++e;X.delete(""+t+"/"+i)}if(_.exists(t)){var r=0;var s=tt.readdirSync(t);while(r<s.length){var o=s[r];++r;var l=t+"/"+o;if(_.isDirectory(l)){if(_.exists(l)){var a=0;var u=tt.readdirSync(l);while(a<u.length){var f=u[a];++a;var c=l+"/"+f;if(_.isDirectory(c)){_.deleteDirectory(c)}else{tt.unlinkSync(c)}}tt.rmdirSync(l)}}else{tt.unlinkSync(l)}}tt.rmdirSync(t)}}else{tt.unlinkSync(t)}}return},{fileName:"haxeshim/Fs.hx",lineNumber:107,className:"haxeshim.Fs",methodName:"delete"})};X.peel=function(t,e){var n=0;var i=0;var r=e;while(i<r){var s=i++;var o=t.indexOf("/",n);if(o==-1){return L.None}else{var l=o;n=l+1}}return L.Some(v.substr(t,n,null))};X.findNearest=function(t,e){while(true)if(_.exists(""+e+"/"+t)){return L.Some(""+e+"/"+t)}else{var n=U.directory(e);var i=n;if(e==i){return L.None}else{var r=n;e=r}}};var J=function(t){this.scope=t};J.__name__=true;J.main=function(){it.setEnv();new J(E.gracefully(function(){return nt.seek()})).dispatch(process.argv.slice(2))};J.prototype={installLibs:function(t){return this.scope.withLogger(K.get(t),(r=this.scope,$bind(r,r.installLibs))).handle(function(t){if(t._hx_index==1){var e=t.failure;process.exit(e.code)}})},dispatch:function(t){var e=function(){var t={cwd:null};return E.gracefully(function(){return nt.seek(t)})};var n;var i;n=t.indexOf("--wait");var r=n;if(r>=0&&r<t.length-1){var s;var o=t.splice(r,2).pop();var l;if(o==null){l=f.parseInt(o);var a=l;s=W.Port(a)}else if(o=="stdio"){s=W.Stdio}else{l=f.parseInt(o);var u=l;s=W.Port(u)}new P(s,e(),t)}else{i=t.slice(0,2);if(i.length==2){if(i[0]=="--run"){var c=i[1];if(c.indexOf("-")!=-1&&c.toLowerCase()==c){var h=t.slice(2);var d=e();switch(c){case"install-libs":var v;switch(h.length){case 0:v=false;break;case 1:v=h[0]=="--silent"?true:E.die(422,"unexpected arguments "+f.string(h));break;default:v=E.die(422,"unexpected arguments "+f.string(h))}this.installLibs(v);break;case"resolve-args":var w=$bind(d,d.resolve);var m=h;var y=E.gracefully(function(){return w(m)}).join("\n");process.stdout.write(f.string(y));process.stdout.write("\n");process.exit(0);break;case"show-version":if(h.length>0){E.die(422,"too many arguments")}var b;var S=E.eval(d.haxeInstallation.compiler,d.cwd,["-version"]);switch(S._hx_index){case 0:var N=S.data;b=p.trim(N.stdout.toString()+N.stderr.toString());break;case 1:var R=S.failure;b=E.die(R.code,R.message);break}process.stdout.write(f.string("-D haxe-ver="+b));process.stdout.write("\n");process.stdout.write(f.string("-cp "+d.haxeInstallation.stdLib));process.stdout.write("\n");break;default:var I=c;E.die(404,"Unknown extension "+I)}}else{var C=t;var k=e();var O=C.indexOf("--haxe-version");if(C.indexOf("--connect")==-1){var L=O==-1}else if(O==-1){C.push("--haxe-version");C.push(k.haxeInstallation.version)}var A=k.haxeInstallation.compiler;var D=A;if(_.exists(D)){var M=function(t){switch(t._hx_index){case 0:var e=t.data;return e;case 1:var n=t.failure;var i=n.result;var r=n.errors;return E.dieFromErrors(r)}};var z=function(t){var e=k.cwd;var n=k.haxeInstallation.env();var i=E.sync(D,e,t,n);switch(i._hx_index){case 0:var r=i.data;if(r!=0){var s=r;E.die(s)}break;case 1:var o=i.failure;E.die(o.code,o.message);break}};if(C.length==0){z(C)}else{var U=0;var B=M(k.getBuilds(C));while(U<B.length){var F=B[U];++U;var Z=M(F);M(Z.checkClassPaths());var T=[];var G=0;var Y=Z.args;while(G<Y.length){var q=Y[G];++G;T.push(q.val)}z(T)}}}else{var V=A;E.die(404,'haxe compiler not found at the expected location "'+V+'"')}}}else{var X=t;var J=e();var Q=X.indexOf("--haxe-version");if(X.indexOf("--connect")==-1){var j=Q==-1}else if(Q==-1){X.push("--haxe-version");X.push(J.haxeInstallation.version)}var K=J.haxeInstallation.compiler;var $=K;if(_.exists($)){var H=function(t){switch(t._hx_index){case 0:var e=t.data;return e;case 1:var n=t.failure;var i=n.result;var r=n.errors;return E.dieFromErrors(r)}};var x=function(t){var e=J.cwd;var n=J.haxeInstallation.env();var i=E.sync($,e,t,n);switch(i._hx_index){case 0:var r=i.data;if(r!=0){var s=r;E.die(s)}break;case 1:var o=i.failure;E.die(o.code,o.message);break}};if(X.length==0){x(X)}else{var g=0;var tt=H(J.getBuilds(X));while(g<tt.length){var et=tt[g];++g;var it=H(et);H(it.checkClassPaths());var rt=[];var st=0;var ot=it.args;while(st<ot.length){var lt=ot[st];++st;rt.push(lt.val)}x(rt)}}}else{var at=K;E.die(404,'haxe compiler not found at the expected location "'+at+'"')}}}else{var ut=t;var ft=e();var ct=ut.indexOf("--haxe-version");if(ut.indexOf("--connect")==-1){var ht=ct==-1}else if(ct==-1){ut.push("--haxe-version");ut.push(ft.haxeInstallation.version)}var dt=ft.haxeInstallation.compiler;var vt=dt;if(_.exists(vt)){var wt=function(t){switch(t._hx_index){case 0:var e=t.data;return e;case 1:var n=t.failure;var i=n.result;var r=n.errors;return E.dieFromErrors(r)}};var pt=function(t){var e=ft.cwd;var n=ft.haxeInstallation.env();var i=E.sync(vt,e,t,n);switch(i._hx_index){case 0:var r=i.data;if(r!=0){var s=r;E.die(s)}break;case 1:var o=i.failure;E.die(o.code,o.message);break}};if(ut.length==0){pt(ut)}else{var mt=0;var yt=wt(ft.getBuilds(ut));while(mt<yt.length){var bt=yt[mt];++mt;var St=wt(bt);wt(St.checkClassPaths());var Nt=[];var Rt=0;var It=St.args;while(Rt<It.length){var Ct=It[Rt];++Rt;Nt.push(Ct.val)}pt(Nt)}}}else{var kt=dt;E.die(404,'haxe compiler not found at the expected location "'+kt+'"')}}}},__class__:J};var Q=function(){};Q.__name__=true;Q.slashes=function(t){if(Q.IS_WINDOWS){return p.replace(t,"/","\\")}else{return t}};var j=function(t,e,n){this.path=t;this.version=e;this.compiler=""+t+"/haxe"+j.EXT;this.haxelib=""+t+"/haxelib"+j.EXT;this.stdLib=""+t+"/std";this.haxelibRepo=n};j.__name__=true;j.prototype={env:function(){var t=T.ofVars({HAXE_STD_PATH:this.stdLib,HAXEPATH:this.path,HAXELIB_PATH:this.haxelibRepo,HAXE_VERSION:this.version});return T.mergeInto(t,it.ENV)},__class__:j};var K=function(){};K.__name__=true;K.get=function(t){if(t==null){t=false}if(t){if(K.SILENT==null){K.SILENT=new K}return K.SILENT}else{if(K.DEFAULT==null){K.DEFAULT=new $}return K.DEFAULT}};K.prototype={error:function(t){},info:function(t){},success:function(t){},progress:function(t){},__class__:K};var $=function(){K.call(this)};$.__name__=true;$.__super__=K;$.prototype=$extend(K.prototype,{log:function(t,e){this.progress("");var n=$.out;var i;switch(t._hx_index){case 0:i=[s.Red];break;case 1:i=[s.Yellow];break;case 2:i=[s.DefaultForeground];break;case 3:i=[s.Green];break}n.writeString(c.aset(i)+e+c.aset([s.Off])+"\n")},error:function(t){this.log(H.Error,t)},info:function(t){this.log(H.Info,t)},success:function(t){this.log(H.Success,t)},progress:function(t){if($.isTTY){if(t.length>80){t=v.substr(t,0,77)+"..."}$.out.writeString((c.strip||c.stripIfUnavailable&&!c.available?"":"[2K")+(c.strip||c.stripIfUnavailable&&!c.available?"":"["+1+"G")+t)}},__class__:$});var H=i["haxeshim._Logger.Level"]={__ename__:true,__constructs__:["Error","Warning","Info","Success"],Error:{_hx_index:0,__enum__:"haxeshim._Logger.Level",toString:e},Warning:{_hx_index:1,__enum__:"haxeshim._Logger.Level",toString:e},Info:{_hx_index:2,__enum__:"haxeshim._Logger.Level",toString:e},Success:{_hx_index:3,__enum__:"haxeshim._Logger.Level",toString:e}};var x=function(){};x.__name__=true;x.__isInterface__=true;x.prototype={__class__:x};var g=function(t){this.value=t};g.__name__=true;g.__interfaces__=[x];g.prototype={get:function(){return this.value},map:function(t){var e=this;return new Vt(function(){return t(e.value)})},__class__:g};var _=function(){};_.__name__=true;_.exists=function(t){try{tt.accessSync(t);return true}catch(t){var e=t instanceof st?t.val:t;return false}};_.isDirectory=function(t){try{return tt.statSync(t).isDirectory()}catch(t){var e=t instanceof st?t.val:t;return false}};_.createDirectory=function(t){try{tt.mkdirSync(t)}catch(r){var e=r instanceof st?r.val:r;if(e.code=="ENOENT"){_.createDirectory(ft.dirname(t));tt.mkdirSync(t)}else{var n;try{n=tt.statSync(t)}catch(t){var i=t instanceof st?t.val:t;throw e}if(!n.isDirectory()){throw e}}}};_.deleteDirectory=function(t){if(_.exists(t)){var e=0;var n=tt.readdirSync(t);while(e<n.length){var i=n[e];++e;var r=t+"/"+i;if(_.isDirectory(r)){_.deleteDirectory(r)}else{tt.unlinkSync(r)}}tt.rmdirSync(t)}};var tt=n(747);var et=i["tink.core.Outcome"]={__ename__:true,__constructs__:["Success","Failure"],Success:(r=function(t){return{_hx_index:0,data:t,__enum__:"tink.core.Outcome",toString:e}},r.__params__=["data"],r),Failure:(r=function(t){return{_hx_index:1,failure:t,__enum__:"tink.core.Outcome",toString:e}},r.__params__=["failure"],r)};var nt=function(t,e,n,i){this.logger=K.get(false);this.haxeshimRoot=t;this.isGlobal=e;this.scopeDir=n;this.scopeLibDir=""+n+"/haxe_libraries";this.cwd=i;this.configFile=""+n+"/"+nt.CONFIG_FILE;this.versionDir=""+t+"/versions";this.haxelibRepo=""+t+"/haxelib";var r=process.env["HAXE_LIBCACHE"];var s=process.env["HAXESHIM_LIBCACHE"];var o;if(s==null){if(r==null){o=""+t+"/haxe_libraries"}else{var l=r;o=l}}else{var a=s;o=a}this.libCache=o};nt.__name__=true;nt.create=function(t,e){return X.save(""+t+"/"+nt.CONFIG_FILE,V.ofString(JSON.stringify(e,null,"  ")),{fileName:"haxeshim/Scope.hx",lineNumber:186,className:"haxeshim.Scope",methodName:"create"})};nt.exists=function(t){return _.exists(""+t+"/"+nt.CONFIG_FILE)};nt.seek=function(t){if(t==null){t={}}var e;var n=t.cwd;if(n==null){e=process.cwd()}else{var i=n;e=i}var r;var s=t.startLookingIn;if(s==null){r=e}else{var o=s;r=o}var l;var a=t.haxeshimRoot;if(a==null){l=nt.DEFAULT_ROOT}else{var u=a;l=u}var f=function(t,e,n,i){return new nt(t,e,n,i)};var c=l;var h=e;var d=function(t,e){return f(c,t,e,h)};var v;var w=X.findNearest(nt.CONFIG_FILE,ft.resolve(r));switch(w._hx_index){case 0:var p=w.v;v=d(false,U.directory(p));break;case 1:v=d(true,l);break}v.reload();return v};nt.env=function(t){var e=process.env[t];if(e==null){return L.None}else if(e==""){return L.None}else{var n=e;return L.Some(n)}};nt.prototype={withLogger:function(t,e){var n=this;var i=this.logger;this.logger=t;return Ft.tryFinally(e,function(){return n.logger=i})},installLibs:function(){var t=this;return F.to("install libraries",function(){var e=t.getInstallationInstructions();var n=0;var i=e.missing;if(i.length!=0){var r=i;n=404;var s=0;while(s<r.length){var o=r[s];++s;t.logger.error(""+o.lib+" has no install instruction for missing classpath "+o.cp+"\n")}}var l=e.instructions.install.length+e.instructions.postInstall.length;var a=0;var u=e.instructions.install;var f=0;while(f<u.length){var c=u[f];++f;t.logger.progress("["+ ++a+"/"+l+"] "+c);var h=E.shell(c,process.cwd());if(h._hx_index==1){var d=h.failure;n=d.code}}var v=e.instructions.postInstall;var w=0;while(w<v.length){var p=v[w];++w;t.logger.progress("["+ ++a+"/"+l+"] "+p);var m=E.shell(p,process.cwd());if(m._hx_index==1){var y=m.failure;n=y.code}}if(n!=0){throw new st(new Ft(n,"failed to install libraries",{fileName:"haxeshim/Scope.hx",lineNumber:111,className:"haxeshim.Scope",methodName:"installLibs"}))}return Zt.Noise},{fileName:"haxeshim/Scope.hx",lineNumber:83,className:"haxeshim.Scope",methodName:"installLibs"})},reload:function(){var t;try{t=tt.readFileSync(this.configFile,{encoding:"utf8"})}catch(t){throw new st(this.isGlobal?"Global config file "+this.configFile+" does not exist or cannot be opened":"Unable to open file "+this.configFile+" because "+f.string(t instanceof st?t.val:t))}var e;try{e=JSON.parse(t)}catch(e){var n=e instanceof st?e.val:e;new y(2).writeString("Invalid JSON in file "+this.configFile+":\n\n"+t+"\n\n");throw st.wrap(n)}this.setConfig(e)},setConfig:function(t){if(t.version==null){throw new st("No version set in "+this.configFile)}if(t.resolveLibs==null){t.resolveLibs=this.isGlobal?"mixed":"scoped"}var e=t.resolveLibs;switch(e){case"haxelib":case"mixed":case"scoped":break;default:var n=e;throw new st("invalid value "+n+" for `resolveLibs` in "+this.configFile)}this.config=t;this.haxeInstallation=this.getInstallation(t.version)},getVar:function(t){var e=process.env[t];if(e==null){return this.getDefault(t)}else if(e==""){return this.getDefault(t)}else{var n=e;return n}},getDefault:function(t){switch(t){case"CWD":return this.cwd;case"HAXESHIM_LIBCACHE":case"HAXE_LIBCACHE":return this.libCache;case"SCOPE_DIR":return this.scopeDir;default:return null}},reconfigure:function(t){var e=this;return Jt.next(X.save(this.configFile,V.ofString(JSON.stringify(t,null,"  ")),{fileName:"haxeshim/Scope.hx",lineNumber:193,className:"haxeshim.Scope",methodName:"reconfigure"}),function(n){e.setConfig(t);return new Pt(new g(et.Success(n)))})},path:function(t){if(U.isAbsolute(t)){return L.Some(t)}else if(p.startsWith(t,"./")||p.startsWith(t,"../")){return L.Some(""+this.cwd+"/"+t)}else{return L.None}},getInstallation:function(t){var e=this.path(t);switch(e._hx_index){case 0:var n=e.v;return new j(n,t,this.haxelibRepo);case 1:return new j(""+this.versionDir+"/"+t,t,this.haxelibRepo)}},resolveThroughHaxelib:function(t){var e=this.haxeInstallation.haxelib;var n=this.cwd;var i=[];var r=0;while(r<t.length){var s=t[r];++r;i.push(s.val)}var o=E.eval(e,n,["path"].concat(i),this.haxeInstallation.env());switch(o._hx_index){case 0:var l=o.data;var a;var u=l.stderr;if(l.status==0){var f=l.stdout;return B.fromMultilineString(f,"haxelib path",$bind(this,this.getVar),true)}else{a=new Ft(l.status,l.stdout+l.stderr,{fileName:"haxeshim/Scope.hx",lineNumber:228,className:"haxeshim.Scope",methodName:"resolveThroughHaxelib"});var c=a;var h=new G;h.fail(c.message,Y.Custom("haxelib path"),c.code);return h.produce([])}break;case 1:var d=o.failure;var v=new G;v.fail(d.message,Y.Custom("haxelib path"),d.code);return v.produce([])}},interpolate:function(t,e){var n=this;var i;if(e==null){i=$bind(this,this.getVar)}else{var r=e;i=function(t){var e=r(t);if(e==null){return n.getVar(t)}else{var i=e;return i}}}return Xt.sure(B.interpolate(t,i))},parseDirectives:function(t){var e=new A;var n=0;var i=t.split("\n");var r=p.trim;var s=new Array(i.length);var o=0;var l=i.length;while(o<l){var a=o++;s[a]=r(i[a])}var u=s;while(n<u.length){var f=u[n];++n;if(p.startsWith(f,"#")){var c=p.ltrim(v.substr(f,1,null));if(p.startsWith(c,"@")){var h=c.indexOf(":");if(h!=-1){var d=h;var w=c.substring(1,d);var m;var y=te[w]!=null?e.getReserved(w):e.h[w];if(y==null){var b=[];if(te[w]!=null){e.setReserved(w,b)}else{e.h[w]=b}m=b}else{var S=y;m=S}m.push(this.interpolate(p.ltrim(v.substr(c,d+1,null))))}}}}return e},libHxml:function(t){return""+this.scopeLibDir+"/"+t+".hxml"},getInstallationInstructions:function(){var t=[];var e={install:[],postInstall:[]};if(_.exists(this.scopeLibDir)){var n=0;var i=tt.readdirSync(this.scopeLibDir);while(n<i.length){var r=i[n];++n;var s=""+this.scopeLibDir+"/"+r;if(!_.isDirectory(s)&&p.endsWith(s,".hxml")){var o=tt.readFileSync(s,{encoding:"utf8"});var l;var a=B.fromMultilineString(o,s,$bind(this,this.getVar));switch(a._hx_index){case 0:var u=a.data;var f=[];var c=0;while(c<u.length){var h=u[c];++c;f.push(h.val)}l=f;break;case 1:var d=a.failure;var v=d.errors;var w=d.result;var m=[];var y=0;while(y<w.length){var b=w[y];++y;m.push(b.val)}l=m;break}var S=0;var N=l.length;while(S<N)if(l[S++]=="-cp"){var R=l[S++];if(!_.exists(R)){var I=this.parseDirectives(o);var C=te["install"]!=null?I.getReserved("install"):I.h["install"];if(C==null){t.push({lib:r,cp:R})}else if(C.length==0){t.push({lib:r,cp:R})}else{var k=C;var O=0;while(O<k.length){var L=k[O];++O;e.install.push(L)}var A=te["post-install"]!=null?I.getReserved("post-install"):I.h["post-install"];if(A!=null){var D=A;var M=0;while(M<D.length){var z=D[M];++M;e.postInstall.push(z)}}}S=N}}}}}return{missing:t,instructions:e}},resolveArgs:function(t){var e=this.cwd;var n=function(t){if(U.isAbsolute(t)){return t}else{return U.join([e,t])}};e=n(t.cwd);var i=[];var r=[];var s=new G;var o=[];var l=[];var a=[];var u=0;t:while(u<t.args.length){var c=t.args[u++];switch(c.val){case"--run":a=t.args.slice(u-1);break t;case"--connect":case"--display":case"--server-connect":case"--server-listen":l.push(c);var h=t.args[u++];if(h==null){s.fail(""+c.val+" requires argument",c.pos)}else{var d=h;l.push(d)}break;case"--wait":l.push(c);break;default:o.push(c)}}var v=new A;t:while(o.length>0){var w=[o.shift()];var p=function(t){return function(e){s.fail(e,t[0].pos)}}(w);var m=w[0].val;switch(m){case"--connect":case"--cwd":case"--each":case"--next":case"--run":case"--wait":case"-C":case"-x":var y=m;p(""+y+" not allowed here");break t;case"-lib":var b=o.shift();if(b==null){p("-lib requires argument")}else{var S=b;var N=S.val;if(!(te[N]!=null?v.getReserved(N):v.h[N])){var R=S.val;if(te[R]!=null){v.setReserved(R,true)}else{v.h[R]=true}var I=this.config.resolveLibs;var C;if(I=="haxelib"){r.push(S)}else{C=I=="mixed";var k=C;var O=this.libHxml(S.val);var L;try{L=et.Success(tt.readFileSync(O,{encoding:"utf8"}))}catch(t){L=et.Failure("could not get contents of "+O+" because "+f.string(t instanceof st?t.val:t))}switch(L._hx_index){case 0:var D=L.data;var M=B.fromMultilineString(D,O,$bind(this,this.getVar));o=s.getResult(M).concat(o);break;case 1:var z=L.failure;if(_.exists(O)){p(z)}else if(k){r.push(S)}else{p("-lib "+S.val+" is missing "+O)}break}}}}break;default:i.push(w[0])}}var F=l.concat(i);var W=this.resolveThroughHaxelib(r);i=F.concat(s.getResult(W)).concat(a);return s.produce(new rt(e,i))},getBuilds:function(t){var e=new G;var n=[];var i=0;var r=e.getResult(B.split(t,this.cwd,nt.fs,$bind(this,this.getVar)));while(i<r.length){var s=r[i];++i;if(s.args.length>0){n.push(this.resolveArgs(s))}}return e.produce(n)},resolve:function(t){var e=[];var n=new G;var i=0;var r=n.getResult(B.split(t,this.cwd,nt.fs,$bind(this,this.getVar)));while(i<r.length){var s=r[i];++i;if(s.args.length>0){if(e.length!=0){e.push("--next")}if(s.cwd!=this.cwd){e.push("--cwd");e.push(s.cwd)}var o=0;var l=n.getResult(this.resolveArgs(s)).args;while(o<l.length){var a=l[o];++o;e.push(a.val)}}}var u=n.produce(42);if(u._hx_index==1){var c;c=u.failure.errors[0];var h=c;process.stdout.write(f.string(h.message));process.stdout.write("\n");var d;var v=h.code;if(v==null){d=500}else{var w=v;d=w}process.exit(d)}return e},__class__:nt};var it=function(){};it.__name__=true;it.setEnv=function(){if(it.isset){if(Q.IS_WINDOWS){var t=0;var e=it.ENV;var n=e==null?[]:a.fields(e);while(t<n.length){var i=n[t];++t;var r=T.get(it.ENV,i);process.env[i]=r}}it.isset=false}};var rt=function(t,e){B.call(this,t,e)};rt.__name__=true;rt.__super__=B;rt.prototype=$extend(B.prototype,{checkClassPaths:function(){var t=new G;var e=0;var n=this.args.length;while(e<n){var i=e++;switch(this.args[i].val){case"--class-path":case"-cp":case"-p":if(i+1<this.args.length){var r=this.args[i+1];try{tt.readdirSync(r.val)}catch(e){var s=e instanceof st?e.val:e;t.fail("classpath "+r.val+" is not a directory or cannot be read from",r.pos)}}break;default:}}return t.produce(Zt.Noise)},__class__:rt});var st=function(t){Error.call(this);this.val=t;if(Error.captureStackTrace){Error.captureStackTrace(this,st)}};st.__name__=true;st.wrap=function(t){if(t instanceof Error){return t}else{return new st(t)}};st.__super__=Error;st.prototype=$extend(Error.prototype,{__class__:st});var ot=function(){};ot.__name__=true;ot.sliceImpl=function(t,e){var n=new Uint8Array(this,t,e==null?null:e-t);var i=new Uint8Array(n.byteLength);i.set(n);return i.buffer};var lt=n(605);var at=n(211);var ut=n(631);var ft=n(622);var ct=n(835);var ht=n(293).Buffer;var dt=function(){};dt.__name__=true;dt.bytesOfBuffer=function(t){var e=Object.create(D.prototype);e.length=t.byteLength;e.b=t;t.bufferValue=t;t.hxBytes=e;t.bytes=t;return e};var vt=n(413).PassThrough;var wt=function(){};wt.__name__=true;wt.attempt=function(t,e){var n=jt.ofSync(wt.reportError);var i=t.flatMap(function(t){switch(t._hx_index){case 0:var e=t.data;return new Pt(new g(e));case 1:var i=t.failure;return n(i)}});i.gather().handle(e)};wt.reportError=function(t){K.get().error(t.message);process.exit(t.code);return null};var pt=function(){};pt.__name__=true;pt.ensureScope=function(){if(nt.exists(nt.DEFAULT_ROOT)){return new Pt(new g(et.Success(Zt.Noise)))}else{return nt.create(nt.DEFAULT_ROOT,{version:"stable",resolveLibs:"mixed"})}};pt.ensure=function(t){return Jt.next(pt.ensureScope(),function(e){var n=nt.seek();var i=new It(n,t);var r;if(!_.exists(i.scope.haxeInstallation.path)){var s=i.scope.config.version;t.info("Version "+s+" configured in "+i.scope.configFile+" does not exist. Attempting download ...");r=i.install(s,{force:false})}else{r=new Pt(new g(et.Success(Zt.Noise)))}return Jt.next(r,function(t){return new Pt(new g(et.Success(Zt.Noise)))})})};pt.main=function(){wt.attempt(pt.ensure(K.get()),At.fromNiladic(J.main))};var mt=n(766);var yt=function(){};yt.__name__=true;yt.text=function(t){return Jt.next(yt.bytes(t),function(t){return new Pt(new g(et.Success(t.toString())))})};yt.bytes=function(t){return yt.download(t,function(t,e,n){yt.buffered(e).handle(n)})};yt.buffered=function(t){return Tt.async(function(e){var n=[];t.on("data",$bind(n,$arrayPush));t.on("end",function(){var t=et.Success(dt.bytesOfBuffer(ht.concat(n)));e(t)})})};yt.archive=function(t,e,n,i){var r=yt.withLogger(i,function(i,r,s){if(r.headers["content-type"]=="application/zip"||p.endsWith(t,".zip")||p.endsWith(i,".zip")){yt.unzip(t,n,e,r,s)}else{yt.untar(t,n,e,r,s)}});return yt.download(t,r)};yt.unzip=function(t,e,i,r,s){Jt.next(yt.buffered(r),function(r){return Tt.async(function(o){var l=r.length-4;while(l-- >0)if(r.b[l]==80&&r.b[l+1]==75&&r.b[l+2]==5&&r.b[l+3]==6){r.b[l+20]=0;r.b[l+21]=0;r=r.sub(0,l+22);break}if(l==0){var a=et.Failure(new Ft(422,"Unzip failed to find central directory in "+t,{fileName:"src/lix/client/Download.hx",lineNumber:70,className:"lix.client.Download",methodName:"unzip"}));o(a);return}var u=r.b;mt.fromBuffer(ht.from(u.buffer,u.byteOffset,r.length),function(r,l){var a=-1;var u=function(){a+=1;s.onProgress(a,l.entryCount,false);if(a==l.entryCount){var t=o;var n=et.Success(e);R.delay(function(){t(n)},100)}};if(r!=null){var c=et.Failure(new Ft(422,"Failed to unzip "+t+" because "+f.string(r),{fileName:"src/lix/client/Download.hx",lineNumber:83,className:"lix.client.Download",methodName:"unzip"}));o(c)}l.on("entry",function(t){var r=X.peel(yt.stripLeadingSlashes(t.fileName),i);switch(r._hx_index){case 0:var s=r.v;var o=""+e+"/"+s;if(p.endsWith(o,"/")){u()}else{X.ensureDir(o).eager();l.openReadStream(t,function(t,e){var i=n(598).createWriteStream(o);e.pipe(i,{end:true});i.on("close",u)})}break;case 1:break}});l.on("end",function(){l.close();u()})})})}).handle($bind(s,s.done))};yt.stripLeadingSlashes=function(t){if(t.charAt(0)=="/"){return yt.stripLeadingSlashes(v.substr(t,1,null))}else{return t}};yt.untar=function(t,e,i,r,s){return Tt.async(function(t){var o=0;var l=0;var a=[];var u=function(){s.onProgress(l,o+1,true)};var f=1;var c=function(n){if(n==null){n=0}l+=n;u();R.delay(function(){if((f-=1)<=0){s.onProgress(o,o,true);var n=[];var i=0;while(i<a.length){var r=[a[i]];++i;n.push(Tt.async(function(t){return function(e){tt.unlink(t[0].to,function(t){return function(n){tt.symlink(t[0].from,t[0].to,function(){return function(t){var n=t==null?et.Success(Zt.Noise):et.Failure(new Ft(null,t.message,{fileName:"src/lix/client/Download.hx",lineNumber:142,className:"lix.client.Download",methodName:"untar"}));e(n)}}())}}(t))}}(r)))}Jt.next(Jt.inParallel(n),function(t){return new Pt(new g(et.Success(e)))}).handle(t)}},100)};var h=null;var d=function(e){h=new Ft(null,e,{fileName:"src/lix/client/Download.hx",lineNumber:154,className:"lix.client.Download",methodName:"untar"});t(et.Failure(h))};Ot.parse(r,function(r){if(h!=null){return}o+=r.size;u();var s=function(){r.on("data",function(){})};var l=X.peel(yt.stripLeadingSlashes(r.path),i);switch(l._hx_index){case 0:var d=l.v;var v=""+e+"/"+d;if(p.endsWith(v,"/")){s()}else{X.ensureDir(v).handle(function(e){if(e._hx_index==1){var i=e.failure;h=i;t(et.Failure(h))}else if(r.type=="SymbolicLink"){s();var o=U.directory(v);a.push({from:U.join([o,r.linkpath]),to:v})}else{f+=1;var l=new vt;var u=n(598).createWriteStream(v,{mode:r.mode});r.pipe(l,{end:true});l.pipe(u,{end:true});var d=c;var w=r.size;u.on("close",function(){d(w)})}})}break;case 1:s();break}}).handle(function(e){if(e._hx_index==1){var n=e.failure;t(et.Failure(n))}else{c()}})}).handle($bind(s,s.done))};yt.withLogger=function(t,e){return function(n,i,r){var s=f.parseInt(i.headers["content-length"]);var o=0;var l=0;var a=1;var u=null;var c=function(e){if(e==u){return}u=e;t.progress(e)};var h=function(t){t=Math.min(1,Math.max(0,t));var e=f.string(Math.round(1e3*t)/10);var n;if(e.indexOf(".")==-1){var i=e;n=""+i+".0"}else{var r=e;n=r}return p.lpad(n," ",5)+"%"};var d=new Date(0).getTime();var v=function(){if(!(l==a||l/a>=1)){var t=(new Date).getTime();if(t>d+137){d=t;var e=[];if(o<s){e.push("Downloaded: "+h(o/s))}if(l>0){e.push("Saved: "+h(l/a))}var n="   "+e.join("   ");c(n)}}};i.on("data",function(t){o+=t.length;v()});var w=0;e(n,i,{onProgress:function(t,e,n){l=t;a=e;if(n){var i=o/s;var r=l/a;var u=i*r;if(u<w){u=w}w=u;l=Math.round(u*1e3);a=1e3}v()},done:function(e){t.success("-> Done!");r(e)}})}};yt.download=function(t,e){return Tt.async(function(n){var i=ct.parse(t);i.agent=false;if(i.headers==null){i.headers={}}i.headers["user-agent"]=yt.USER_AGENT;var r=function(e){var i=et.Failure(Ft.withData(null,"Failed to download "+t+" because "+e.message,e,{fileName:"src/lix/client/Download.hx",lineNumber:293,className:"lix.client.Download",methodName:"download"}));n(i)};var s=p.startsWith(t,"https:")?at.get(i):lt.get(i);s.setTimeout(3e4);s.on("error",r);s.on("response",function(s){if(s.statusCode>=400){var o=et.Failure(Ft.withData(s.statusCode,s.statusMessage,s,{fileName:"src/lix/client/Download.hx",lineNumber:304,className:"lix.client.Download",methodName:"download"}));n(o)}else{var l=s.headers["location"];if(l==null){s.on("error",r);e(t,s,function(t){switch(t._hx_index){case 0:var e=t.data;n(et.Success(e));break;case 1:var i=t.failure;n(et.Failure(i));break}})}else{var a=l;var u=ct.parse(a);var f=u.slashes;var c=u.search;var h=u.query;var d=u.port;var v=u.pathname;var w=u.path;var p=u.href;var m=u.hostname;var y=u.host;var b=u.hash;var S=u.auth;yt.download(u.protocol==null?i.protocol+"//"+i.host+a:a,e).handle(n)}}})})};var bt={};bt.__name__=true;bt.get_isPrerelease=function(t){return t.indexOf("-")!=-1};bt.isNumber=function(t){return new d("^[0-9]*$","").match(t)};bt.fragment=function(t,e){if(bt.isNumber(t)&&bt.isNumber(e)){return f.parseInt(t)-f.parseInt(e)}else{return a.compare(t,e)}};bt.compare=function(t,e){var n=t.split("-");var i=e.split("-");var r=0;while(r<n.length&&r<i.length){var s=n[r].split(".");var o=i[r++].split(".");var l=0;while(l<s.length&&l<o.length){var a=bt.fragment(s[l],o[l]);if(a==0){++l}else{var u=a;return-u}}var f=s.length-o.length;if(f!=0){var c=f;return-c}}return(n.length-i.length)*(r==1?1:-1)};var St=i["lix.client.haxe.ResolvedUserVersionData"]={__ename__:true,__constructs__:["RNightly","ROfficial","RCustom"],RNightly:(r=function(t){return{_hx_index:0,nightly:t,__enum__:"lix.client.haxe.ResolvedUserVersionData",toString:e}},r.__params__=["nightly"],r),ROfficial:(r=function(t){return{_hx_index:1,version:t,__enum__:"lix.client.haxe.ResolvedUserVersionData",toString:e}},r.__params__=["version"],r),RCustom:(r=function(t){return{_hx_index:2,path:t,__enum__:"lix.client.haxe.ResolvedUserVersionData",toString:e}},r.__params__=["path"],r)};var Nt={};Nt.__name__=true;Nt.get_id=function(t){switch(t._hx_index){case 0:var e=t.nightly;var n=e.published;var i=e.file;var r=e.development;var s=e.hash;return s;case 1:var o=t.version;return o;case 2:var l=t.path;return l}};Nt.toString=function(t){return Ct.toString(Ct.ofResolved(t))};var Rt=i["lix.client.haxe.PickOfficial"]={__ename__:true,__constructs__:["StableOnly","IncludePrereleases"],StableOnly:{_hx_index:0,__enum__:"lix.client.haxe.PickOfficial",toString:e},IncludePrereleases:{_hx_index:1,__enum__:"lix.client.haxe.PickOfficial",toString:e}};var It=function(t,e){this.scope=t;this.logger=e;X.ensureDir(U.addTrailingSlash(t.versionDir)).eager();X.ensureDir(U.addTrailingSlash(t.haxelibRepo)).eager();X.ensureDir(this.downloads=t.haxeshimRoot+"/downloads/").eager()};It.__name__=true;It.linkToNightly=function(t,e,n){if(n==null){var i=It.PLATFORM=="windows"&&e.getTime()>14944608e5?"zip":"tar.gz";n=h.format(e,"haxe_%Y-%m-%d_development_"+t+"."+i)}return h.format(e,""+It.NIGHTLIES+"/"+It.PLATFORM+"/"+n)};It.sortedOfficial=function(t,e){if(t==Rt.StableOnly){var n=[];var i=0;while(i<e.length){var r=e[i];++i;if(!bt.get_isPrerelease(r)){n.push(r)}}e=n}e.sort(bt.compare);return e};It.officialOnline=function(t){return Jt.next(yt.text("https://haxe.org/website-content/downloads/versions.json"),function(e){var n=JSON.parse(e).versions.map(function(t){return t.version});return new Pt(new g(et.Success(It.sortedOfficial(t,n))))})};It.sortedNightlies=function(t){t.sort(function(t,e){return a.compare(e.published.getTime(),t.published.getTime())});return t};It.nightliesOnline=function(){return Jt.next(yt.text(""+It.NIGHTLIES+"/"+It.PLATFORM+"/"),Qt.ofSafeSync(function(t){var e=t.split("------------------\n").pop().split("\n");var n=[];var i=function(t){try{return L.Some(v.strDate(t))}catch(t){var e=t instanceof st?t.val:t;return L.None}};var r=0;while(r<e.length){var s=e[r];++r;var o=p.trim(s).split('<a href="');if(o.length==2){var l=o[1];var a=i(o[0].split("  ")[0]);if(a._hx_index==0){var u;u=l.split('"')[0];var f=u;var c=a.v;var h=f.split(".")[0].split("_").pop();if(h==null){var d=h;n.push({hash:d,file:f,development:f.indexOf("_development_")!=-1,published:c})}else if(h!="latest"){var w=h;n.push({hash:w,file:f,development:f.indexOf("_development_")!=-1,published:c})}}}}return It.sortedNightlies(n)}))};It.attempt=function(t,e){try{return new Pt(new g(et.Success(e.get())))}catch(e){return new Pt(new g(et.Failure(new Ft(null,"Failed to "+t+" because "+f.string(e instanceof st?e.val:e),{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:106,className:"lix.client.haxe.Switcher",methodName:"attempt"}))))}};It.pickFirst=function(t,e,n){if(n==null){return It.pickFirst(t,e,function(t){return true})}else{return function(i){var r=$getIterator(i);while(r.hasNext()){var s=r.next();if(n(s)){return new Pt(new g(et.Success(e(s))))}}return new Pt(new g(et.Failure(new Ft(404,"No "+t+" build found",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:140,className:"lix.client.haxe.Switcher",methodName:"pickFirst"}))))}}};It.prototype={officialInstalled:function(t){var e=[];var n=0;var i=tt.readdirSync(this.scope.versionDir);while(n<i.length){var r=i[n];++n;if(!Ct.isHash(r)&&_.isDirectory(this.versionDir(r))){e.push(r)}}return It.attempt("Get installed Haxe versions",new g(It.sortedOfficial(t,e)))},nightliesInstalled:function(){var t=[];var e=0;var n=Ct.isHash;var i=[];var r=0;var s=tt.readdirSync(this.scope.versionDir);while(r<s.length){var o=s[r];++r;if(n(o)){i.push(o)}}var l=i;while(e<l.length){var a=l[e];++e;t.push({hash:a,published:v.strDate(JSON.parse(tt.readFileSync(""+this.versionDir(a)+"/"+It.VERSION_INFO,{encoding:"utf8"})).published)})}return It.attempt("get installed Haxe versions",new g(It.sortedNightlies(t)))},switchTo:function(t){if(Nt.get_id(t)==this.scope.config.version){return new Pt(new g(et.Success(Zt.Noise)))}else{return this.scope.reconfigure({version:Nt.get_id(t),resolveLibs:this.scope.config.resolveLibs})}},resolveInstalled:function(t){return this.resolve(t,$bind(this,this.officialInstalled),$bind(this,this.nightliesInstalled))},resolveOnline:function(t){return this.resolve(t,It.officialOnline,It.nightliesOnline)},resolve:function(t,e,n){switch(t._hx_index){case 0:return Jt.next(n(),It.pickFirst("nightly",St.RNightly,function(t){return t.development!=false}));case 1:return Jt.next(e(Rt.IncludePrereleases),It.pickFirst("official",St.ROfficial));case 2:return Jt.next(e(Rt.StableOnly),It.pickFirst("stable",St.ROfficial));case 3:var i=t.hash;return Jt.ofSpecific(Jt.next(n(),function(e){var n=$getIterator(e);while(n.hasNext()){var r=n.next();if(r.hash==i){return new Pt(new g(et.Success(St.RNightly(r))))}}return new Pt(new g(et.Failure(new Ft(404,"Unable to resolve nightly version "+Ct.toString(t)+" locally, install it first with `lix install haxe "+Ct.toString(t)+"`",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:165,className:"lix.client.haxe.Switcher",methodName:"resolve"}))))}));case 4:var r=t.version;return Jt.ofSpecific(Jt.next(e(Rt.IncludePrereleases),function(t){if(w.has(t,r)){return new Pt(new g(et.Success(St.ROfficial(r))))}else{return new Pt(new g(et.Failure(new Ft(404,"Unable to resolve version "+r+" locally, install it first with `lix install haxe "+r+"`",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:173,className:"lix.client.haxe.Switcher",methodName:"resolve"}))))}}));case 5:var s=t.path;return new Pt(new g(et.Success(St.RCustom(s))))}},versionDir:function(t){return this.scope.getInstallation(t).path},isDownloaded:function(t){return _.exists(this.versionDir(Nt.get_id(t)))},linkToOfficial:function(t){var e="https://haxe.org/website-content/downloads/"+t+"/downloads/haxe-"+t+"-";var n;switch(o.systemName()){case"Mac":n="osx.tar.gz";break;case"Windows":n="win.zip";break;default:n=t<"3"?"linux.tar.gz":"linux64.tar.gz"}return e+n},replace:function(t,e,n,i){var r=e;while(true){var s=X.ls(e);if(s.length==1){var o=s[0];e=o}else{break}}if(i!=null){i(e)}if(_.exists(t)){var l=""+this.downloads+"/"+n+"@"+Math.floor(tt.statSync(t).ctime.getTime());tt.renameSync(t,l);tt.renameSync(e,t)}else{tt.renameSync(e,t)}if(_.exists(r)){X.delete(r)}},install:function(t,e){return Jt.next(this.resolveAndDownload(t,e),$bind(this,this.switchTo))},resolveAndDownload:function(t,e){var n=this;var i;var r=Ct.ofString(t);if(r._hx_index==4){var s=r.version;i=this.resolveInstalled(Ct.ofString(t))}else{i=new Pt(new g(et.Failure(new Ft(null,""+t+" needs to be resolved online",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:231,className:"lix.client.haxe.Switcher",methodName:"resolveAndDownload"}))))}var o=function(e){n.logger.info('Looking up Haxe version "'+t+'" online');return Jt.next(n.resolveOnline(Ct.ofString(t)),function(t){n.logger.info("  Resolved to "+Nt.toString(t)+". Downloading ...");return new Pt(new g(et.Success(t)))})};var l=i.flatMap(function(t){switch(t._hx_index){case 0:var e=t.data;return new Pt(new g(t));case 1:var n=t.failure;return o(n)}});return Jt.next(l.gather(),function(t){return Jt.next(n.download(t,e),function(e){n.logger.success(!e?"  ... already downloaded!":"  ... download complete!");return new Pt(new g(et.Success(t)))})})},download:function(t,e){var n=this;if(this.isDownloaded(t)==true){if(e.force!=true){return new Pt(new g(et.Success(false)))}else{switch(t._hx_index){case 0:var i=t.nightly;var r=i.development;var s=i.published;var o=i.hash;var l=i.file;var a=It.linkToNightly(o,s,l);var u=""+this.downloads+"/"+o+"@"+Math.floor((new Date).getTime());n.logger.info("Downloading Haxe: "+Nt.toString(t));return Jt.next(yt.archive(a,0,u,n.logger),function(t){var e=n.versionDir(o);n.replace(e,t,o,function(t){tt.writeFileSync(""+t+"/"+It.VERSION_INFO,JSON.stringify({published:v.dateStr(s)}))});return new Pt(new g(et.Success(true)))});case 1:var f=t.version;var c=this.linkToOfficial(f);var h=""+this.downloads+"/"+f+"@"+Math.floor((new Date).getTime());n.logger.info("Downloading Haxe: "+Nt.toString(t));var d=yt.archive(c,0,h,n.logger);return Jt.next(d,function(t){var e=n.versionDir(f);n.replace(e,t,f);return new Pt(new g(et.Success(true)))});case 2:var w=t.path;return new Pt(new g(et.Failure(new Ft(null,"Cannot download custom version",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:268,className:"lix.client.haxe.Switcher",methodName:"download"}))))}}}else{switch(t._hx_index){case 0:var p=t.nightly;var m=p.development;var y=p.published;var b=p.hash;var S=p.file;var N=It.linkToNightly(b,y,S);var R=""+this.downloads+"/"+b+"@"+Math.floor((new Date).getTime());n.logger.info("Downloading Haxe: "+Nt.toString(t));return Jt.next(yt.archive(N,0,R,n.logger),function(t){var e=n.versionDir(b);n.replace(e,t,b,function(t){tt.writeFileSync(""+t+"/"+It.VERSION_INFO,JSON.stringify({published:v.dateStr(y)}))});return new Pt(new g(et.Success(true)))});case 1:var I=t.version;var C=this.linkToOfficial(I);var k=""+this.downloads+"/"+I+"@"+Math.floor((new Date).getTime());n.logger.info("Downloading Haxe: "+Nt.toString(t));var O=yt.archive(C,0,k,n.logger);return Jt.next(O,function(t){var e=n.versionDir(I);n.replace(e,t,I);return new Pt(new g(et.Success(true)))});case 2:var L=t.path;return new Pt(new g(et.Failure(new Ft(null,"Cannot download custom version",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:268,className:"lix.client.haxe.Switcher",methodName:"download"}))))}}},__class__:It};var Ct={};Ct.__name__=true;Ct.ofResolved=function(t){switch(t._hx_index){case 0:var e=t.nightly;var n=e.published;var i=e.file;var r=e.development;var s=e.hash;return kt.UNightly(s);case 1:var o=t.version;return kt.UOfficial(o);case 2:var l=t.path;return kt.UCustom(l)}};Ct.isHash=function(t){var e=0;var n=t.length;while(e<n){var i=e++;var r=Ct.hex;var s=t.charCodeAt(i);if(!r.h[s]){return false}}return true};Ct.toString=function(t){switch(t._hx_index){case 0:return"latest nightly build";case 1:return"latest official";case 2:return"latest stable release";case 3:var e=t.hash;return"nightly build "+e;case 4:var n=t.version;return"official release "+n;case 5:var i=t.path;return"custom version at `"+i+"`"}};Ct.isPath=function(t){if(!U.isAbsolute(t)){return t.charAt(0)=="."}else{return true}};Ct.ofString=function(t){if(t==null){return null}else{var e;var n;if(t==null){e=Ct.isHash(t);if(e==true){return kt.UNightly(t)}else{n=Ct.isPath(t);if(n==true){return kt.UCustom(t)}else{return kt.UOfficial(t)}}}else{switch(t){case"auto":return null;case"latest":return kt.ULatest;case"edge":case"nightly":return kt.UEdge;case"stable":return kt.UStable;default:e=Ct.isHash(t);if(e==true){return kt.UNightly(t)}else{n=Ct.isPath(t);if(n==true){return kt.UCustom(t)}else{return kt.UOfficial(t)}}}}}};var kt=i["lix.client.haxe.UserVersionData"]={__ename__:true,__constructs__:["UEdge","ULatest","UStable","UNightly","UOfficial","UCustom"],UEdge:{_hx_index:0,__enum__:"lix.client.haxe.UserVersionData",toString:e},ULatest:{_hx_index:1,__enum__:"lix.client.haxe.UserVersionData",toString:e},UStable:{_hx_index:2,__enum__:"lix.client.haxe.UserVersionData",toString:e},UNightly:(r=function(t){return{_hx_index:3,hash:t,__enum__:"lix.client.haxe.UserVersionData",toString:e}},r.__params__=["hash"],r),UOfficial:(r=function(t){return{_hx_index:4,version:t,__enum__:"lix.client.haxe.UserVersionData",toString:e}},r.__params__=["version"],r),UCustom:(r=function(t){return{_hx_index:5,path:t,__enum__:"lix.client.haxe.UserVersionData",toString:e}},r.__params__=["path"],r)};var Ot=function(){};Ot.__name__=true;Ot.parse=function(t,e){return Tt.async(function(n){var i=0;var r=0;var s=new Lt({onentry:function(t){i+=1;e(t)}});s.on("warn",function(){r+=1});s.on("end",function(){var t=i==0&&r!=0?et.Failure(new Ft(422,"Invalid tar archive.",{fileName:"src/lix/client/uncompress/Tar.hx",lineNumber:23,className:"lix.client.uncompress.Tar",methodName:"parse"})):et.Success(Zt.Noise);n(t)});s.on("error",function(t){var e=et.Failure(new Ft(null,t.message,{fileName:"src/lix/client/uncompress/Tar.hx",lineNumber:26,className:"lix.client.uncompress.Tar",methodName:"parse"}));n(e)});t.pipe(s,{end:true})})};var Lt=n(885).Parse;var At={};At.__name__=true;At.invoke=function(t,e){if(At.depth<500){At.depth++;t(e);At.depth--}else{var n=t;var i=function(t){At.invoke(n,t)};var r=e;At.defer(function(){i(r)})}};At.fromNiladic=function(t){return t};At.defer=function(t){process.nextTick(t)};var Dt=function(){};Dt.__name__=true;Dt.__isInterface__=true;Dt.prototype={__class__:Dt};var Mt={};Mt.__name__=true;Mt.fromMany=function(t){var e=new zt(function(){var e=0;while(e<t.length){var n=t[e];++e;if(n!=null){n.cancel()}}});return e};var zt=function(t){this.f=t};zt.__name__=true;zt.__interfaces__=[Dt];zt.prototype={cancel:function(){if(this.f!=null){this.f();this.f=null}},__class__:zt};var Ut=function(t,e){if(t==null){throw new st("callback expected but null received")}this.cb=t;this.list=e};Ut.__name__=true;Ut.__interfaces__=[Dt];Ut.prototype={clear:function(){this.list=null;this.cb=null},cancel:function(){var t=this.list;if(t!=null){var e=t;this.clear();v.remove(e,this)}},__class__:Ut};var Bt={};Bt.__name__=true;Bt.add=function(t,e){var n=new Ut(e,t);t.push(n);return n};Bt.invoke=function(t,e){var n=0;var i=t.slice();while(n<i.length){var r=i[n];++n;if(r.cb!=null){At.invoke(r.cb,e)}}};Bt.clear=function(t){var e=0;var n=t.splice(0,t.length);while(e<n.length){var i=n[e];++e;i.clear()}};var Ft=function(t,e,n){if(t==null){t=500}this.isTinkError=true;this.code=t;this.message=e;this.pos=n;this.exceptionStack=[];this.callStack=[]};Ft.__name__=true;Ft.withData=function(t,e,n,i){return Ft.typed(t,e,n,i)};Ft.typed=function(t,e,n,i){var r=new Ft(t,e,i);r.data=n;return r};Ft.asError=function(t){if(t!=null&&t.isTinkError){return t}else{return null}};Ft.catchExceptions=function(t,e,n){try{return et.Success(t())}catch(t){var i=t instanceof st?t.val:t;var r=Ft.asError(i);var s;if(r==null){s=e==null?Ft.withData(null,"Unexpected Error",i,n):e(i)}else{var o=r;s=o}return et.Failure(s)}};Ft.tryFinally=function(t,e){try{return t()}finally{e()}return null};Ft.prototype={printPos:function(){return this.pos.className+"."+this.pos.methodName+":"+this.pos.lineNumber},toString:function(){var t="Error#"+this.code+": "+this.message;if(this.pos!=null){t+=" @ "+this.printPos()}return t},throwSelf:function(){var t=this;throw st.wrap(t)},__class__:Ft};var Wt=function(){};Wt.__name__=true;Wt.__isInterface__=true;Wt.prototype={__class__:Wt};var Zt=i["tink.core.Noise"]={__ename__:true,__constructs__:["Noise"],Noise:{_hx_index:0,__enum__:"tink.core.Noise",toString:e}};var Pt=function(t){this.value=t};Pt.__name__=true;Pt.__interfaces__=[Wt];Pt.prototype={map:function(t){return new Pt(this.value.map(t))},flatMap:function(t){var e=this.value.map(t);return new Gt(function(t){return e.get().handle(t)})},handle:function(t){At.invoke(t,this.value.get());return null},eager:function(){return this},gather:function(){return this},__class__:Pt};var Tt={};Tt.__name__=true;Tt.flatten=function(t){return new Yt(t)};Tt.async=function(t,e){if(e==null){e=false}if(e){return new Et(t)}else{var n=new qt;var i=t;At.invoke(i,$bind(n,n.trigger));return n}};var Gt=function(t){this.f=t};Gt.__name__=true;Gt.__interfaces__=[Wt];Gt.prototype={handle:function(t){return this.f(t)},map:function(t){var e=this;return new Gt(function(n){return e.f(function(e){var i=t(e);At.invoke(n,i)})})},flatMap:function(t){var e=t;var n=this;return Tt.flatten(new Gt(function(t){return n.f(function(n){var i=e(n);At.invoke(t,i)})}))},gather:function(){if(this.gathered!=null){return this.gathered}else{return this.gathered=qt.gatherFuture(this)}},eager:function(){var t=this.gathered!=null?this.gathered:this.gathered=qt.gatherFuture(this);t.handle(At.fromNiladic(function(){}));return t},__class__:Gt};var Yt=function(t){this.outer=t};Yt.__name__=true;Yt.__interfaces__=[Wt];Yt.prototype={map:function(t){var e=this.outer.flatMap(function(e){var n=e.map(t);return n.gather()});return e.gather()},flatMap:function(t){var e=this.outer.flatMap(function(e){var n=e.flatMap(t);return n.gather()});return e.gather()},gather:function(){if(this.gathered!=null){return this.gathered}else{return this.gathered=qt.gatherFuture(this)}},eager:function(){var t=this.gathered!=null?this.gathered:this.gathered=qt.gatherFuture(this);t.handle(At.fromNiladic(function(){}));return t},handle:function(t){var e=null;e=this.outer.handle(function(n){e=n.handle(function(e){At.invoke(t,e)})});return e},__class__:Yt};var qt=function(){var t=[];this.list=t};qt.__name__=true;qt.__interfaces__=[Wt];qt.gatherFuture=function(t){var e=null;var n=new Gt(function(n){if(e==null){e=new qt;t.handle($bind(e,e.trigger));t=null}return e.handle(n)});return n};qt.prototype={handle:function(t){var e=this.list;if(e==null){At.invoke(t,this.result);return null}else{var n=e;return Bt.add(n,t)}},map:function(t){var e=this.list;if(e==null){return new Pt(new g(t(this.result)))}else{var n=e;var i=new qt;Bt.add(this.list,function(e){var n=t(e);i.trigger(n)});return i}},flatMap:function(t){var e=this.list;if(e==null){return t(this.result)}else{var n=e;var i=new qt;Bt.add(this.list,function(e){t(e).handle($bind(i,i.trigger))});return i}},gather:function(){return this},eager:function(){return this},trigger:function(t){if(this.list==null){return false}else{var e=this.list;this.list=null;this.result=t;Bt.invoke(e,t);Bt.clear(e);return true}},__class__:qt};var Et=function(t){this.op=t;qt.call(this)};Et.__name__=true;Et.__super__=qt;Et.prototype=$extend(qt.prototype,{eager:function(){if(this.op!=null){var t=this.op;this.op=null;At.invoke(t,$bind(this,this.trigger))}return this},map:function(t){var e=this;if(this.op==null){return qt.prototype.map.call(this,t)}else{return Tt.async(function(n){e.handle(function(e){var i=t(e);n(i)})},true)}},flatMap:function(t){var e=this;if(this.op==null){return qt.prototype.flatMap.call(this,t)}else{return Tt.async(function(n){e.handle(function(e){t(e).handle(n)})},true)}},handle:function(t){this.eager();return qt.prototype.handle.call(this,t)},__class__:Et});var Vt=function(t){this.f=t};Vt.__name__=true;Vt.__interfaces__=[x];Vt.prototype={get:function(){if(this.f!=null){this.result=this.f();this.f=null}return this.result},map:function(t){var e=this;return new Vt(function(){var n=e.get();return t(n)})},__class__:Vt};var Xt=function(){};Xt.__name__=true;Xt.sure=function(t){switch(t._hx_index){case 0:var e=t.data;return e;case 1:var n=t.failure;var i=Ft.asError(n);if(i==null){throw new st(n)}else{var r=i;return r.throwSelf()}break}};var Jt={};Jt.__name__=true;Jt.noise=function(t){return Jt.next(t,function(t){return new Pt(new g(et.Success(Zt.Noise)))})};Jt.next=function(t,e,n){if(n==null){n=true}var i=n;if(i==null){i=true}var r=t.flatMap(function(t){switch(t._hx_index){case 0:var n=t.data;return e(n);case 1:var i=t.failure;return new Pt(new g(et.Failure(i)))}});if(i){return r.gather()}else{return r}};Jt.ofSpecific=function(t){return t};Jt.inParallel=function(t,e,n){if(t.length==0){return new Pt(new g(et.Success([])))}else{return Tt.async(function(n){var i=[];var r=t.length;var s=null;var o=[];var l=false;var a=0;var u=v.iter(t);var f=null;var c=function(t){if(s==null){l=true}else if(s!=null){s.cancel()}n(t)};var h=function(t){r=0;c(et.Failure(t))};var d=function(t,e){i[t]=e;if((r-=1)==0){c(et.Success(i))}else if(u.hasNext()&&r>0){f()}};f=function(){a+=1;var t=a-1;var e=u.next().handle(function(e){switch(e._hx_index){case 0:var n=e.data;d(t,n);break;case 1:var i=e.failure;h(i);break}});o.push(e)};while(true){var w;if(u.hasNext()&&r>0){if(e!=null){e-=1;w=e+1>0}else{w=true}}else{w=false}if(!w){break}f()}s=Mt.fromMany(o);if(l){if(s!=null){s.cancel()}}},n)}};var Qt={};Qt.__name__=true;Qt.ofSafeSync=function(t){return function(e){return new Pt(new g(et.Success(t(e))))}};var jt={};jt.__name__=true;jt.ofSync=function(t){return function(e){return new Pt(new g(t(e)))}};function $getIterator(t){if(t instanceof Array)return v.iter(t);else return t.iterator()}function $bind(e,n){if(n==null)return null;if(n.__id__==null)n.__id__=t.$haxeUID++;var i;if(e.hx__closures__==null)e.hx__closures__={};else i=e.hx__closures__[n.__id__];if(i==null){i=n.bind(e);e.hx__closures__[n.__id__]=i}return i}function $arrayPush(t){this.push(t)}t.$haxeUID|=0;u.__toStr={}.toString;if(String.fromCodePoint==null)String.fromCodePoint=function(t){return t<65536?String.fromCharCode(t):String.fromCharCode((t>>10)+55232)+String.fromCharCode((t&1023)+56320)};String.prototype.__class__=String;String.__name__=true;Array.__name__=true;Date.prototype.__class__=Date;Date.__name__="Date";var Kt={};var $t={};var Ht=Number;var xt=Boolean;var gt={};var _t={};var te={};Object.defineProperty(st.prototype,"message",{get:function(){return String(this.val)}});if(ArrayBuffer.prototype.slice==null){ArrayBuffer.prototype.slice=ot.sliceImpl}c.values=function(t){var e;var n=new k;n.set(s.Off,0);n.set(s.Bold,1);n.set(s.Underline,4);n.set(s.Blink,5);n.set(s.ReverseVideo,7);n.set(s.Concealed,8);n.set(s.BoldOff,22);n.set(s.UnderlineOff,24);n.set(s.BlinkOff,25);n.set(s.NormalVideo,27);n.set(s.ConcealedOff,28);n.set(s.Black,30);n.set(s.Red,31);n.set(s.Green,32);n.set(s.Yellow,33);n.set(s.Blue,34);n.set(s.Magenta,35);n.set(s.Cyan,36);n.set(s.White,37);n.set(s.DefaultForeground,39);n.set(s.BlackBack,40);n.set(s.RedBack,41);n.set(s.GreenBack,42);n.set(s.YellowBack,43);n.set(s.BlueBack,44);n.set(s.MagentaBack,45);n.set(s.CyanBack,46);n.set(s.WhiteBack,47);n.set(s.DefaultBackground,49);e=n;return e}(this);c.available=c.detectSupport();c.strip=false;c.stripIfUnavailable=true;h.DAY_SHORT_NAMES=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];h.DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];h.MONTH_SHORT_NAMES=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];h.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"];Q.IS_WINDOWS=o.systemName()=="Windows";Q.DELIMITER=Q.IS_WINDOWS?";":":";j.EXT=Q.IS_WINDOWS?".exe":"";$.isTTY=process.stderr.isTTY;$.out=function(t){var e;c.available=$.isTTY;e=new y(2);return e}(this);nt.CONFIG_FILE=".haxerc";nt.fs={isDirectory:function(t){try{return _.isDirectory(t)}catch(t){var e=t instanceof st?t.val:t;return false}},readFile:function(t){try{return et.Success(tt.readFileSync(t,{encoding:"utf8"}))}catch(e){return et.Failure("Cannot read "+t+" because "+f.string(e instanceof st?e.val:e))}}};nt.DEFAULT_ROOT=function(t){var e;var n=nt.env("HAXE_ROOT");var i=nt.env("HAXESHIM_ROOT");var r=new g(process.env[Q.IS_WINDOWS?"APPDATA":"HOME"]+"/haxe");var s;if(i._hx_index==0){var o=i.v;s=o}else{s=r.get()}var l=new g(s);e=n._hx_index==0?function(t){var e;var i=n.v;e=i;return e}(t):l.get();return e}(this);it.PATH=Q.slashes(nt.DEFAULT_ROOT+"/neko");it.isset=false;it.ENV=function(t){var e;var n;switch(o.systemName()){case"Mac":n="DYLD_LIBRARY_PATH";break;case"Windows":n="PATH";break;default:n="LD_LIBRARY_PATH"}var i=process.env[n];e=i==null?function(t){var e;var i=new A;{var r=it.PATH;if(te[n]!=null){i.setReserved(n,r)}else{i.h[n]=r}}e=T.ofMap(i);return e}(t):function(t){var e;var r=i;e=r.indexOf(it.PATH)!=-1?T.ofVars({}):function(t){var e;var r=i;var s=new A;{var o=r+Q.DELIMITER+it.PATH;if(te[n]!=null){s.setReserved(n,o)}else{s.h[n]=o}}e=T.ofMap(s);return e}(t);return e}(t);return e}(this);yt.initZip=function(t){var e;var n=mt.validateFileName;mt.validateFileName=function(t){return null};e=true;return e}(this);yt.USER_AGENT="switchx";It.VERSION_INFO="version.json";It.NIGHTLIES="https://build.haxe.org/builds/haxe";It.PLATFORM=function(t){var e;switch(o.systemName()){case"Mac":e="mac";break;case"Windows":e="windows";break;default:e="linux64"}return e}(this);Ct.hex=function(t){var e;var n=new O;{var i=0;var r="0123456789abcdefABCDEF".split("");while(i<r.length){var s=r[i];++i;n.h[v.cca(s,0)]=true}}e=n;return e}(this);At.depth=0;pt.main()})(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this)},577:function(t,e,n){"use strict";const i=n(626);const r=n(747);const s=n(622);const o=n(941);class SymlinkError extends Error{constructor(t,e){super("Cannot extract through symbolic link");this.path=e;this.symlink=t}get name(){return"SylinkError"}}class CwdError extends Error{constructor(t,e){super(e+": Cannot cd into '"+t+"'");this.path=t;this.code=e}get name(){return"CwdError"}}const l=t.exports=((t,e,n)=>{const l=e.umask;const u=e.mode|448;const f=(u&l)!==0;const c=e.uid;const h=e.gid;const d=typeof c==="number"&&typeof h==="number"&&(c!==e.processUid||h!==e.processGid);const v=e.preserve;const w=e.unlink;const p=e.cache;const m=e.cwd;const y=(e,i)=>{if(e)n(e);else{p.set(t,true);if(i&&d)o(i,c,h,t=>y(t));else if(f)r.chmod(t,u,n);else n()}};if(p&&p.get(t)===true)return y();if(t===m)return r.lstat(t,(e,n)=>{if(e||!n.isDirectory())e=new CwdError(t,e&&e.code||"ENOTDIR");y(e)});if(v)return i(t,u,y);const b=s.relative(m,t);const S=b.split(/\/|\\/);a(m,S,u,p,w,m,null,y)});const a=(t,e,n,i,s,o,l,f)=>{if(!e.length)return f(null,l);const c=e.shift();const h=t+"/"+c;if(i.get(h))return a(h,e,n,i,s,o,l,f);r.mkdir(h,n,u(h,e,n,i,s,o,l,f))};const u=(t,e,n,i,o,l,f,c)=>h=>{if(h){if(h.path&&s.dirname(h.path)===l&&(h.code==="ENOTDIR"||h.code==="ENOENT"))return c(new CwdError(l,h.code));r.lstat(t,(s,d)=>{if(s)c(s);else if(d.isDirectory())a(t,e,n,i,o,l,f,c);else if(o)r.unlink(t,s=>{if(s)return c(s);r.mkdir(t,n,u(t,e,n,i,o,l,f,c))});else if(d.isSymbolicLink())return c(new SymlinkError(t,t+"/"+e.join("/")));else c(h)})}else{f=f||t;a(t,e,n,i,o,l,f,c)}};const f=t.exports.sync=((t,e)=>{const n=e.umask;const l=e.mode|448;const a=(l&n)!==0;const u=e.uid;const f=e.gid;const c=typeof u==="number"&&typeof f==="number"&&(u!==e.processUid||f!==e.processGid);const h=e.preserve;const d=e.unlink;const v=e.cache;const w=e.cwd;const p=e=>{v.set(t,true);if(e&&c)o.sync(e,u,f);if(a)r.chmodSync(t,l)};if(v&&v.get(t)===true)return p();if(t===w){let e=false;let n="ENOTDIR";try{e=r.lstatSync(t).isDirectory()}catch(t){n=t.code}finally{if(!e)throw new CwdError(t,n)}p();return}if(h)return p(i.sync(t,l));const m=s.relative(w,t);const y=m.split(/\/|\\/);let b=null;for(let t=y.shift(),e=w;t&&(e+="/"+t);t=y.shift()){if(v.get(e))continue;try{r.mkdirSync(e,l);b=b||e;v.set(e,true)}catch(t){if(t.path&&s.dirname(t.path)===w&&(t.code==="ENOTDIR"||t.code==="ENOENT"))return new CwdError(w,t.code);const n=r.lstatSync(e);if(n.isDirectory()){v.set(e,true);continue}else if(d){r.unlinkSync(e);r.mkdirSync(e,l);b=b||e;v.set(e,true);continue}else if(n.isSymbolicLink())return new SymlinkError(e,e+"/"+y.join("/"))}}return p(b)})},582:function(t,e,n){"use strict";const i=n(197);const r=n(232);const s=n(622);class Pax{constructor(t,e){this.atime=t.atime||null;this.charset=t.charset||null;this.comment=t.comment||null;this.ctime=t.ctime||null;this.gid=t.gid||null;this.gname=t.gname||null;this.linkpath=t.linkpath||null;this.mtime=t.mtime||null;this.path=t.path||null;this.size=t.size||null;this.uid=t.uid||null;this.uname=t.uname||null;this.dev=t.dev||null;this.ino=t.ino||null;this.nlink=t.nlink||null;this.global=e||false}encode(){const t=this.encodeBody();if(t==="")return null;const e=i.byteLength(t);const n=512*Math.ceil(1+e/512);const o=i.allocUnsafe(n);for(let t=0;t<512;t++){o[t]=0}new r({path:("PaxHeader/"+s.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:e,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(o);o.write(t,512,e,"utf8");for(let t=e+512;t<o.length;t++){o[t]=0}return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(t){if(this[t]===null||this[t]===undefined)return"";const e=this[t]instanceof Date?this[t].getTime()/1e3:this[t];const n=" "+(t==="dev"||t==="ino"||t==="nlink"?"SCHILY.":"")+t+"="+e+"\n";const r=i.byteLength(n);let s=Math.floor(Math.log(r)/Math.log(10))+1;if(r+s>=Math.pow(10,s))s+=1;const o=s+r;return o+n}}Pax.parse=((t,e,n)=>new Pax(o(l(t),e),n));const o=(t,e)=>e?Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),e):t;const l=t=>t.replace(/\n$/,"").split("\n").reduce(a,Object.create(null));const a=(t,e)=>{const n=parseInt(e,10);if(n!==i.byteLength(e)+1)return t;e=e.substr((n+" ").length);const r=e.split("=");const s=r.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!s)return t;const o=r.join("=");t[s]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(s)?new Date(o*1e3):/^[0-9]+$/.test(o)?+o:o;return t};t.exports=Pax},598:function(t,e,n){var i=n(747);var r=n(250);var s=n(93);var o=n(608);var l=[];var a=n(669);function noop(){}var u=noop;if(a.debuglog)u=a.debuglog("gfs4");else if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))u=function(){var t=a.format.apply(a,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: ");console.error(t)};if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")){process.on("exit",function(){u(l);n(357).equal(l.length,0)})}t.exports=patch(o(i));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!i.__patched){t.exports=patch(i);i.__patched=true}t.exports.close=function(t){return function(e,n){return t.call(i,e,function(t){if(!t)retry();if(typeof n==="function")n.apply(this,arguments)})}}(i.close);t.exports.closeSync=function(t){return function(e){var n=t.apply(i,arguments);retry();return n}}(i.closeSync);if(!/\bgraceful-fs\b/.test(i.closeSync.toString())){i.closeSync=t.exports.closeSync;i.close=t.exports.close}function patch(t){r(t);t.gracefulify=patch;t.FileReadStream=ReadStream;t.FileWriteStream=WriteStream;t.createReadStream=createReadStream;t.createWriteStream=createWriteStream;var e=t.readFile;t.readFile=readFile;function readFile(t,n,i){if(typeof n==="function")i=n,n=null;return go$readFile(t,n,i);function go$readFile(t,n,i){return e(t,n,function(e){if(e&&(e.code==="EMFILE"||e.code==="ENFILE"))enqueue([go$readFile,[t,n,i]]);else{if(typeof i==="function")i.apply(this,arguments);retry()}})}}var n=t.writeFile;t.writeFile=writeFile;function writeFile(t,e,i,r){if(typeof i==="function")r=i,i=null;return go$writeFile(t,e,i,r);function go$writeFile(t,e,i,r){return n(t,e,i,function(n){if(n&&(n.code==="EMFILE"||n.code==="ENFILE"))enqueue([go$writeFile,[t,e,i,r]]);else{if(typeof r==="function")r.apply(this,arguments);retry()}})}}var i=t.appendFile;if(i)t.appendFile=appendFile;function appendFile(t,e,n,r){if(typeof n==="function")r=n,n=null;return go$appendFile(t,e,n,r);function go$appendFile(t,e,n,r){return i(t,e,n,function(i){if(i&&(i.code==="EMFILE"||i.code==="ENFILE"))enqueue([go$appendFile,[t,e,n,r]]);else{if(typeof r==="function")r.apply(this,arguments);retry()}})}}var o=t.readdir;t.readdir=readdir;function readdir(t,e,n){var i=[t];if(typeof e!=="function"){i.push(e)}else{n=e}i.push(go$readdir$cb);return go$readdir(i);function go$readdir$cb(t,e){if(e&&e.sort)e.sort();if(t&&(t.code==="EMFILE"||t.code==="ENFILE"))enqueue([go$readdir,[i]]);else{if(typeof n==="function")n.apply(this,arguments);retry()}}}function go$readdir(e){return o.apply(t,e)}if(process.version.substr(0,4)==="v0.8"){var l=s(t);ReadStream=l.ReadStream;WriteStream=l.WriteStream}var a=t.ReadStream;if(a){ReadStream.prototype=Object.create(a.prototype);ReadStream.prototype.open=ReadStream$open}var u=t.WriteStream;if(u){WriteStream.prototype=Object.create(u.prototype);WriteStream.prototype.open=WriteStream$open}t.ReadStream=ReadStream;t.WriteStream=WriteStream;function ReadStream(t,e){if(this instanceof ReadStream)return a.apply(this,arguments),this;else return ReadStream.apply(Object.create(ReadStream.prototype),arguments)}function ReadStream$open(){var t=this;open(t.path,t.flags,t.mode,function(e,n){if(e){if(t.autoClose)t.destroy();t.emit("error",e)}else{t.fd=n;t.emit("open",n);t.read()}})}function WriteStream(t,e){if(this instanceof WriteStream)return u.apply(this,arguments),this;else return WriteStream.apply(Object.create(WriteStream.prototype),arguments)}function WriteStream$open(){var t=this;open(t.path,t.flags,t.mode,function(e,n){if(e){t.destroy();t.emit("error",e)}else{t.fd=n;t.emit("open",n)}})}function createReadStream(t,e){return new ReadStream(t,e)}function createWriteStream(t,e){return new WriteStream(t,e)}var f=t.open;t.open=open;function open(t,e,n,i){if(typeof n==="function")i=n,n=null;return go$open(t,e,n,i);function go$open(t,e,n,i){return f(t,e,n,function(r,s){if(r&&(r.code==="EMFILE"||r.code==="ENFILE"))enqueue([go$open,[t,e,n,i]]);else{if(typeof i==="function")i.apply(this,arguments);retry()}})}}return t}function enqueue(t){u("ENQUEUE",t[0].name,t[1]);l.push(t)}function retry(){var t=l.shift();if(t){u("RETRY",t[0].name,t[1]);t[0].apply(null,t[1])}}},605:function(t){t.exports=require("http")},608:function(t){"use strict";t.exports=clone;function clone(t){if(t===null||typeof t!=="object")return t;if(t instanceof Object)var e={__proto__:t.__proto__};else var e=Object.create(null);Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}},612:function(t,e,n){"use strict";t.exports=Yallist;Yallist.Node=Node;Yallist.create=Yallist;function Yallist(t){var e=this;if(!(e instanceof Yallist)){e=new Yallist}e.tail=null;e.head=null;e.length=0;if(t&&typeof t.forEach==="function"){t.forEach(function(t){e.push(t)})}else if(arguments.length>0){for(var n=0,i=arguments.length;n<i;n++){e.push(arguments[n])}}return e}Yallist.prototype.removeNode=function(t){if(t.list!==this){throw new Error("removing node which does not belong to this list")}var e=t.next;var n=t.prev;if(e){e.prev=n}if(n){n.next=e}if(t===this.head){this.head=e}if(t===this.tail){this.tail=n}t.list.length--;t.next=null;t.prev=null;t.list=null};Yallist.prototype.unshiftNode=function(t){if(t===this.head){return}if(t.list){t.list.removeNode(t)}var e=this.head;t.list=this;t.next=e;if(e){e.prev=t}this.head=t;if(!this.tail){this.tail=t}this.length++};Yallist.prototype.pushNode=function(t){if(t===this.tail){return}if(t.list){t.list.removeNode(t)}var e=this.tail;t.list=this;t.prev=e;if(e){e.next=t}this.tail=t;if(!this.head){this.head=t}this.length++};Yallist.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++){push(this,arguments[t])}return this.length};Yallist.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++){unshift(this,arguments[t])}return this.length};Yallist.prototype.pop=function(){if(!this.tail){return undefined}var t=this.tail.value;this.tail=this.tail.prev;if(this.tail){this.tail.next=null}else{this.head=null}this.length--;return t};Yallist.prototype.shift=function(){if(!this.head){return undefined}var t=this.head.value;this.head=this.head.next;if(this.head){this.head.prev=null}else{this.tail=null}this.length--;return t};Yallist.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,i=0;n!==null;i++){t.call(e,n.value,i,this);n=n.next}};Yallist.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,i=this.length-1;n!==null;i--){t.call(e,n.value,i,this);n=n.prev}};Yallist.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++){n=n.next}if(e===t&&n!==null){return n.value}};Yallist.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++){n=n.prev}if(e===t&&n!==null){return n.value}};Yallist.prototype.map=function(t,e){e=e||this;var n=new Yallist;for(var i=this.head;i!==null;){n.push(t.call(e,i.value,this));i=i.next}return n};Yallist.prototype.mapReverse=function(t,e){e=e||this;var n=new Yallist;for(var i=this.tail;i!==null;){n.push(t.call(e,i.value,this));i=i.prev}return n};Yallist.prototype.reduce=function(t,e){var n;var i=this.head;if(arguments.length>1){n=e}else if(this.head){i=this.head.next;n=this.head.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var r=0;i!==null;r++){n=t(n,i.value,r);i=i.next}return n};Yallist.prototype.reduceReverse=function(t,e){var n;var i=this.tail;if(arguments.length>1){n=e}else if(this.tail){i=this.tail.prev;n=this.tail.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var r=this.length-1;i!==null;r--){n=t(n,i.value,r);i=i.prev}return n};Yallist.prototype.toArray=function(){var t=new Array(this.length);for(var e=0,n=this.head;n!==null;e++){t[e]=n.value;n=n.next}return t};Yallist.prototype.toArrayReverse=function(){var t=new Array(this.length);for(var e=0,n=this.tail;n!==null;e++){t[e]=n.value;n=n.prev}return t};Yallist.prototype.slice=function(t,e){e=e||this.length;if(e<0){e+=this.length}t=t||0;if(t<0){t+=this.length}var n=new Yallist;if(e<t||e<0){return n}if(t<0){t=0}if(e>this.length){e=this.length}for(var i=0,r=this.head;r!==null&&i<t;i++){r=r.next}for(;r!==null&&i<e;i++,r=r.next){n.push(r.value)}return n};Yallist.prototype.sliceReverse=function(t,e){e=e||this.length;if(e<0){e+=this.length}t=t||0;if(t<0){t+=this.length}var n=new Yallist;if(e<t||e<0){return n}if(t<0){t=0}if(e>this.length){e=this.length}for(var i=this.length,r=this.tail;r!==null&&i>e;i--){r=r.prev}for(;r!==null&&i>t;i--,r=r.prev){n.push(r.value)}return n};Yallist.prototype.reverse=function(){var t=this.head;var e=this.tail;for(var n=t;n!==null;n=n.prev){var i=n.prev;n.prev=n.next;n.next=i}this.head=e;this.tail=t;return this};function push(t,e){t.tail=new Node(e,t.tail,null,t);if(!t.head){t.head=t.tail}t.length++}function unshift(t,e){t.head=new Node(e,null,t.head,t);if(!t.tail){t.tail=t.head}t.length++}function Node(t,e,n,i){if(!(this instanceof Node)){return new Node(t,e,n,i)}this.list=i;this.value=t;if(e){e.next=this;this.prev=e}else{this.prev=null}if(n){n.prev=this;this.next=n}else{this.next=null}}try{n(396)(Yallist)}catch(t){}},614:function(t){t.exports=require("events")},619:function(t){t.exports=require("constants")},622:function(t){t.exports=require("path")},626:function(t,e,n){var i=n(622);var r=n(747);var s=parseInt("0777",8);t.exports=mkdirP.mkdirp=mkdirP.mkdirP=mkdirP;function mkdirP(t,e,n,o){if(typeof e==="function"){n=e;e={}}else if(!e||typeof e!=="object"){e={mode:e}}var l=e.mode;var a=e.fs||r;if(l===undefined){l=s&~process.umask()}if(!o)o=null;var u=n||function(){};t=i.resolve(t);a.mkdir(t,l,function(n){if(!n){o=o||t;return u(null,o)}switch(n.code){case"ENOENT":mkdirP(i.dirname(t),e,function(n,i){if(n)u(n,i);else mkdirP(t,e,u,i)});break;default:a.stat(t,function(t,e){if(t||!e.isDirectory())u(n,o);else u(null,o)});break}})}mkdirP.sync=function sync(t,e,n){if(!e||typeof e!=="object"){e={mode:e}}var o=e.mode;var l=e.fs||r;if(o===undefined){o=s&~process.umask()}if(!n)n=null;t=i.resolve(t);try{l.mkdirSync(t,o);n=n||t}catch(r){switch(r.code){case"ENOENT":n=sync(i.dirname(t),e,n);sync(t,e,n);break;default:var a;try{a=l.statSync(t)}catch(t){throw r}if(!a.isDirectory())throw r;break}}return n}},630:function(t,e,n){"use strict";const i=n(197);const r=n(891);const s=n(726);const o=n(203);const l=n(747);const a=n(827);const u=n(381);const f=n(622);const c=n(232);const h=t.exports=((t,e,n)=>{const i=r(t);if(!i.file)throw new TypeError("file is required");if(i.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);return i.sync?d(i,e):w(i,e,n)});const d=(t,e)=>{const n=new s.Sync(t);let r=true;let o;let a;try{try{o=l.openSync(t.file,"r+")}catch(e){if(e.code==="ENOENT")o=l.openSync(t.file,"w+");else throw e}const s=l.fstatSync(o);const u=i.alloc(512);t:for(a=0;a<s.size;a+=512){for(let t=0,e=0;t<512;t+=e){e=l.readSync(o,u,t,u.length-t,a+t);if(a===0&&u[0]===31&&u[1]===139)throw new Error("cannot append to compressed archives");if(!e)break t}let e=new c(u);if(!e.cksumValid)break;let n=512*Math.ceil(e.size/512);if(a+n+512>s.size)break;a+=n;if(t.mtimeCache)t.mtimeCache.set(e.path,e.mtime)}r=false;v(t,n,a,o,e)}finally{if(r)try{l.closeSync(o)}catch(t){}}};const v=(t,e,n,i,r)=>{const s=new a.WriteStreamSync(t.file,{fd:i,start:n});e.pipe(s);p(e,r)};const w=(t,e,n)=>{e=Array.from(e);const r=new s(t);const o=(e,n,r)=>{const s=(t,n)=>{if(t)l.close(e,e=>r(t));else r(null,n)};let o=0;if(n===0)return s(null,0);let a=0;const u=i.alloc(512);const f=(i,r)=>{if(i)return s(i);a+=r;if(a<512&&r)return l.read(e,u,a,u.length-a,o+a,f);if(o===0&&u[0]===31&&u[1]===139)return s(new Error("cannot append to compressed archives"));if(a<512)return s(null,o);const h=new c(u);if(!h.cksumValid)return s(null,o);const d=512*Math.ceil(h.size/512);if(o+d+512>n)return s(null,o);o+=d+512;if(o>=n)return s(null,o);if(t.mtimeCache)t.mtimeCache.set(h.path,h.mtime);a=0;l.read(e,u,0,512,o,f)};l.read(e,u,0,512,o,f)};const u=new Promise((n,i)=>{r.on("error",i);let s="r+";const u=(f,c)=>{if(f&&f.code==="ENOENT"&&s==="r+"){s="w+";return l.open(t.file,s,u)}if(f)return i(f);l.fstat(c,(s,l)=>{if(s)return i(s);o(c,l.size,(s,o)=>{if(s)return i(s);const l=new a.WriteStream(t.file,{fd:c,start:o});r.pipe(l);l.on("error",i);l.on("close",n);m(r,e)})})};l.open(t.file,s,u)});return n?u.then(n,n):u};const p=(t,e)=>{e.forEach(e=>{if(e.charAt(0)==="@")u({file:f.resolve(t.cwd,e.substr(1)),sync:true,noResume:true,onentry:e=>t.add(e)});else t.add(e)});t.end()};const m=(t,e)=>{while(e.length){const n=e.shift();if(n.charAt(0)==="@")return u({file:f.resolve(t.cwd,n.substr(1)),noResume:true,onentry:e=>t.add(e)}).then(n=>m(t,e));else t.add(n)}t.end()}},631:function(t){t.exports=require("net")},656:function(t,e,n){"use strict";const i=n(891);const r=n(63);const s=n(747);const o=n(827);const l=n(622);const a=t.exports=((t,e,n)=>{if(typeof t==="function")n=t,e=null,t={};else if(Array.isArray(t))e=t,t={};if(typeof e==="function")n=e,e=null;if(!e)e=[];else e=Array.from(e);const r=i(t);if(r.sync&&typeof n==="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n==="function")throw new TypeError("callback only supported with file option");if(e.length)u(r,e);return r.file&&r.sync?f(r):r.file?c(r,n):r.sync?h(r):d(r)});const u=(t,e)=>{const n=new Map(e.map(t=>[t.replace(/\/+$/,""),true]));const i=t.filter;const r=(t,e)=>{const i=e||l.parse(t).root||".";const s=t===i?false:n.has(t)?n.get(t):r(l.dirname(t),i);n.set(t,s);return s};t.filter=i?(t,e)=>i(t,e)&&r(t.replace(/\/+$/,"")):t=>r(t.replace(/\/+$/,""))};const f=t=>{const e=new r.Sync(t);const n=t.file;let i=true;let l;const a=s.statSync(n);const u=t.maxReadSize||16*1024*1024;const f=new o.ReadStreamSync(n,{readSize:u,size:a.size});f.pipe(e)};const c=(t,e)=>{const n=new r(t);const i=t.maxReadSize||16*1024*1024;const l=t.file;const a=new Promise((t,e)=>{n.on("error",e);n.on("close",t);s.stat(l,(t,r)=>{if(t)e(t);else{const t=new o.ReadStream(l,{readSize:i,size:r.size});t.on("error",e);t.pipe(n)}})});return e?a.then(e,e):a};const h=t=>{return new r.Sync(t)};const d=t=>{return new r(t)}},662:function(t,e,n){"use strict";const i=n(554);const r=n(720);const s=Symbol("slurp");t.exports=class ReadEntry extends r{constructor(t,e,n){super();this.extended=e;this.globalExtended=n;this.header=t;this.startBlockSize=512*Math.ceil(t.size/512);this.blockRemain=this.startBlockSize;this.remain=t.size;this.type=t.type;this.meta=false;this.ignore=false;switch(this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=true;break;default:this.ignore=true}this.path=t.path;this.mode=t.mode;if(this.mode)this.mode=this.mode&4095;this.uid=t.uid;this.gid=t.gid;this.uname=t.uname;this.gname=t.gname;this.size=t.size;this.mtime=t.mtime;this.atime=t.atime;this.ctime=t.ctime;this.linkpath=t.linkpath;this.uname=t.uname;this.gname=t.gname;if(e)this[s](e);if(n)this[s](n,true)}write(t){const e=t.length;if(e>this.blockRemain)throw new Error("writing more to entry than is appropriate");const n=this.remain;const i=this.blockRemain;this.remain=Math.max(0,n-e);this.blockRemain=Math.max(0,i-e);if(this.ignore)return true;if(n>=e)return super.write(t);return super.write(t.slice(0,n))}[s](t,e){for(let n in t){if(t[n]!==null&&t[n]!==undefined&&!(e&&n==="path"))this[n]=t[n]}}}},669:function(t){t.exports=require("util")},720:function(t,e,n){"use strict";const i=n(614);const r=n(612);const s=Symbol("EOF");const o=Symbol("maybeEmitEnd");const l=Symbol("emittedEnd");const a=Symbol("closed");const u=Symbol("read");const f=Symbol("flush");const c=process.env._MP_NO_ITERATOR_SYMBOLS_!=="1";const h=c&&Symbol.asyncIterator||Symbol("asyncIterator not implemented");const d=c&&Symbol.iterator||Symbol("iterator not implemented");const v=Symbol("flushChunk");const w=n(304).StringDecoder;const p=Symbol("encoding");const m=Symbol("decoder");const y=Symbol("flowing");const b=Symbol("resume");const S=Symbol("bufferLength");const N=Symbol("bufferPush");const R=Symbol("bufferShift");const I=Symbol("objectMode");let C=Buffer;if(!C.alloc){C=n(149).Buffer}t.exports=class MiniPass extends i{constructor(t){super();this[y]=false;this.pipes=new r;this.buffer=new r;this[I]=t&&t.objectMode||false;if(this[I])this[p]=null;else this[p]=t&&t.encoding||null;if(this[p]==="buffer")this[p]=null;this[m]=this[p]?new w(this[p]):null;this[s]=false;this[l]=false;this[a]=false;this.writable=true;this.readable=true;this[S]=0}get bufferLength(){return this[S]}get encoding(){return this[p]}set encoding(t){if(this[I])throw new Error("cannot set encoding in objectMode");if(this[p]&&t!==this[p]&&(this[m]&&this[m].lastNeed||this[S]))throw new Error("cannot change encoding");if(this[p]!==t){this[m]=t?new w(t):null;if(this.buffer.length)this.buffer=this.buffer.map(t=>this[m].write(t))}this[p]=t}setEncoding(t){this.encoding=t}write(t,e,n){if(this[s])throw new Error("write after end");if(typeof e==="function")n=e,e="utf8";if(!e)e="utf8";if(typeof t==="string"&&!this[I]&&!(e===this[p]&&!this[m].lastNeed)){t=C.from(t,e)}if(C.isBuffer(t)&&this[p])t=this[m].write(t);try{return this.flowing?(this.emit("data",t),this.flowing):(this[N](t),false)}finally{this.emit("readable");if(n)n()}}read(t){try{if(this[S]===0||t===0||t>this[S])return null;if(this[I])t=null;if(this.buffer.length>1&&!this[I]){if(this.encoding)this.buffer=new r([Array.from(this.buffer).join("")]);else this.buffer=new r([C.concat(Array.from(this.buffer),this[S])])}return this[u](t||null,this.buffer.head.value)}finally{this[o]()}}[u](t,e){if(t===e.length||t===null)this[R]();else{this.buffer.head.value=e.slice(t);e=e.slice(0,t);this[S]-=t}this.emit("data",e);if(!this.buffer.length&&!this[s])this.emit("drain");return e}end(t,e,n){if(typeof t==="function")n=t,t=null;if(typeof e==="function")n=e,e="utf8";if(t)this.write(t,e);if(n)this.once("end",n);this[s]=true;this.writable=false;if(this.flowing)this[o]()}[b](){this[y]=true;this.emit("resume");if(this.buffer.length)this[f]();else if(this[s])this[o]();else this.emit("drain")}resume(){return this[b]()}pause(){this[y]=false}get flowing(){return this[y]}[N](t){if(this[I])this[S]+=1;else this[S]+=t.length;return this.buffer.push(t)}[R](){if(this.buffer.length){if(this[I])this[S]-=1;else this[S]-=this.buffer.head.value.length}return this.buffer.shift()}[f](){do{}while(this[v](this[R]()));if(!this.buffer.length&&!this[s])this.emit("drain")}[v](t){return t?(this.emit("data",t),this.flowing):false}pipe(t,e){if(t===process.stdout||t===process.stderr)(e=e||{}).end=false;const n={dest:t,opts:e,ondrain:t=>this[b]()};this.pipes.push(n);t.on("drain",n.ondrain);this[b]();return t}addListener(t,e){return this.on(t,e)}on(t,e){try{return super.on(t,e)}finally{if(t==="data"&&!this.pipes.length&&!this.flowing)this[b]();else if(t==="end"&&this[l]){super.emit("end");this.removeAllListeners("end")}}}get emittedEnd(){return this[l]}[o](){if(!this[l]&&this.buffer.length===0&&this[s]){this.emit("end");this.emit("prefinish");this.emit("finish");if(this[a])this.emit("close")}}emit(t,e){if(t==="data"){if(!e)return;if(this.pipes.length)this.pipes.forEach(t=>t.dest.write(e)||this.pause())}else if(t==="end"){if(this[l]===true)return;this[l]=true;this.readable=false;if(this[m]){e=this[m].end();if(e){this.pipes.forEach(t=>t.dest.write(e));super.emit("data",e)}}this.pipes.forEach(t=>{t.dest.removeListener("drain",t.ondrain);if(!t.opts||t.opts.end!==false)t.dest.end()})}else if(t==="close"){this[a]=true;if(!this[l])return}const n=new Array(arguments.length);n[0]=t;n[1]=e;if(arguments.length>2){for(let t=2;t<arguments.length;t++){n[t]=arguments[t]}}try{return super.emit.apply(this,n)}finally{if(t!=="end")this[o]();else this.removeAllListeners("end")}}collect(){return new Promise((t,e)=>{const n=[];this.on("data",t=>n.push(t));this.on("end",()=>t(n));this.on("error",e)})}[h](){const t=()=>{const t=this.read();if(t!==null)return Promise.resolve({done:false,value:t});if(this[s])return Promise.resolve({done:true});let e=null;let n=null;const i=t=>{this.removeListener("data",r);this.removeListener("end",o);n(t)};const r=t=>{this.removeListener("error",i);this.removeListener("end",o);this.pause();e({value:t,done:!!this[s]})};const o=()=>{this.removeListener("error",i);this.removeListener("data",r);e({done:true})};return new Promise((t,s)=>{n=s;e=t;this.once("error",i);this.once("end",o);this.once("data",r)})};return{next:t}}[d](){const t=()=>{const t=this.read();const e=t===null;return{value:t,done:e}};return{next:t}}}},726:function(t,e,n){"use strict";const i=n(197);class PackJob{constructor(t,e){this.path=t||"./";this.absolute=e;this.entry=null;this.stat=null;this.readdir=null;this.pending=false;this.ignore=false;this.piped=false}}const r=n(720);const s=n(133);const o=n(662);const l=n(303);const a=l.Sync;const u=l.Tar;const f=n(612);const c=i.alloc(1024);const h=Symbol("onStat");const d=Symbol("ended");const v=Symbol("queue");const w=Symbol("current");const p=Symbol("process");const m=Symbol("processing");const y=Symbol("processJob");const b=Symbol("jobs");const S=Symbol("jobDone");const N=Symbol("addFSEntry");const R=Symbol("addTarEntry");const I=Symbol("stat");const C=Symbol("readdir");const k=Symbol("onreaddir");const O=Symbol("pipe");const L=Symbol("entry");const A=Symbol("entryOpt");const D=Symbol("writeEntryClass");const M=Symbol("write");const z=Symbol("ondrain");const U=n(747);const B=n(622);const F=n(796);const W=F(class Pack extends r{constructor(t){super(t);t=t||Object.create(null);this.opt=t;this.cwd=t.cwd||process.cwd();this.maxReadSize=t.maxReadSize;this.preservePaths=!!t.preservePaths;this.strict=!!t.strict;this.noPax=!!t.noPax;this.prefix=(t.prefix||"").replace(/(\\|\/)+$/,"");this.linkCache=t.linkCache||new Map;this.statCache=t.statCache||new Map;this.readdirCache=t.readdirCache||new Map;this[D]=l;if(typeof t.onwarn==="function")this.on("warn",t.onwarn);this.zip=null;if(t.gzip){if(typeof t.gzip!=="object")t.gzip={};this.zip=new s.Gzip(t.gzip);this.zip.on("data",t=>super.write(t));this.zip.on("end",t=>super.end());this.zip.on("drain",t=>this[z]());this.on("resume",t=>this.zip.resume())}else this.on("drain",this[z]);this.portable=!!t.portable;this.noDirRecurse=!!t.noDirRecurse;this.follow=!!t.follow;this.noMtime=!!t.noMtime;this.mtime=t.mtime||null;this.filter=typeof t.filter==="function"?t.filter:t=>true;this[v]=new f;this[b]=0;this.jobs=+t.jobs||4;this[m]=false;this[d]=false}[M](t){return super.write(t)}add(t){this.write(t);return this}end(t){if(t)this.write(t);this[d]=true;this[p]();return this}write(t){if(this[d])throw new Error("write after end");if(t instanceof o)this[R](t);else this[N](t);return this.flowing}[R](t){const e=B.resolve(this.cwd,t.path);if(this.prefix)t.path=this.prefix+"/"+t.path.replace(/^\.(\/+|$)/,"");if(!this.filter(t.path,t))t.resume();else{const n=new PackJob(t.path,e,false);n.entry=new u(t,this[A](n));n.entry.on("end",t=>this[S](n));this[b]+=1;this[v].push(n)}this[p]()}[N](t){const e=B.resolve(this.cwd,t);if(this.prefix)t=this.prefix+"/"+t.replace(/^\.(\/+|$)/,"");this[v].push(new PackJob(t,e));this[p]()}[I](t){t.pending=true;this[b]+=1;const e=this.follow?"stat":"lstat";U[e](t.absolute,(e,n)=>{t.pending=false;this[b]-=1;if(e)this.emit("error",e);else this[h](t,n)})}[h](t,e){this.statCache.set(t.absolute,e);t.stat=e;if(!this.filter(t.path,e))t.ignore=true;this[p]()}[C](t){t.pending=true;this[b]+=1;U.readdir(t.absolute,(e,n)=>{t.pending=false;this[b]-=1;if(e)return this.emit("error",e);this[k](t,n)})}[k](t,e){this.readdirCache.set(t.absolute,e);t.readdir=e;this[p]()}[p](){if(this[m])return;this[m]=true;for(let t=this[v].head;t!==null&&this[b]<this.jobs;t=t.next){this[y](t.value);if(t.value.ignore){const e=t.next;this[v].removeNode(t);t.next=e}}this[m]=false;if(this[d]&&!this[v].length&&this[b]===0){if(this.zip)this.zip.end(c);else{super.write(c);super.end()}}}get[w](){return this[v]&&this[v].head&&this[v].head.value}[S](t){this[v].shift();this[b]-=1;this[p]()}[y](t){if(t.pending)return;if(t.entry){if(t===this[w]&&!t.piped)this[O](t);return}if(!t.stat){if(this.statCache.has(t.absolute))this[h](t,this.statCache.get(t.absolute));else this[I](t)}if(!t.stat)return;if(t.ignore)return;if(!this.noDirRecurse&&t.stat.isDirectory()&&!t.readdir){if(this.readdirCache.has(t.absolute))this[k](t,this.readdirCache.get(t.absolute));else this[C](t);if(!t.readdir)return}t.entry=this[L](t);if(!t.entry){t.ignore=true;return}if(t===this[w]&&!t.piped)this[O](t)}[A](t){return{onwarn:(t,e)=>{this.warn(t,e)},noPax:this.noPax,cwd:this.cwd,absolute:t.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime}}[L](t){this[b]+=1;try{return new this[D](t.path,this[A](t)).on("end",()=>this[S](t)).on("error",t=>this.emit("error",t))}catch(t){this.emit("error",t)}}[z](){if(this[w]&&this[w].entry)this[w].entry.resume()}[O](t){t.piped=true;if(t.readdir)t.readdir.forEach(e=>{const n=this.prefix?t.path.slice(this.prefix.length+1)||"./":t.path;const i=n==="./"?"":n.replace(/\/*$/,"/");this[N](i+e)});const e=t.entry;const n=this.zip;if(n)e.on("data",t=>{if(!n.write(t))e.pause()});else e.on("data",t=>{if(!super.write(t))e.pause()})}pause(){if(this.zip)this.zip.pause();return super.pause()}});class PackSync extends W{constructor(t){super(t);this[D]=a}pause(){}resume(){}[I](t){const e=this.follow?"statSync":"lstatSync";this[h](t,U[e](t.absolute))}[C](t,e){this[k](t,U.readdirSync(t.absolute))}[O](t){const e=t.entry;const n=this.zip;if(t.readdir)t.readdir.forEach(e=>{const n=this.prefix?t.path.slice(this.prefix.length+1)||"./":t.path;const i=n==="./"?"":n.replace(/\/*$/,"/");this[N](i+e)});if(n)e.on("data",t=>{n.write(t)});else e.on("data",t=>{super[M](t)})}}W.Sync=PackSync;t.exports=W},747:function(t){t.exports=require("fs")},761:function(t){t.exports=require("zlib")},766:function(t,e,n){var i=n(747);var r=n(761);var s=n(324);var o=n(538);var l=n(669);var a=n(614).EventEmitter;var u=n(413).Transform;var f=n(413).PassThrough;var c=n(413).Writable;e.open=open;e.fromFd=fromFd;e.fromBuffer=fromBuffer;e.fromRandomAccessReader=fromRandomAccessReader;e.dosDateTimeToDate=dosDateTimeToDate;e.validateFileName=validateFileName;e.ZipFile=ZipFile;e.Entry=Entry;e.RandomAccessReader=RandomAccessReader;function open(t,e,n){if(typeof e==="function"){n=e;e=null}if(e==null)e={};if(e.autoClose==null)e.autoClose=true;if(e.lazyEntries==null)e.lazyEntries=false;if(e.decodeStrings==null)e.decodeStrings=true;if(e.validateEntrySizes==null)e.validateEntrySizes=true;if(e.strictFileNames==null)e.strictFileNames=false;if(n==null)n=defaultCallback;i.open(t,"r",function(t,r){if(t)return n(t);fromFd(r,e,function(t,e){if(t)i.close(r,defaultCallback);n(t,e)})})}function fromFd(t,e,n){if(typeof e==="function"){n=e;e=null}if(e==null)e={};if(e.autoClose==null)e.autoClose=false;if(e.lazyEntries==null)e.lazyEntries=false;if(e.decodeStrings==null)e.decodeStrings=true;if(e.validateEntrySizes==null)e.validateEntrySizes=true;if(e.strictFileNames==null)e.strictFileNames=false;if(n==null)n=defaultCallback;i.fstat(t,function(i,r){if(i)return n(i);var o=s.createFromFd(t,{autoClose:true});fromRandomAccessReader(o,r.size,e,n)})}function fromBuffer(t,e,n){if(typeof e==="function"){n=e;e=null}if(e==null)e={};e.autoClose=false;if(e.lazyEntries==null)e.lazyEntries=false;if(e.decodeStrings==null)e.decodeStrings=true;if(e.validateEntrySizes==null)e.validateEntrySizes=true;if(e.strictFileNames==null)e.strictFileNames=false;var i=s.createFromBuffer(t,{maxChunkSize:65536});fromRandomAccessReader(i,t.length,e,n)}function fromRandomAccessReader(t,e,n,i){if(typeof n==="function"){i=n;n=null}if(n==null)n={};if(n.autoClose==null)n.autoClose=true;if(n.lazyEntries==null)n.lazyEntries=false;if(n.decodeStrings==null)n.decodeStrings=true;var r=!!n.decodeStrings;if(n.validateEntrySizes==null)n.validateEntrySizes=true;if(n.strictFileNames==null)n.strictFileNames=false;if(i==null)i=defaultCallback;if(typeof e!=="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER){throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.")}t.ref();var s=22;var o=65535;var l=Math.min(s+o,e);var a=d(l);var u=e-a.length;readAndAssertNoEof(t,a,0,l,u,function(o){if(o)return i(o);for(var f=l-s;f>=0;f-=1){if(a.readUInt32LE(f)!==101010256)continue;var c=a.slice(f);var h=c.readUInt16LE(4);if(h!==0){return i(new Error("multi-disk zip files are not supported: found disk number: "+h))}var v=c.readUInt16LE(10);var w=c.readUInt32LE(16);var p=c.readUInt16LE(20);var m=c.length-s;if(p!==m){return i(new Error("invalid comment length. expected: "+m+". found: "+p))}var y=r?decodeBuffer(c,22,c.length,false):c.slice(22);if(!(v===65535||w===4294967295)){return i(null,new ZipFile(t,w,e,v,y,n.autoClose,n.lazyEntries,r,n.validateEntrySizes,n.strictFileNames))}var b=d(20);var S=u+f-b.length;readAndAssertNoEof(t,b,0,b.length,S,function(s){if(s)return i(s);if(b.readUInt32LE(0)!==117853008){return i(new Error("invalid zip64 end of central directory locator signature"))}var o=readUInt64LE(b,8);var l=d(56);readAndAssertNoEof(t,l,0,l.length,o,function(s){if(s)return i(s);if(l.readUInt32LE(0)!==101075792){return i(new Error("invalid zip64 end of central directory record signature"))}v=readUInt64LE(l,32);w=readUInt64LE(l,48);return i(null,new ZipFile(t,w,e,v,y,n.autoClose,n.lazyEntries,r,n.validateEntrySizes,n.strictFileNames))})});return}i(new Error("end of central directory record signature not found"))})}l.inherits(ZipFile,a);function ZipFile(t,e,n,i,r,s,o,l,u,f){var c=this;a.call(c);c.reader=t;c.reader.on("error",function(t){emitError(c,t)});c.reader.once("close",function(){c.emit("close")});c.readEntryCursor=e;c.fileSize=n;c.entryCount=i;c.comment=r;c.entriesRead=0;c.autoClose=!!s;c.lazyEntries=!!o;c.decodeStrings=!!l;c.validateEntrySizes=!!u;c.strictFileNames=!!f;c.isOpen=true;c.emittedError=false;if(!c.lazyEntries)c._readEntry()}ZipFile.prototype.close=function(){if(!this.isOpen)return;this.isOpen=false;this.reader.unref()};function emitErrorAndAutoClose(t,e){if(t.autoClose)t.close();emitError(t,e)}function emitError(t,e){if(t.emittedError)return;t.emittedError=true;t.emit("error",e)}ZipFile.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};ZipFile.prototype._readEntry=function(){var t=this;if(t.entryCount===t.entriesRead){setImmediate(function(){if(t.autoClose)t.close();if(t.emittedError)return;t.emit("end")});return}if(t.emittedError)return;var n=d(46);readAndAssertNoEof(t.reader,n,0,n.length,t.readEntryCursor,function(i){if(i)return emitErrorAndAutoClose(t,i);if(t.emittedError)return;var r=new Entry;var s=n.readUInt32LE(0);if(s!==33639248)return emitErrorAndAutoClose(t,new Error("invalid central directory file header signature: 0x"+s.toString(16)));r.versionMadeBy=n.readUInt16LE(4);r.versionNeededToExtract=n.readUInt16LE(6);r.generalPurposeBitFlag=n.readUInt16LE(8);r.compressionMethod=n.readUInt16LE(10);r.lastModFileTime=n.readUInt16LE(12);r.lastModFileDate=n.readUInt16LE(14);r.crc32=n.readUInt32LE(16);r.compressedSize=n.readUInt32LE(20);r.uncompressedSize=n.readUInt32LE(24);r.fileNameLength=n.readUInt16LE(28);r.extraFieldLength=n.readUInt16LE(30);r.fileCommentLength=n.readUInt16LE(32);r.internalFileAttributes=n.readUInt16LE(36);r.externalFileAttributes=n.readUInt32LE(38);r.relativeOffsetOfLocalHeader=n.readUInt32LE(42);if(r.generalPurposeBitFlag&64)return emitErrorAndAutoClose(t,new Error("strong encryption is not supported"));t.readEntryCursor+=46;n=d(r.fileNameLength+r.extraFieldLength+r.fileCommentLength);readAndAssertNoEof(t.reader,n,0,n.length,t.readEntryCursor,function(i){if(i)return emitErrorAndAutoClose(t,i);if(t.emittedError)return;var s=(r.generalPurposeBitFlag&2048)!==0;r.fileName=t.decodeStrings?decodeBuffer(n,0,r.fileNameLength,s):n.slice(0,r.fileNameLength);var l=r.fileNameLength+r.extraFieldLength;var a=n.slice(r.fileNameLength,l);r.extraFields=[];var u=0;while(u<a.length-3){var f=a.readUInt16LE(u+0);var c=a.readUInt16LE(u+2);var h=u+4;var v=h+c;if(v>a.length)return emitErrorAndAutoClose(t,new Error("extra field length exceeds extra field buffer size"));var w=d(c);a.copy(w,0,h,v);r.extraFields.push({id:f,data:w});u=v}r.fileComment=t.decodeStrings?decodeBuffer(n,l,l+r.fileCommentLength,s):n.slice(l,l+r.fileCommentLength);r.comment=r.fileComment;t.readEntryCursor+=n.length;t.entriesRead+=1;if(r.uncompressedSize===4294967295||r.compressedSize===4294967295||r.relativeOffsetOfLocalHeader===4294967295){var p=null;for(var u=0;u<r.extraFields.length;u++){var m=r.extraFields[u];if(m.id===1){p=m.data;break}}if(p==null){return emitErrorAndAutoClose(t,new Error("expected zip64 extended information extra field"))}var y=0;if(r.uncompressedSize===4294967295){if(y+8>p.length){return emitErrorAndAutoClose(t,new Error("zip64 extended information extra field does not include uncompressed size"))}r.uncompressedSize=readUInt64LE(p,y);y+=8}if(r.compressedSize===4294967295){if(y+8>p.length){return emitErrorAndAutoClose(t,new Error("zip64 extended information extra field does not include compressed size"))}r.compressedSize=readUInt64LE(p,y);y+=8}if(r.relativeOffsetOfLocalHeader===4294967295){if(y+8>p.length){return emitErrorAndAutoClose(t,new Error("zip64 extended information extra field does not include relative header offset"))}r.relativeOffsetOfLocalHeader=readUInt64LE(p,y);y+=8}}if(t.decodeStrings){for(var u=0;u<r.extraFields.length;u++){var m=r.extraFields[u];if(m.id===28789){if(m.data.length<6){continue}if(m.data.readUInt8(0)!==1){continue}var b=m.data.readUInt32LE(1);if(o.unsigned(n.slice(0,r.fileNameLength))!==b){continue}r.fileName=decodeBuffer(m.data,5,m.data.length,true);break}}}if(t.validateEntrySizes&&r.compressionMethod===0){var S=r.uncompressedSize;if(r.isEncrypted()){S+=12}if(r.compressedSize!==S){var N="compressed/uncompressed size mismatch for stored file: "+r.compressedSize+" != "+r.uncompressedSize;return emitErrorAndAutoClose(t,new Error(N))}}if(t.decodeStrings){if(!t.strictFileNames){r.fileName=r.fileName.replace(/\\/g,"/")}var R=e.validateFileName(r.fileName);if(R!=null)return emitErrorAndAutoClose(t,new Error(R))}t.emit("entry",r);if(!t.lazyEntries)t._readEntry()})})};ZipFile.prototype.openReadStream=function(t,e,n){var i=this;var s=0;var o=t.compressedSize;if(n==null){n=e;e={}}else{if(e.decrypt!=null){if(!t.isEncrypted()){throw new Error("options.decrypt can only be specified for encrypted entries")}if(e.decrypt!==false)throw new Error("invalid options.decrypt value: "+e.decrypt);if(t.isCompressed()){if(e.decompress!==false)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}}if(e.decompress!=null){if(!t.isCompressed()){throw new Error("options.decompress can only be specified for compressed entries")}if(!(e.decompress===false||e.decompress===true)){throw new Error("invalid options.decompress value: "+e.decompress)}}if(e.start!=null||e.end!=null){if(t.isCompressed()&&e.decompress!==false){throw new Error("start/end range not allowed for compressed entry without options.decompress === false")}if(t.isEncrypted()&&e.decrypt!==false){throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}}if(e.start!=null){s=e.start;if(s<0)throw new Error("options.start < 0");if(s>t.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){o=e.end;if(o<0)throw new Error("options.end < 0");if(o>t.compressedSize)throw new Error("options.end > entry.compressedSize");if(o<s)throw new Error("options.end < options.start")}}if(!i.isOpen)return n(new Error("closed"));if(t.isEncrypted()){if(e.decrypt!==false)return n(new Error("entry is encrypted, and options.decrypt !== false"))}i.reader.ref();var l=d(30);readAndAssertNoEof(i.reader,l,0,l.length,t.relativeOffsetOfLocalHeader,function(a){try{if(a)return n(a);var u=l.readUInt32LE(0);if(u!==67324752){return n(new Error("invalid local file header signature: 0x"+u.toString(16)))}var f=l.readUInt16LE(26);var c=l.readUInt16LE(28);var h=t.relativeOffsetOfLocalHeader+l.length+f+c;var d;if(t.compressionMethod===0){d=false}else if(t.compressionMethod===8){d=e.decompress!=null?e.decompress:true}else{return n(new Error("unsupported compression method: "+t.compressionMethod))}var v=h;var w=v+t.compressedSize;if(t.compressedSize!==0){if(w>i.fileSize){return n(new Error("file data overflows file bounds: "+v+" + "+t.compressedSize+" > "+i.fileSize))}}var p=i.reader.createReadStream({start:v+s,end:v+o});var m=p;if(d){var y=false;var b=r.createInflateRaw();p.on("error",function(t){setImmediate(function(){if(!y)b.emit("error",t)})});p.pipe(b);if(i.validateEntrySizes){m=new AssertByteCountStream(t.uncompressedSize);b.on("error",function(t){setImmediate(function(){if(!y)m.emit("error",t)})});b.pipe(m)}else{m=b}m.destroy=function(){y=true;if(b!==m)b.unpipe(m);p.unpipe(b);p.destroy()}}n(null,m)}finally{i.reader.unref()}})};function Entry(){}Entry.prototype.getLastModDate=function(){return dosDateTimeToDate(this.lastModFileDate,this.lastModFileTime)};Entry.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};Entry.prototype.isCompressed=function(){return this.compressionMethod===8};function dosDateTimeToDate(t,e){var n=t&31;var i=(t>>5&15)-1;var r=(t>>9&127)+1980;var s=0;var o=(e&31)*2;var l=e>>5&63;var a=e>>11&31;return new Date(r,i,n,a,l,o,s)}function validateFileName(t){if(t.indexOf("\\")!==-1){return"invalid characters in fileName: "+t}if(/^[a-zA-Z]:/.test(t)||/^\//.test(t)){return"absolute path: "+t}if(t.split("/").indexOf("..")!==-1){return"invalid relative path: "+t}return null}function readAndAssertNoEof(t,e,n,i,r,s){if(i===0){return setImmediate(function(){s(null,d(0))})}t.read(e,n,i,r,function(t,e){if(t)return s(t);if(e<i){return s(new Error("unexpected EOF"))}s()})}l.inherits(AssertByteCountStream,u);function AssertByteCountStream(t){u.call(this);this.actualByteCount=0;this.expectedByteCount=t}AssertByteCountStream.prototype._transform=function(t,e,n){this.actualByteCount+=t.length;if(this.actualByteCount>this.expectedByteCount){var i="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return n(new Error(i))}n(null,t)};AssertByteCountStream.prototype._flush=function(t){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return t(new Error(e))}t()};l.inherits(RandomAccessReader,a);function RandomAccessReader(){a.call(this);this.refCount=0}RandomAccessReader.prototype.ref=function(){this.refCount+=1};RandomAccessReader.prototype.unref=function(){var t=this;t.refCount-=1;if(t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.close(onCloseDone);function onCloseDone(e){if(e)return t.emit("error",e);t.emit("close")}};RandomAccessReader.prototype.createReadStream=function(t){var e=t.start;var n=t.end;if(e===n){var i=new f;setImmediate(function(){i.end()});return i}var r=this._readStreamForRange(e,n);var s=false;var o=new RefUnrefFilter(this);r.on("error",function(t){setImmediate(function(){if(!s)o.emit("error",t)})});o.destroy=function(){r.unpipe(o);o.unref();r.destroy()};var l=new AssertByteCountStream(n-e);o.on("error",function(t){setImmediate(function(){if(!s)l.emit("error",t)})});l.destroy=function(){s=true;o.unpipe(l);o.destroy()};return r.pipe(o).pipe(l)};RandomAccessReader.prototype._readStreamForRange=function(t,e){throw new Error("not implemented")};RandomAccessReader.prototype.read=function(t,e,n,i,r){var s=this.createReadStream({start:i,end:i+n});var o=new c;var l=0;o._write=function(n,i,r){n.copy(t,e+l,0,n.length);l+=n.length;r()};o.on("finish",r);s.on("error",function(t){r(t)});s.pipe(o)};RandomAccessReader.prototype.close=function(t){setImmediate(t)};l.inherits(RefUnrefFilter,f);function RefUnrefFilter(t){f.call(this);this.context=t;this.context.ref();this.unreffedYet=false}RefUnrefFilter.prototype._flush=function(t){this.unref();t()};RefUnrefFilter.prototype.unref=function(t){if(this.unreffedYet)return;this.unreffedYet=true;this.context.unref()};var h="\0 !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";function decodeBuffer(t,e,n,i){if(i){return t.toString("utf8",e,n)}else{var r="";for(var s=e;s<n;s++){r+=h[t[s]]}return r}}function readUInt64LE(t,e){var n=t.readUInt32LE(e);var i=t.readUInt32LE(e+4);return i*4294967296+n}var d;if(typeof Buffer.allocUnsafe==="function"){d=function(t){return Buffer.allocUnsafe(t)}}else{d=function(t){return new Buffer(t)}}function defaultCallback(t){if(t)throw t}},796:function(t){"use strict";t.exports=(t=>(class extends t{warn(t,e){if(!this.strict)this.emit("warn",t,e);else if(e instanceof Error)this.emit("error",e);else{const n=new Error(t);n.data=e;this.emit("error",n)}}}))},827:function(t,e,n){"use strict";const i=n(720);const r=n(614).EventEmitter;const s=n(747);const o=process.binding("fs");const l=o.writeBuffers;const a=o.FSReqWrap||o.FSReqCallback;const u=Symbol("_autoClose");const f=Symbol("_close");const c=Symbol("_ended");const h=Symbol("_fd");const d=Symbol("_finished");const v=Symbol("_flags");const w=Symbol("_flush");const p=Symbol("_handleChunk");const m=Symbol("_makeBuf");const y=Symbol("_mode");const b=Symbol("_needDrain");const S=Symbol("_onerror");const N=Symbol("_onopen");const R=Symbol("_onread");const I=Symbol("_onwrite");const C=Symbol("_open");const k=Symbol("_path");const O=Symbol("_pos");const L=Symbol("_queue");const A=Symbol("_read");const D=Symbol("_readSize");const M=Symbol("_reading");const z=Symbol("_remain");const U=Symbol("_size");const B=Symbol("_write");const F=Symbol("_writing");const W=Symbol("_defaultFlag");class ReadStream extends i{constructor(t,e){e=e||{};super(e);this.writable=false;if(typeof t!=="string")throw new TypeError("path must be a string");this[h]=typeof e.fd==="number"?e.fd:null;this[k]=t;this[D]=e.readSize||16*1024*1024;this[M]=false;this[U]=typeof e.size==="number"?e.size:Infinity;this[z]=this[U];this[u]=typeof e.autoClose==="boolean"?e.autoClose:true;if(typeof this[h]==="number")this[A]();else this[C]()}get fd(){return this[h]}get path(){return this[k]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[C](){s.open(this[k],"r",(t,e)=>this[N](t,e))}[N](t,e){if(t)this[S](t);else{this[h]=e;this.emit("open",e);this[A]()}}[m](){return Buffer.allocUnsafe(Math.min(this[D],this[z]))}[A](){if(!this[M]){this[M]=true;const t=this[m]();if(t.length===0)return process.nextTick(()=>this[R](null,0,t));s.read(this[h],t,0,t.length,null,(t,e,n)=>this[R](t,e,n))}}[R](t,e,n){this[M]=false;if(t)this[S](t);else if(this[p](e,n))this[A]()}[f](){if(this[u]&&typeof this[h]==="number"){s.close(this[h],t=>this.emit("close"));this[h]=null}}[S](t){this[M]=true;this[f]();this.emit("error",t)}[p](t,e){let n=false;this[z]-=t;if(t>0)n=super.write(t<e.length?e.slice(0,t):e);if(t===0||this[z]<=0){n=false;this[f]();super.end()}return n}emit(t,e){switch(t){case"prefinish":case"finish":break;case"drain":if(typeof this[h]==="number")this[A]();break;default:return super.emit(t,e)}}}class ReadStreamSync extends ReadStream{[C](){let t=true;try{this[N](null,s.openSync(this[k],"r"));t=false}finally{if(t)this[f]()}}[A](){let t=true;try{if(!this[M]){this[M]=true;do{const t=this[m]();const e=t.length===0?0:s.readSync(this[h],t,0,t.length,null);if(!this[p](e,t))break}while(true);this[M]=false}t=false}finally{if(t)this[f]()}}[f](){if(this[u]&&typeof this[h]==="number"){try{s.closeSync(this[h])}catch(t){}this[h]=null;this.emit("close")}}}class WriteStream extends r{constructor(t,e){e=e||{};super(e);this.readable=false;this[F]=false;this[c]=false;this[b]=false;this[L]=[];this[k]=t;this[h]=typeof e.fd==="number"?e.fd:null;this[y]=e.mode===undefined?438:e.mode;this[O]=typeof e.start==="number"?e.start:null;this[u]=typeof e.autoClose==="boolean"?e.autoClose:true;const n=this[O]!==null?"r+":"w";this[W]=e.flags===undefined;this[v]=this[W]?n:e.flags;if(this[h]===null)this[C]()}get fd(){return this[h]}get path(){return this[k]}[S](t){this[f]();this[F]=true;this.emit("error",t)}[C](){s.open(this[k],this[v],this[y],(t,e)=>this[N](t,e))}[N](t,e){if(this[W]&&this[v]==="r+"&&t&&t.code==="ENOENT"){this[v]="w";this[C]()}else if(t)this[S](t);else{this[h]=e;this.emit("open",e);this[w]()}}end(t,e){if(t)this.write(t,e);this[c]=true;if(!this[F]&&!this[L].length&&typeof this[h]==="number")this[I](null,0)}write(t,e){if(typeof t==="string")t=new Buffer(t,e);if(this[c]){this.emit("error",new Error("write() after end()"));return false}if(this[h]===null||this[F]||this[L].length){this[L].push(t);this[b]=true;return false}this[F]=true;this[B](t);return true}[B](t){s.write(this[h],t,0,t.length,this[O],(t,e)=>this[I](t,e))}[I](t,e){if(t)this[S](t);else{if(this[O]!==null)this[O]+=e;if(this[L].length)this[w]();else{this[F]=false;if(this[c]&&!this[d]){this[d]=true;this[f]();this.emit("finish")}else if(this[b]){this[b]=false;this.emit("drain")}}}}[w](){if(this[L].length===0){if(this[c])this[I](null,0)}else if(this[L].length===1)this[B](this[L].pop());else{const t=this[L];this[L]=[];Z(this[h],t,this[O],(t,e)=>this[I](t,e))}}[f](){if(this[u]&&typeof this[h]==="number"){s.close(this[h],t=>this.emit("close"));this[h]=null}}}class WriteStreamSync extends WriteStream{[C](){let t;try{t=s.openSync(this[k],this[v],this[y])}catch(t){if(this[W]&&this[v]==="r+"&&t&&t.code==="ENOENT"){this[v]="w";return this[C]()}else throw t}this[N](null,t)}[f](){if(this[u]&&typeof this[h]==="number"){try{s.closeSync(this[h])}catch(t){}this[h]=null;this.emit("close")}}[B](t){try{this[I](null,s.writeSync(this[h],t,0,t.length,this[O]))}catch(t){this[I](t,0)}}}const Z=(t,e,n,i)=>{const r=(t,n)=>i(t,n,e);const s=new a;s.oncomplete=r;o.writeBuffers(t,e,n,s)};e.ReadStream=ReadStream;e.ReadStreamSync=ReadStreamSync;e.WriteStream=WriteStream;e.WriteStreamSync=WriteStreamSync},835:function(t){t.exports=require("url")},858:function(t,e){"use strict";const n=e.encode=((t,e)=>{e[e.length-1]=32;if(t<0)r(t,e);else i(t,e);return e});const i=(t,e)=>{e[0]=128;for(var n=e.length-2;n>0;n--){if(t===0)e[n]=0;else{e[n]=t%256;t=Math.floor(t/256)}}};const r=(t,e)=>{e[0]=255;var n=false;t=t*-1;for(var i=e.length-2;i>0;i--){var r;if(t===0)r=0;else{r=t%256;t=Math.floor(t/256)}if(n)e[i]=a(r);else if(r===0)e[i]=0;else{n=true;e[i]=u(r)}}};const s=e.parse=(t=>{var e=t[t.length-1];var n=t[0];return n===128?l(t.slice(1,t.length-1)):o(t.slice(1,t.length-1))});const o=t=>{var e=t.length;var n=0;var i=false;for(var r=e-1;r>-1;r--){var s=t[r];var o;if(i)o=a(s);else if(s===0)o=s;else{i=true;o=u(s)}if(o!==0)n+=o*Math.pow(256,e-r-1)}return n*-1};const l=t=>{var e=t.length;var n=0;for(var i=e-1;i>-1;i--){var r=t[i];if(r!==0)n+=r*Math.pow(256,e-i-1)}return n};const a=t=>(255^t)&255;const u=t=>(255^t)+1&255},885:function(t,e,n){"use strict";e.c=e.create=n(159);e.r=e.replace=n(630);e.t=e.list=n(381);e.u=e.update=n(966);e.x=e.extract=n(656);e.Pack=n(726);e.Unpack=n(63);e.Parse=n(203);e.ReadEntry=n(662);e.WriteEntry=n(303);e.Header=n(232);e.Pax=n(582);e.types=n(554)},891:function(t){"use strict";const e=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);const n=t.exports=(t=>t?Object.keys(t).map(n=>[e.has(n)?e.get(n):n,t[n]]).reduce((t,e)=>(t[e[0]]=e[1],t),Object.create(null)):{})},904:function(t){"use strict";t.exports=((t,e)=>{t&=4095;if(e){if(t&256)t|=64;if(t&32)t|=8;if(t&4)t|=1}return t})},941:function(t,e,n){"use strict";const i=n(747);const r=n(622);const s=i.lchown?"lchown":"chown";const o=i.lchownSync?"lchownSync":"chownSync";const l=i.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/);const a=l?(t,e,n,r)=>s=>{if(!s||s.code!=="EISDIR")r(s);else i.chown(t,e,n,r)}:(t,e,n,i)=>i;const u=l?(t,e,n)=>{try{return i[o](t,e,n)}catch(r){if(r.code!=="EISDIR")throw r;i.chownSync(t,e,n)}}:i[o];const f=process.version;let c=(t,e,n)=>i.readdir(t,e,n);let h=(t,e)=>i.readdirSync(t,e);if(/^v4\./.test(f))c=((t,e,n)=>i.readdir(t,n));const d=(t,e,n,o,l)=>{if(typeof e==="string")return i.lstat(r.resolve(t,e),(i,r)=>{if(i)return l(i);r.name=e;d(t,r,n,o,l)});if(e.isDirectory()){v(r.resolve(t,e.name),n,o,u=>{if(u)return l(u);const f=r.resolve(t,e.name);i[s](f,n,o,a(f,n,o,l))})}else{const u=r.resolve(t,e.name);i[s](u,n,o,a(u,n,o,l))}};const v=(t,e,n,r)=>{c(t,{withFileTypes:true},(o,l)=>{if(o&&o.code!=="ENOTDIR"&&o.code!=="ENOTSUP")return r(o);if(o||!l.length)return i[s](t,e,n,a(t,e,n,r));let u=l.length;let f=null;const c=o=>{if(f)return;if(o)return r(f=o);if(--u===0)return i[s](t,e,n,a(t,e,n,r))};l.forEach(i=>d(t,i,e,n,c))})};const w=(t,e,n,s)=>{if(typeof e==="string"){const n=i.lstatSync(r.resolve(t,e));n.name=e;e=n}if(e.isDirectory())p(r.resolve(t,e.name),n,s);u(r.resolve(t,e.name),n,s)};const p=(t,e,n)=>{let i;try{i=h(t,{withFileTypes:true})}catch(i){if(i&&i.code==="ENOTDIR"&&i.code!=="ENOTSUP")return u(t,e,n);throw i}if(i.length)i.forEach(i=>w(t,i,e,n));return u(t,e,n)};t.exports=v;v.sync=p},965:function(t){t.exports=Pend;function Pend(){this.pending=0;this.max=Infinity;this.listeners=[];this.waiting=[];this.error=null}Pend.prototype.go=function(t){if(this.pending<this.max){pendGo(this,t)}else{this.waiting.push(t)}};Pend.prototype.wait=function(t){if(this.pending===0){t(this.error)}else{this.listeners.push(t)}};Pend.prototype.hold=function(){return pendHold(this)};function pendHold(t){t.pending+=1;var e=false;return onCb;function onCb(n){if(e)throw new Error("callback called twice");e=true;t.error=t.error||n;t.pending-=1;if(t.waiting.length>0&&t.pending<t.max){pendGo(t,t.waiting.shift())}else if(t.pending===0){var i=t.listeners;t.listeners=[];i.forEach(cbListener)}}function cbListener(e){e(t.error)}}function pendGo(t,e){e(pendHold(t))}},966:function(t,e,n){"use strict";const i=n(891);const r=n(630);const s=t.exports=((t,e,n)=>{const s=i(t);if(!s.file)throw new TypeError("file is required");if(s.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);o(s);return r(s,e,n)});const o=t=>{const e=t.filter;if(!t.mtimeCache)t.mtimeCache=new Map;t.filter=e?(n,i)=>e(n,i)&&!(t.mtimeCache.get(n)>i.mtime):(e,n)=>!(t.mtimeCache.get(e)>n.mtime)}}});